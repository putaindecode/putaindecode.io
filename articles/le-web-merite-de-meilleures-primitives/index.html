<!DOCTYPE html><html lang="fr"><head><title data-react-helmet="true">Le web mérite de meilleures primitives | Putain de code</title><meta data-react-helmet="true" charset="UTF-8"/><meta data-react-helmet="true" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" name="viewport"/><meta data-react-helmet="true" content="summary_large_image" name="twitter:card"/><meta data-react-helmet="true" content="Putain de code !" property="og:site_name"/><meta data-react-helmet="true" content="@putaindecode" name="twitter:site"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" property="og:image"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" name="twitter:image"/><meta data-react-helmet="true" content="1500" property="og:image:width"/><meta data-react-helmet="true" content="777" property="og:image:height"/><meta data-react-helmet="true" content="Le web mérite de meilleures primitives | Putain de code" property="og:title"/><meta data-react-helmet="true" content="Le web mérite de meilleures primitives | Putain de code" name="twitter:title"/><meta data-react-helmet="true" content="Un article proposé par zoontek" name="description"/><link data-react-helmet="true" title="RSS Feed" href="/api/articles/feeds/desc/feed.xml" rel="alternate" type="application/rss+xml"/><link data-react-helmet="true" href="/favicon.ico" rel="shortcut icon"/><link data-react-helmet="true" href="https://putaindecode.io/articles/le-web-merite-de-meilleures-primitives" rel="canonical"/><script>window.PAGES_BOOT_MODE="hydrate";</script></head><div id="root"><style data-emotion="rpcss zx73cm 1lc6tyj 28v1b4">@-webkit-keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}@keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}:root{--page-background-color:#fff;--page-slightly-accented-background-color:#F9F6F6;--page-accented-background-color:#E4EBEE;--page-text-color:#46515B;--link-text-color:#E51D58;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#FAF3E1;--one-percent-contrast-color:rgba(0, 0, 0, 0.1);--half-percent-contrast-color:rgba(0, 0, 0, 0.05);}@media (prefers-color-scheme: dark){:root{--page-background-color:#222;--page-slightly-accented-background-color:#171717;--page-accented-background-color:#111;--page-text-color:#ddd;--link-text-color:#F87098;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#4F3804;--one-percent-contrast-color:rgba(255, 255, 255, 0.1);--half-percent-contrast-color:rgba(255, 255, 255, 0.05);}}body{padding:0;margin:0;background-color:var(--page-background-color);color:var(--page-text-color);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;overflow-x:hidden;}html{font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}a{color:var(--link-text-color);-webkit-text-decoration:underline;text-decoration:underline;}a:hover{-webkit-text-decoration:none;text-decoration:none;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}*,*:before,*:after{box-sizing:border-box;}pre,.hljs{color:#adbac7;background:#22272e;}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067;}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb;}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#6cb6ff;}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#96d0ff;}.hljs-built_in,.hljs-symbol{color:#f69d50;}.hljs-comment,.hljs-code,.hljs-formula{color:#768390;}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#8ddb8c;}.hljs-subst{color:#adbac7;}.hljs-section{color:#316dca;font-weight:bold;}.hljs-bullet{color:#eac55f;}.hljs-emphasis{color:#adbac7;font-style:italic;}.hljs-strong{color:#adbac7;font-weight:bold;}.hljs-addition{color:#b4f1b4;background-color:#1b4721;}.hljs-deletion{color:#ffd8d3;background-color:#78191b;}</style><style data-emotion="rpcss 9vhaby">.rpcss-9vhaby{background-color:var(--gradient-red-bottom);background-image:linear-gradient(to bottom right, var(--gradient-red-top), var(--gradient-red-bottom));}</style><header class="rpcss-9vhaby" style="background-image:linear-gradient(to bottom right, hsl(217, 100%, 35%), hsl(180, 100%, 30%))"><style data-emotion="rpcss 1qqk0tr">.rpcss-1qqk0tr{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}</style><div class="rpcss-1qqk0tr"><style data-emotion="rpcss qx7dny">.rpcss-qx7dny{width:100%;max-width:1024px;margin:0 auto;padding:0 10px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="rpcss-qx7dny"><style data-emotion="rpcss 7s9om2">.rpcss-7s9om2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:20px 0 50px;}</style><div class="rpcss-7s9om2"><style data-emotion="rpcss gdpa5c">.rpcss-gdpa5c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-gdpa5c" href="/"><style data-emotion="rpcss 1lm4738">.rpcss-1lm4738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;padding-bottom:10px;}</style><div class="rpcss-1lm4738"><style data-emotion="rpcss 13o7eu2">.rpcss-13o7eu2{display:block;}</style><svg class="rpcss-13o7eu2" height="36px" width="36px" viewBox="0 0 36 36"><defs><linearGradient id="PutainDeCodeLogoGradient" x1="50%" x2="50%" y1="0%" y2="127.223881%"><stop offset="0%" stop-color="#E41D57"></stop><stop offset="100%" stop-color="#C60000"></stop></linearGradient></defs><circle cx="18" cy="18" fill="url(#PutainDeCodeLogoGradient)" r="17" stroke="#FFFFFF" stroke-width="2"></circle><polygon fill="#FFFFFF" points="15.9033203 18.2246094 15.9033203 18.3710938 11.2304688 20.5317383 11.2304688 22.8095703 18.0566406 19.184082 18.0566406 17.4116211 11.2304688 13.7788086 11.2304688 16.0639648"></polygon><rect height="14" width="2" fill="#FFFFFF" x="22" y="11"><animate attributeName="opacity" begin="100ms" calcMode="discrete" dur="2s" repeatCount="indefinite" values="1;0"></animate></rect></svg><style data-emotion="rpcss 4cf197">.rpcss-4cf197{width:10px;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-4cf197"></div><style data-emotion="rpcss u5k24">.rpcss-u5k24{font-size:22px;color:#fff;font-weight:800;}</style><div aria-level="2" class="rpcss-u5k24" role="heading">Putain de code !</div></div><style data-emotion="rpcss 1nyebg4">.rpcss-1nyebg4{font-size:14px;color:rgba(255, 255, 255, 0.8);text-align:center;}</style><div class="rpcss-1nyebg4">Blog participatif de la communauté dev</div></a></div></div></div></header><style data-emotion="rpcss a4ric9">.rpcss-a4ric9{background-color:var(--page-slightly-accented-background-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="rpcss-a4ric9"><style data-emotion="rpcss oeugsb">.rpcss-oeugsb{-webkit-animation:500ms ease-out animation-zx73cm;animation:500ms ease-out animation-zx73cm;}</style><div class="rpcss-oeugsb"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1qc2bam">.rpcss-1qc2bam{font-size:42px;font-weight:800;text-align:center;padding-top:40px;line-height:1.2;margin:0;}</style><h1 class="rpcss-1qc2bam">Le web mérite de meilleures primitives</h1><style data-emotion="rpcss obg2kr">.rpcss-obg2kr{font-size:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:40px;color:var(--page-text-color);-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-obg2kr" href="https://github.com/zoontek"><style data-emotion="rpcss uco8i7">.rpcss-uco8i7{width:32px;height:32px;border-radius:100%;margin-right:10px;}</style><img class="rpcss-uco8i7" alt="zoontek" src="https://avatars.githubusercontent.com/zoontek?size=64"/><div>zoontek<!-- --> <!-- -->•<!-- --> <!-- -->2021/04/12</div></a><style data-emotion="rpcss 15kxmi0">.rpcss-15kxmi0{max-width:640px;width:100%;font-size:18px;margin:0 auto;line-height:1.7;}.rpcss-15kxmi0 h2,.rpcss-15kxmi0 h3,.rpcss-15kxmi0 h4,.rpcss-15kxmi0 h5,.rpcss-15kxmi0 h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-weight:800;line-height:1.2;}.rpcss-15kxmi0 img{max-width:100%;background-color:rgba(255, 255, 255, 0.75);}.rpcss-15kxmi0 code{font-size:0.9em;font-family:PragmataPro,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:1;background-color:var(--code-background-color);margin:0 0.2em;}.rpcss-15kxmi0 pre{padding:10px;overflow-x:auto;font-size:14px;border-radius:10px;border:2px solid var(--one-percent-contrast-color);-webkit-overflow-scrolling:touch;}.rpcss-15kxmi0 pre code{font-size:14px;background-color:transparent;margin:0;}.rpcss-15kxmi0 blockquote{padding-left:20px;margin:0;font-size:16px;border-left:3px solid var(--one-percent-contrast-color);font-style:italic;}.rpcss-15kxmi0 table{width:100%;text-align:center;}.rpcss-15kxmi0 figure{padding:20px 0;}.rpcss-15kxmi0 figcaption{text-align:center;}.rpcss-15kxmi0 a{word-wrap:break-word;}.rpcss-15kxmi0 table thead th{background-color:var(--page-accented-background-color);padding:10px 0;}</style><div class="rpcss-15kxmi0"><p>Il est souvent reproché aux développeurs front-end d'utiliser des abstractions
inutilement complexes sous couvert d'une volonté de &quot;s'amuser&quot; avec celles-ci
plutôt que de concevoir des sites simples, accessibles et performants.</p>
<p>Personnellement, j'apprécie énormément
<a href="https://necolas.github.io/react-native-web/">react-native-web</a> et ai tendance à
m'en servir systématiquement et ce même si la plupart du temps il n'est même pas
question de partage de code avec une application mobile.</p>
<p>Ce qui veut dire que je suis régulièrement tenu d'écrire du code de la sorte:</p>
<pre><code class="hljs language-jsx"><span class="hljs-keyword">import</span> { Pressable } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-native&quot;</span>;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Pressable</span>
  <span class="hljs-attr">accessibilityRole</span>=<span class="hljs-string">&quot;button&quot;</span>
  <span class="hljs-attr">style</span>=<span class="hljs-string">{({</span> <span class="hljs-attr">hovered</span>, <span class="hljs-attr">focused</span>, <span class="hljs-attr">pressed</span> }) =&gt;</span> [
    { backgroundColor: &quot;red&quot; },
    hovered &amp;&amp; { backgroundColor: &quot;blue&quot; },
    focused &amp;&amp; { backgroundColor: &quot;green&quot; },
    pressed &amp;&amp; { backgroundColor: &quot;pink&quot; },
  ]}
&gt;
  Click me
<span class="hljs-tag">&lt;/<span class="hljs-name">Pressable</span>&gt;</span></span>;
</code></pre>
<p>Vous allez me dire que c'est horrible. J'utilise une <code>&lt;div&gt;</code> en lieu et place
d'un <code>&lt;button&gt;</code>, du CSS-in-JS pour styliser mon élément et je fais même
totalement l'impasse sur l'usage des pseudo-classes <code>:hover</code> et <code>:focus</code>!</p>
<p>Pourquoi diable s'acharner à réimplémenter ce qui existe de base sur la
plateforme web et qui fonctionne bien?</p>
<h2>Qui fonctionne bien, vous êtes sûrs?</h2>
<p>Déconstruisons donc cet exemple. Je souhaite créer un bouton rouge qui sera bleu
au survol, vert quand il aura le focus et rose quand il sera pressé.</p>
<h3>Le cas du survol</h3>
<p>Implémentons notre solution naïvement:</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css"><span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">appearance</span>: none;
  <span class="hljs-attribute">background-color</span>: red;
}

<span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background-color</span>: blue;
}
</code></pre>
<p>Cela ne suffira pas. En effet, mon bouton deviendra bleu lors d'un appui sur
smartphone ou autre appareil tactile.</p>
<p><img src="/public/images/articles/2021-04-12-le-web-merite-de-meilleures-primitives/BlueButton.png" alt="Bouton bleu" /></p>
<p>Heureusement, il existe une bride de solution: le media query
<a href="https://developer.mozilla.org/fr/docs/Web/CSS/@media/hover"><code>hover</code></a>.</p>
<blockquote>
<p>hover est une caractéristique média CSS (cf. @media) qui permet de vérifier si
le dispositif de saisie/d'entrée principal permet à l'utilisateur de survoler
les éléments.</p>
</blockquote>
<p>Il serait donc possible de corriger le problème de la sorte:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">appearance</span>: none;
  <span class="hljs-attribute">background-color</span>: red;
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">hover:</span> hover) {
  <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">background-color</span>: blue;
  }
}
</code></pre>
<p>Sauf qu'encore une fois, tout cela reste imparfait. Depuis peu, il est devenu
possible d'utiliser un périphérique de pointage (type souris donc, avec son
curseur) sur iPad et, je vous le donne en mille, le dispositif d'entrée
principal restant l'écran tactile, les styles présents dans le media query en
question ne seront pas activés lors du survol du curseur.</p>
<p>L'affaire serait donc insoluble? Pas nécessairement, mais résoudre tous les
problèmes inhérents à chaque appareil et situation afin de normaliser le
comportement de cette interaction pourtant basique n'est au final pas mince
affaire, comme peuvent l'attester l'implémentation des abstractions offertes par
<a href="https://github.com/necolas/react-native-web/blob/0.15.5/packages/react-native-web/src/modules/useHover/index.js"><code>react-native-web</code></a>
ou
<a href="https://github.com/adobe/react-spectrum/blob/react-aria%403.5.0/packages/@react-aria/interactions/src/useHover.ts"><code>@react-aria</code></a>.</p>
<h3>Le cas du focus</h3>
<p>Rebelote, traitons le problème naïvement:</p>
<pre><code class="hljs language-css"><span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">appearance</span>: none;
  <span class="hljs-attribute">background-color</span>: red;
}

<span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:focus</span> {
  <span class="hljs-attribute">background-color</span>: green;
}
</code></pre>
<p>Tout comme pour le cas du survol, cette solution est loin d'être parfaite
puisque le style appliqué normalement au focus sera visible au clic.</p>
<p><img alt="Bouton vert" src="/public/images/articles/2021-04-12-le-web-merite-de-meilleures-primitives/GreenButton.png" style="max-width: 180px"></p>
<p>Pire encore, l'apparition du <strong>focus-ring</strong>, pourtant indispensable à une bonne
navigation au clavier, poussera grand nombre de développeurs non sensibilisés au
sujet à appliquer le fameux <code>outline-style: none</code> et à anéantir une grande part
de l'accessibilité du site au passage.</p>
<p>Mais tout comme le cas du survol, il existe une bride de solution: la
pseudo-classe
<a href="https://developer.mozilla.org/fr/docs/Web/CSS/:focus-visible"><code>:focus-visible</code></a>.</p>
<blockquote>
<p>La pseudo-classe :focus-visible s'applique lorsqu'un élément correspond à la
pseudo-classe focus et que l'agent utilisateur détermine, via une heuristique,
que le focus devrait être mis en évidence sur l'élément (la plupart des
navigateurs affichent un contour en surbrillance par défaut).</p>
</blockquote>
<pre><code class="hljs language-css"><span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">appearance</span>: none;
  <span class="hljs-attribute">background-color</span>: red;
}

<span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:focus-visible</span> {
  <span class="hljs-attribute">background-color</span>: green;
}
</code></pre>
<p>Et tout comme le media query <code>hover</code>, cette solution reste imparfaite: si l'on
met de côté son support navigateur restreint à l'heure où je rédige cet article,
on peut également pointer du doigt le fait que le focus reste &quot;cassé&quot; en
JavaScript. En effet, il n'est pas encore question d'un événément
<code>focus-visible</code> et l'événement <code>focus</code> reste déclenché lors du clic sur certains
navigateurs.</p>
<p>Il vous sera donc très difficile de réagir à une réelle intention de focus, sauf
si, encore une fois, vous utilisez des abstractions offertes par
<a href="https://github.com/necolas/react-native-web/blob/0.15.5/packages/react-native-web/src/modules/modality/index.js"><code>react-native-web</code></a>,
<a href="https://github.com/adobe/react-spectrum/blob/main/packages/%40react-aria/interactions/src/useFocusVisible.ts"><code>@react-aria</code></a>
ou autre.</p>
<h3>Le cas du <code>&lt;button&gt;</code></h3>
<p>Reste un dernier point: l'usage d'une <code>&lt;div&gt;</code> à la place d'un <code>&lt;button&gt;</code>.
L'argument souvent avancé contre cela est le suivant :</p>
<blockquote>
<p>Utiliser une <code>&lt;div&gt;</code> pour réimplémenter un bouton en lieu et place d'un
<code>&lt;button&gt;</code> peut ruiner l'accessibilité de celui-ci.</p>
</blockquote>
<p>Je suis absolument d'accord avec ce point. Réimplémenter le comportement d'un
bouton en partant de zéro est complexe, vous mènera certainement à commettre un
tas d'erreurs et je vous le déconseille fortement.</p>
<p>Seulement ici ce n'est pas le cas : j'utilise une abstraction qui a correctement
été pensée et ne souffre d'aucun réel défaut d'accessibilité si on la compare à
un <code>&lt;button&gt;</code>. Sachant qu'en plus il y a encore très peu, les <code>&lt;button&gt;</code>
souffraient de
<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=700029#c24">problèmes de styling</a>
et que donc, il m'est nécessaire soit d'en tenir compte, soit de ne pas
supporter certaines versions de navigateurs pourtant récentes.</p>
<p>Si j'ai ce composant <code>&lt;Pressable&gt;</code> à ma disposition, qui a le bon goût de ne pas
souffrir des problèmes présentés plus haut et réagit tel que la logique le
voudrait lors du survol, du focus ou encore de l'appui… Pourquoi devrais-je donc
m'en passer?</p>
<h2>Autres manques, en vrac</h2>
<h3>Le focus-trapping</h3>
<p>Afin de faciliter l'accessibilité clavier, il est important de &quot;capturer&quot; et de
borner le focus lors de l'apparition d'une modale, par exemple (ce qu'on appelle
communément le <code>focus-trapping</code>).</p>
<figure>
  <img src="/public/images/articles/2021-04-12-le-web-merite-de-meilleures-primitives/FocusTrappingFail.png" />
  <figcaption>Exemple d'échec de focus trapping: il est possible de sélectionner le champ de recherche à l'aide de son clavier</figcaption>
</figure>
<p>Il existe actuellement 2 potentielles solutions à ce problème. L'une, haut
niveau, est l'élément natif
<a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/dialog"><code>&lt;dialog&gt;</code></a>,
l'autre, plus bas niveau (et plus intéressante selon moi) est l'attribut
<a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/inert"><code>inert</code></a>.
Ces solutions ne sont malheureusement pour le moment pas très bien, voire pas du
tout, supportées par les navigateurs.</p>
<h3>Les popups</h3>
<p>Tout comme les modales, elles sont présentes dans une majeure partie des
interfaces web actuelles et pourtant il n'existe actuellement aucune méthode
simple et sans abstraction qui nous permette d'en créer une.</p>
<p>Dans un futur proche, peut-être (je l'espère) que
<a href="https://github.com/MicrosoftEdge/MSEdgeExplainers/blob/main/Popup/explainer.md">la proposition de Microsoft</a>
sera retenue, mais en attendant, bon courage pour implémenter ça &quot;à la main&quot; si
vous souhaitez que celles-ci soient fonctionnelles sur tous les navigateurs,
tout type d'appareil et de surcroît parfaitement accessibles.</p>
<h3>Plus? Plus!</h3>
<p>Qu'en est-il de tout ces besoins devenus quasiment primaires:</p>
<ul>
<li>Les masques sur les champs texte?</li>
<li>Un élément <code>&lt;switch&gt;</code>?</li>
<li>Les listes virtualisées (avec recherche fonctionnelle au sein de la page)?</li>
<li>Le RTL (right-to-left) simplifié?</li>
<li>Les containers queries en CSS?</li>
<li>Le champ texte <code>type=number</code>
(<a href="https://technology.blog.gov.uk/2020/02/24/why-the-gov-uk-design-system-team-changed-the-input-type-for-numbers/">actuellement cassé</a>)?</li>
<li>… la liste est potentiellement <strong>infinie</strong></li>
</ul>
<h2>Du coup, qu'est ce qu'on fait?</h2>
<p>Avant tout, arrêtons de blâmer les développeurs qui découvrent aujourd'hui cette
complexité monstre et cessons de leur déconseiller d'utiliser des abstractions,
de leur dire de &quot;juste apprendre le HTML, CSS et JS&quot; car ce comportement est
dangereux et ne tient pas compte d'une chose : si vous avez vu vécu l'évolution
du web et vu apparaitre des courants tels que le responsive design, de nouveaux
types d'appareils tels que les smartphones et eu le temps de vous adapter à ces
changements, ce n'est pas le cas de développeurs plus juniors qui se retrouvent
aujourd'hui face à une quantité astronomique de problématiques, sans courbe
d'apprentissage naturelle guidée par l'évolution des usages.</p>
<p>L'accessibilité vous tient à cœur? Parfait. Conseillez-leur d'utiliser une
abstraction simple qui leur garantira un bon résultat, plutôt que de leur
conseiller de devenir un expert absolu sur le domaine afin de ne pas se tirer
une balle dans le pied. S'il sont intéressés par le sujet, ils se pencheront sur
la façon dont est conçue celle-ci, s'ils ne le sont pas, et bien, au moins les
utilisateurs de leurs sites bénéficieront d'une meilleure accessibilité. Et je
pense que c'est ce qui importe le plus: <strong>l'objectif est plus important que le
moyen</strong>.</p>
<p>Ensuite, posons-nous réellement la question de la nécessité de ces ajouts
continuels de solutions de haut niveau dans la plateforme web, qui débarquent
sans que jamais rien ne semble vraiment être officiellement déclaré caduque. En
effet, toutes les solutions énoncées précédemment viennent ou viendront <strong>en
plus</strong> de tout ce qui peut déjà exister.</p>
<p><strong>La plateforme déborde</strong>. J'en prends pour exemple une donnée qui me semble
totalement absurde, le nombre de propriétés CSS actuel:
<a href="https://css-tricks.com/how-many-css-properties-are-there/">520 (+132 en attente)</a>.
Outre le fait que cela rend extrêmement complexe l'apparition de nouveaux
navigateurs web, cela rend la charge mentale du développeur <strong>incommensurable</strong>.
Il en va de même avec l'évolution de la syntaxe JavaScript, l'augmentation du
nombre de sélecteurs CSS, l'apparition de
<a href="https://developer.mozilla.org/fr/docs/Web/API">nouvelles APIs</a>, etc.</p>
<p>Imaginez si demain un nouveau paradigme d'utilisation venait à apparaitre (une
interaction autre que le touch, par exemple) ou si un nouveau type de pattern UI
gagnait en popularité (comme a pu le faire le switch). Devrait-on continuer à
empiler…? Ou devrait-on accepter le fait que le web a plus que jamais besoin
d'abstractions au dessus de concepts bas niveau, que celles-ci soient des
bibliothèques exécutées au runtime ou carrément des langages de plus haut niveau
qui compileront vers du HTML, CSS et JS en guise de bytecode?</p>
<p>L'avenir est incertain, imitez-le.</p>
</div><style data-emotion="rpcss unyj6i">.rpcss-unyj6i{max-width:640px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:20px auto;padding:20px;background-color:var(--page-background-color);border-radius:10px;box-shadow:0 15px 15px -5px rgba(0, 0, 0, 0.2);}@media (max-width: 540px){.rpcss-unyj6i{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-unyj6i"><style data-emotion="rpcss ty7r4z">.rpcss-ty7r4z{font-weight:800;}</style><div class="rpcss-ty7r4z">Vous avez aimé cet article?</div><style data-emotion="rpcss klacsp">.rpcss-klacsp{width:0;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-klacsp"></div><style data-emotion="rpcss 1pkr03v">.rpcss-1pkr03v{background-color:#00aced;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:800;}.rpcss-1pkr03v:active{opacity:0.5;}</style><a class="rpcss-1pkr03v" href="https://www.twitter.com/intent/tweet?text=Le%20web%20m%C3%A9rite%20de%20meilleures%20primitives%20sur%20%40PutainDeCode%20https%3A%2F%2Fputaindecode.io%2Farticles%2Fle-web-merite-de-meilleures-primitives" target="_blank">Le partager sur Twitter</a></div><style data-emotion="rpcss x4iqxe">.rpcss-x4iqxe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;padding:20px;}</style><div class="rpcss-x4iqxe"><style data-emotion="rpcss gein6x">.rpcss-gein6x{font-size:20px;-webkit-text-decoration:none;text-decoration:none;color:#1E49B5;}</style><a class="rpcss-gein6x" href="/articles">← Articles</a></div></div></div></div></div><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1vau6rl">.rpcss-1vau6rl{margin:20px 0;background-color:var(--page-accented-background-color);border-radius:10px;padding:20px;}</style><div class="rpcss-1vau6rl"><style data-emotion="rpcss 1gz1i1h">.rpcss-1gz1i1h{font-size:32px;font-weight:800;margin-bottom:20px;text-align:center;}</style><div aria-level="2" class="rpcss-1gz1i1h" role="heading">Ne rien rater</div><style data-emotion="rpcss 1wbispj">.rpcss-1wbispj{font-size:18px;margin-bottom:10px;text-align:center;}</style><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur les réseaux</div><style data-emotion="rpcss 1hyoz7m">.rpcss-1hyoz7m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="rpcss-1hyoz7m"><a href="https://twitter.com/PutainDeCode"><img alt="Twitter" height="48" src="/public/images/website/twitter.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://facebook.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/facebook.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://github.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/github.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://itunes.apple.com/fr/podcast/putain-de-code-!/id1185311825"><img alt="Apple Podcast" height="48" src="/public/images/website/apple-podcast.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://soundcloud.com/putaindecode"><img alt="Soundcloud" height="48" src="/public/images/website/soundcloud.svg" width="48"/></a></div><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur le chat</div><div class="rpcss-1hyoz7m"><a href="https://discord.gg/jtbGNNc"><img alt="Discord" height="48" src="/public/images/website/discord.svg" width="48"/></a></div></div></div></div><style data-emotion="rpcss zs8kw7">.rpcss-zs8kw7{background-color:#222;padding:20px 0;}</style><footer class="rpcss-zs8kw7"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 79elbk">.rpcss-79elbk{position:relative;}</style><div class="rpcss-79elbk"><style data-emotion="rpcss 1hle0ni">.rpcss-1hle0ni{position:absolute;left:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1hle0ni" href="/api/articles/feeds/desc/feed.xml"><style data-emotion="rpcss lvyu5j">.rpcss-lvyu5j{margin-right:10px;}</style><img class="rpcss-lvyu5j" alt="Flux RSS" height="16" src="/public/images/website/rss-feed.svg" width="16"/><style data-emotion="rpcss um3i31">@media (max-width: 400px){.rpcss-um3i31{display:none;}}</style><div class="rpcss-um3i31">Flux RSS</div></a><style data-emotion="rpcss 12cp4l7">.rpcss-12cp4l7{color:rgba(255, 255, 255, 0.5);text-align:center;font-size:14px;}</style><div class="rpcss-12cp4l7">© 2021 Putain de code !</div><style data-emotion="rpcss 1w98uy3">.rpcss-1w98uy3{position:absolute;right:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1w98uy3" href="https://github.com/putaindecode/putaindecode.io">GitHub</a></div></div></div></footer></div><script id="initialData" type="text/data">{"lists":{"RE_PRIVATE_NONE":true},"items":{"k":"articles","v":{"k":"le-web-merite-de-meilleures-primitives","v":{"_0":{"TAG":0,"_0":{"slug":"le-web-merite-de-meilleures-primitives","filename":"2021-04-12-le-web-merite-de-meilleures-primitives","title":"Le web mérite de meilleures primitives","date":"Mon, 12 Apr 2021 00:00:00 GMT","draft":false,"meta":{"title":"Le web mérite de meilleures primitives","date":"2021-04-12T00:00:00.000Z","author":"zoontek","slug":"le-web-merite-de-meilleures-primitives"},"body":"<p>Il est souvent reproché aux développeurs front-end d'utiliser des abstractions\ninutilement complexes sous couvert d'une volonté de &quot;s'amuser&quot; avec celles-ci\nplutôt que de concevoir des sites simples, accessibles et performants.</p>\n<p>Personnellement, j'apprécie énormément\n<a href=\"https://necolas.github.io/react-native-web/\">react-native-web</a> et ai tendance à\nm'en servir systématiquement et ce même si la plupart du temps il n'est même pas\nquestion de partage de code avec une application mobile.</p>\n<p>Ce qui veut dire que je suis régulièrement tenu d'écrire du code de la sorte:</p>\n<pre><code class=\"hljs language-jsx\"><span class=\"hljs-keyword\">import</span> { Pressable } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react-native&quot;</span>;\n\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pressable</span>\n  <span class=\"hljs-attr\">accessibilityRole</span>=<span class=\"hljs-string\">&quot;button&quot;</span>\n  <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">{({</span> <span class=\"hljs-attr\">hovered</span>, <span class=\"hljs-attr\">focused</span>, <span class=\"hljs-attr\">pressed</span> }) =&gt;</span> [\n    { backgroundColor: &quot;red&quot; },\n    hovered &amp;&amp; { backgroundColor: &quot;blue&quot; },\n    focused &amp;&amp; { backgroundColor: &quot;green&quot; },\n    pressed &amp;&amp; { backgroundColor: &quot;pink&quot; },\n  ]}\n&gt;\n  Click me\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pressable</span>&gt;</span></span>;\n</code></pre>\n<p>Vous allez me dire que c'est horrible. J'utilise une <code>&lt;div&gt;</code> en lieu et place\nd'un <code>&lt;button&gt;</code>, du CSS-in-JS pour styliser mon élément et je fais même\ntotalement l'impasse sur l'usage des pseudo-classes <code>:hover</code> et <code>:focus</code>!</p>\n<p>Pourquoi diable s'acharner à réimplémenter ce qui existe de base sur la\nplateforme web et qui fonctionne bien?</p>\n<h2>Qui fonctionne bien, vous êtes sûrs?</h2>\n<p>Déconstruisons donc cet exemple. Je souhaite créer un bouton rouge qui sera bleu\nau survol, vert quand il aura le focus et rose quand il sera pressé.</p>\n<h3>Le cas du survol</h3>\n<p>Implémentons notre solution naïvement:</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span>&gt;</span>Click me<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n</code></pre>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">button</span> {\n  <span class=\"hljs-attribute\">appearance</span>: none;\n  <span class=\"hljs-attribute\">background-color</span>: red;\n}\n\n<span class=\"hljs-selector-tag\">button</span><span class=\"hljs-selector-pseudo\">:hover</span> {\n  <span class=\"hljs-attribute\">background-color</span>: blue;\n}\n</code></pre>\n<p>Cela ne suffira pas. En effet, mon bouton deviendra bleu lors d'un appui sur\nsmartphone ou autre appareil tactile.</p>\n<p><img src=\"/public/images/articles/2021-04-12-le-web-merite-de-meilleures-primitives/BlueButton.png\" alt=\"Bouton bleu\" /></p>\n<p>Heureusement, il existe une bride de solution: le media query\n<a href=\"https://developer.mozilla.org/fr/docs/Web/CSS/@media/hover\"><code>hover</code></a>.</p>\n<blockquote>\n<p>hover est une caractéristique média CSS (cf. @media) qui permet de vérifier si\nle dispositif de saisie/d'entrée principal permet à l'utilisateur de survoler\nles éléments.</p>\n</blockquote>\n<p>Il serait donc possible de corriger le problème de la sorte:</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">button</span> {\n  <span class=\"hljs-attribute\">appearance</span>: none;\n  <span class=\"hljs-attribute\">background-color</span>: red;\n}\n\n<span class=\"hljs-keyword\">@media</span> (<span class=\"hljs-attribute\">hover:</span> hover) {\n  <span class=\"hljs-selector-tag\">button</span><span class=\"hljs-selector-pseudo\">:hover</span> {\n    <span class=\"hljs-attribute\">background-color</span>: blue;\n  }\n}\n</code></pre>\n<p>Sauf qu'encore une fois, tout cela reste imparfait. Depuis peu, il est devenu\npossible d'utiliser un périphérique de pointage (type souris donc, avec son\ncurseur) sur iPad et, je vous le donne en mille, le dispositif d'entrée\nprincipal restant l'écran tactile, les styles présents dans le media query en\nquestion ne seront pas activés lors du survol du curseur.</p>\n<p>L'affaire serait donc insoluble? Pas nécessairement, mais résoudre tous les\nproblèmes inhérents à chaque appareil et situation afin de normaliser le\ncomportement de cette interaction pourtant basique n'est au final pas mince\naffaire, comme peuvent l'attester l'implémentation des abstractions offertes par\n<a href=\"https://github.com/necolas/react-native-web/blob/0.15.5/packages/react-native-web/src/modules/useHover/index.js\"><code>react-native-web</code></a>\nou\n<a href=\"https://github.com/adobe/react-spectrum/blob/react-aria%403.5.0/packages/@react-aria/interactions/src/useHover.ts\"><code>@react-aria</code></a>.</p>\n<h3>Le cas du focus</h3>\n<p>Rebelote, traitons le problème naïvement:</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">button</span> {\n  <span class=\"hljs-attribute\">appearance</span>: none;\n  <span class=\"hljs-attribute\">background-color</span>: red;\n}\n\n<span class=\"hljs-selector-tag\">button</span><span class=\"hljs-selector-pseudo\">:focus</span> {\n  <span class=\"hljs-attribute\">background-color</span>: green;\n}\n</code></pre>\n<p>Tout comme pour le cas du survol, cette solution est loin d'être parfaite\npuisque le style appliqué normalement au focus sera visible au clic.</p>\n<p><img alt=\"Bouton vert\" src=\"/public/images/articles/2021-04-12-le-web-merite-de-meilleures-primitives/GreenButton.png\" style=\"max-width: 180px\"></p>\n<p>Pire encore, l'apparition du <strong>focus-ring</strong>, pourtant indispensable à une bonne\nnavigation au clavier, poussera grand nombre de développeurs non sensibilisés au\nsujet à appliquer le fameux <code>outline-style: none</code> et à anéantir une grande part\nde l'accessibilité du site au passage.</p>\n<p>Mais tout comme le cas du survol, il existe une bride de solution: la\npseudo-classe\n<a href=\"https://developer.mozilla.org/fr/docs/Web/CSS/:focus-visible\"><code>:focus-visible</code></a>.</p>\n<blockquote>\n<p>La pseudo-classe :focus-visible s'applique lorsqu'un élément correspond à la\npseudo-classe focus et que l'agent utilisateur détermine, via une heuristique,\nque le focus devrait être mis en évidence sur l'élément (la plupart des\nnavigateurs affichent un contour en surbrillance par défaut).</p>\n</blockquote>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">button</span> {\n  <span class=\"hljs-attribute\">appearance</span>: none;\n  <span class=\"hljs-attribute\">background-color</span>: red;\n}\n\n<span class=\"hljs-selector-tag\">button</span><span class=\"hljs-selector-pseudo\">:focus-visible</span> {\n  <span class=\"hljs-attribute\">background-color</span>: green;\n}\n</code></pre>\n<p>Et tout comme le media query <code>hover</code>, cette solution reste imparfaite: si l'on\nmet de côté son support navigateur restreint à l'heure où je rédige cet article,\non peut également pointer du doigt le fait que le focus reste &quot;cassé&quot; en\nJavaScript. En effet, il n'est pas encore question d'un événément\n<code>focus-visible</code> et l'événement <code>focus</code> reste déclenché lors du clic sur certains\nnavigateurs.</p>\n<p>Il vous sera donc très difficile de réagir à une réelle intention de focus, sauf\nsi, encore une fois, vous utilisez des abstractions offertes par\n<a href=\"https://github.com/necolas/react-native-web/blob/0.15.5/packages/react-native-web/src/modules/modality/index.js\"><code>react-native-web</code></a>,\n<a href=\"https://github.com/adobe/react-spectrum/blob/main/packages/%40react-aria/interactions/src/useFocusVisible.ts\"><code>@react-aria</code></a>\nou autre.</p>\n<h3>Le cas du <code>&lt;button&gt;</code></h3>\n<p>Reste un dernier point: l'usage d'une <code>&lt;div&gt;</code> à la place d'un <code>&lt;button&gt;</code>.\nL'argument souvent avancé contre cela est le suivant :</p>\n<blockquote>\n<p>Utiliser une <code>&lt;div&gt;</code> pour réimplémenter un bouton en lieu et place d'un\n<code>&lt;button&gt;</code> peut ruiner l'accessibilité de celui-ci.</p>\n</blockquote>\n<p>Je suis absolument d'accord avec ce point. Réimplémenter le comportement d'un\nbouton en partant de zéro est complexe, vous mènera certainement à commettre un\ntas d'erreurs et je vous le déconseille fortement.</p>\n<p>Seulement ici ce n'est pas le cas : j'utilise une abstraction qui a correctement\nété pensée et ne souffre d'aucun réel défaut d'accessibilité si on la compare à\nun <code>&lt;button&gt;</code>. Sachant qu'en plus il y a encore très peu, les <code>&lt;button&gt;</code>\nsouffraient de\n<a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=700029#c24\">problèmes de styling</a>\net que donc, il m'est nécessaire soit d'en tenir compte, soit de ne pas\nsupporter certaines versions de navigateurs pourtant récentes.</p>\n<p>Si j'ai ce composant <code>&lt;Pressable&gt;</code> à ma disposition, qui a le bon goût de ne pas\nsouffrir des problèmes présentés plus haut et réagit tel que la logique le\nvoudrait lors du survol, du focus ou encore de l'appui… Pourquoi devrais-je donc\nm'en passer?</p>\n<h2>Autres manques, en vrac</h2>\n<h3>Le focus-trapping</h3>\n<p>Afin de faciliter l'accessibilité clavier, il est important de &quot;capturer&quot; et de\nborner le focus lors de l'apparition d'une modale, par exemple (ce qu'on appelle\ncommunément le <code>focus-trapping</code>).</p>\n<figure>\n  <img src=\"/public/images/articles/2021-04-12-le-web-merite-de-meilleures-primitives/FocusTrappingFail.png\" />\n  <figcaption>Exemple d'échec de focus trapping: il est possible de sélectionner le champ de recherche à l'aide de son clavier</figcaption>\n</figure>\n<p>Il existe actuellement 2 potentielles solutions à ce problème. L'une, haut\nniveau, est l'élément natif\n<a href=\"https://developer.mozilla.org/fr/docs/Web/HTML/Element/dialog\"><code>&lt;dialog&gt;</code></a>,\nl'autre, plus bas niveau (et plus intéressante selon moi) est l'attribut\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/inert\"><code>inert</code></a>.\nCes solutions ne sont malheureusement pour le moment pas très bien, voire pas du\ntout, supportées par les navigateurs.</p>\n<h3>Les popups</h3>\n<p>Tout comme les modales, elles sont présentes dans une majeure partie des\ninterfaces web actuelles et pourtant il n'existe actuellement aucune méthode\nsimple et sans abstraction qui nous permette d'en créer une.</p>\n<p>Dans un futur proche, peut-être (je l'espère) que\n<a href=\"https://github.com/MicrosoftEdge/MSEdgeExplainers/blob/main/Popup/explainer.md\">la proposition de Microsoft</a>\nsera retenue, mais en attendant, bon courage pour implémenter ça &quot;à la main&quot; si\nvous souhaitez que celles-ci soient fonctionnelles sur tous les navigateurs,\ntout type d'appareil et de surcroît parfaitement accessibles.</p>\n<h3>Plus? Plus!</h3>\n<p>Qu'en est-il de tout ces besoins devenus quasiment primaires:</p>\n<ul>\n<li>Les masques sur les champs texte?</li>\n<li>Un élément <code>&lt;switch&gt;</code>?</li>\n<li>Les listes virtualisées (avec recherche fonctionnelle au sein de la page)?</li>\n<li>Le RTL (right-to-left) simplifié?</li>\n<li>Les containers queries en CSS?</li>\n<li>Le champ texte <code>type=number</code>\n(<a href=\"https://technology.blog.gov.uk/2020/02/24/why-the-gov-uk-design-system-team-changed-the-input-type-for-numbers/\">actuellement cassé</a>)?</li>\n<li>… la liste est potentiellement <strong>infinie</strong></li>\n</ul>\n<h2>Du coup, qu'est ce qu'on fait?</h2>\n<p>Avant tout, arrêtons de blâmer les développeurs qui découvrent aujourd'hui cette\ncomplexité monstre et cessons de leur déconseiller d'utiliser des abstractions,\nde leur dire de &quot;juste apprendre le HTML, CSS et JS&quot; car ce comportement est\ndangereux et ne tient pas compte d'une chose : si vous avez vu vécu l'évolution\ndu web et vu apparaitre des courants tels que le responsive design, de nouveaux\ntypes d'appareils tels que les smartphones et eu le temps de vous adapter à ces\nchangements, ce n'est pas le cas de développeurs plus juniors qui se retrouvent\naujourd'hui face à une quantité astronomique de problématiques, sans courbe\nd'apprentissage naturelle guidée par l'évolution des usages.</p>\n<p>L'accessibilité vous tient à cœur? Parfait. Conseillez-leur d'utiliser une\nabstraction simple qui leur garantira un bon résultat, plutôt que de leur\nconseiller de devenir un expert absolu sur le domaine afin de ne pas se tirer\nune balle dans le pied. S'il sont intéressés par le sujet, ils se pencheront sur\nla façon dont est conçue celle-ci, s'ils ne le sont pas, et bien, au moins les\nutilisateurs de leurs sites bénéficieront d'une meilleure accessibilité. Et je\npense que c'est ce qui importe le plus: <strong>l'objectif est plus important que le\nmoyen</strong>.</p>\n<p>Ensuite, posons-nous réellement la question de la nécessité de ces ajouts\ncontinuels de solutions de haut niveau dans la plateforme web, qui débarquent\nsans que jamais rien ne semble vraiment être officiellement déclaré caduque. En\neffet, toutes les solutions énoncées précédemment viennent ou viendront <strong>en\nplus</strong> de tout ce qui peut déjà exister.</p>\n<p><strong>La plateforme déborde</strong>. J'en prends pour exemple une donnée qui me semble\ntotalement absurde, le nombre de propriétés CSS actuel:\n<a href=\"https://css-tricks.com/how-many-css-properties-are-there/\">520 (+132 en attente)</a>.\nOutre le fait que cela rend extrêmement complexe l'apparition de nouveaux\nnavigateurs web, cela rend la charge mentale du développeur <strong>incommensurable</strong>.\nIl en va de même avec l'évolution de la syntaxe JavaScript, l'augmentation du\nnombre de sélecteurs CSS, l'apparition de\n<a href=\"https://developer.mozilla.org/fr/docs/Web/API\">nouvelles APIs</a>, etc.</p>\n<p>Imaginez si demain un nouveau paradigme d'utilisation venait à apparaitre (une\ninteraction autre que le touch, par exemple) ou si un nouveau type de pattern UI\ngagnait en popularité (comme a pu le faire le switch). Devrait-on continuer à\nempiler…? Ou devrait-on accepter le fait que le web a plus que jamais besoin\nd'abstractions au dessus de concepts bas niveau, que celles-ci soient des\nbibliothèques exécutées au runtime ou carrément des langages de plus haut niveau\nqui compileront vers du HTML, CSS et JS en guise de bytecode?</p>\n<p>L'avenir est incertain, imitez-le.</p>\n"}}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"listsRequests":{"data":{"RE_PRIVATE_NONE":true}},"itemsRequests":{"data":{"RE_PRIVATE_NONE":true}}}</script><head><script defer="defer" src="/public/main.56c69761a03eb0112696.js"></script></head></html>