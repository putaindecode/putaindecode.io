<!DOCTYPE html><html lang="fr"><head><title data-react-helmet="true">Introduction √† Gulp | Putain de code</title><meta data-react-helmet="true" charset="UTF-8"/><meta data-react-helmet="true" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" name="viewport"/><meta data-react-helmet="true" content="summary_large_image" name="twitter:card"/><meta data-react-helmet="true" content="Putain de code !" property="og:site_name"/><meta data-react-helmet="true" content="@putaindecode" name="twitter:site"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" property="og:image"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" name="twitter:image"/><meta data-react-helmet="true" content="1500" property="og:image:width"/><meta data-react-helmet="true" content="777" property="og:image:height"/><meta data-react-helmet="true" content="Introduction √† Gulp | Putain de code" property="og:title"/><meta data-react-helmet="true" content="Introduction √† Gulp | Putain de code" name="twitter:title"/><meta data-react-helmet="true" content="Un article propos√© par MoOx" name="description"/><link data-react-helmet="true" title="RSS Feed" href="/api/articles/feeds/desc/feed.xml" rel="alternate" type="application/rss+xml"/><link data-react-helmet="true" href="/favicon.ico" rel="shortcut icon"/><link data-react-helmet="true" href="https://putaindecode.io/articles/introduction-a-gulp" rel="canonical"/><script>window.PAGES_BOOT_MODE="hydrate";</script></head><div id="root"><style data-emotion="rpcss zx73cm 1lc6tyj 28v1b4">@-webkit-keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}@keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}:root{--page-background-color:#fff;--page-slightly-accented-background-color:#F9F6F6;--page-accented-background-color:#E4EBEE;--page-text-color:#46515B;--link-text-color:#E51D58;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#FAF3E1;--one-percent-contrast-color:rgba(0, 0, 0, 0.1);--half-percent-contrast-color:rgba(0, 0, 0, 0.05);}@media (prefers-color-scheme: dark){:root{--page-background-color:#222;--page-slightly-accented-background-color:#171717;--page-accented-background-color:#111;--page-text-color:#ddd;--link-text-color:#F87098;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#4F3804;--one-percent-contrast-color:rgba(255, 255, 255, 0.1);--half-percent-contrast-color:rgba(255, 255, 255, 0.05);}}body{padding:0;margin:0;background-color:var(--page-background-color);color:var(--page-text-color);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;overflow-x:hidden;}html{font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}a{color:var(--link-text-color);-webkit-text-decoration:underline;text-decoration:underline;}a:hover{-webkit-text-decoration:none;text-decoration:none;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}*,*:before,*:after{box-sizing:border-box;}pre,.hljs{color:#adbac7;background:#22272e;}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067;}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb;}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#6cb6ff;}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#96d0ff;}.hljs-built_in,.hljs-symbol{color:#f69d50;}.hljs-comment,.hljs-code,.hljs-formula{color:#768390;}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#8ddb8c;}.hljs-subst{color:#adbac7;}.hljs-section{color:#316dca;font-weight:bold;}.hljs-bullet{color:#eac55f;}.hljs-emphasis{color:#adbac7;font-style:italic;}.hljs-strong{color:#adbac7;font-weight:bold;}.hljs-addition{color:#b4f1b4;background-color:#1b4721;}.hljs-deletion{color:#ffd8d3;background-color:#78191b;}</style><style data-emotion="rpcss 9vhaby">.rpcss-9vhaby{background-color:var(--gradient-red-bottom);background-image:linear-gradient(to bottom right, var(--gradient-red-top), var(--gradient-red-bottom));}</style><header class="rpcss-9vhaby" style="background-image:linear-gradient(to bottom right, hsl(226, 100%, 35%), hsl(188, 100%, 30%))"><style data-emotion="rpcss 1qqk0tr">.rpcss-1qqk0tr{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}</style><div class="rpcss-1qqk0tr"><style data-emotion="rpcss qx7dny">.rpcss-qx7dny{width:100%;max-width:1024px;margin:0 auto;padding:0 10px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="rpcss-qx7dny"><style data-emotion="rpcss 7s9om2">.rpcss-7s9om2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:20px 0 50px;}</style><div class="rpcss-7s9om2"><style data-emotion="rpcss gdpa5c">.rpcss-gdpa5c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-gdpa5c" href="/"><style data-emotion="rpcss 1lm4738">.rpcss-1lm4738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;padding-bottom:10px;}</style><div class="rpcss-1lm4738"><style data-emotion="rpcss 13o7eu2">.rpcss-13o7eu2{display:block;}</style><svg class="rpcss-13o7eu2" height="36px" width="36px" viewBox="0 0 36 36"><defs><linearGradient id="PutainDeCodeLogoGradient" x1="50%" x2="50%" y1="0%" y2="127.223881%"><stop offset="0%" stop-color="#E41D57"></stop><stop offset="100%" stop-color="#C60000"></stop></linearGradient></defs><circle cx="18" cy="18" fill="url(#PutainDeCodeLogoGradient)" r="17" stroke="#FFFFFF" stroke-width="2"></circle><polygon fill="#FFFFFF" points="15.9033203 18.2246094 15.9033203 18.3710938 11.2304688 20.5317383 11.2304688 22.8095703 18.0566406 19.184082 18.0566406 17.4116211 11.2304688 13.7788086 11.2304688 16.0639648"></polygon><rect height="14" width="2" fill="#FFFFFF" x="22" y="11"><animate attributeName="opacity" begin="100ms" calcMode="discrete" dur="2s" repeatCount="indefinite" values="1;0"></animate></rect></svg><style data-emotion="rpcss 4cf197">.rpcss-4cf197{width:10px;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-4cf197"></div><style data-emotion="rpcss u5k24">.rpcss-u5k24{font-size:22px;color:#fff;font-weight:800;}</style><div aria-level="2" class="rpcss-u5k24" role="heading">Putain de code !</div></div><style data-emotion="rpcss 1nyebg4">.rpcss-1nyebg4{font-size:14px;color:rgba(255, 255, 255, 0.8);text-align:center;}</style><div class="rpcss-1nyebg4">Blog participatif de la communaut√© dev</div></a></div></div></div></header><style data-emotion="rpcss a4ric9">.rpcss-a4ric9{background-color:var(--page-slightly-accented-background-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="rpcss-a4ric9"><style data-emotion="rpcss oeugsb">.rpcss-oeugsb{-webkit-animation:500ms ease-out animation-zx73cm;animation:500ms ease-out animation-zx73cm;}</style><div class="rpcss-oeugsb"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1qc2bam">.rpcss-1qc2bam{font-size:42px;font-weight:800;text-align:center;padding-top:40px;line-height:1.2;margin:0;}</style><h1 class="rpcss-1qc2bam">Introduction √† Gulp</h1><style data-emotion="rpcss obg2kr">.rpcss-obg2kr{font-size:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:40px;color:var(--page-text-color);-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-obg2kr" href="https://github.com/MoOx"><style data-emotion="rpcss uco8i7">.rpcss-uco8i7{width:32px;height:32px;border-radius:100%;margin-right:10px;}</style><img class="rpcss-uco8i7" alt="MoOx" src="https://avatars.githubusercontent.com/MoOx?size=64"/><div>MoOx<!-- --> <!-- -->‚Ä¢<!-- --> <!-- -->2014/04/29</div></a><style data-emotion="rpcss 15kxmi0">.rpcss-15kxmi0{max-width:640px;width:100%;font-size:18px;margin:0 auto;line-height:1.7;}.rpcss-15kxmi0 h2,.rpcss-15kxmi0 h3,.rpcss-15kxmi0 h4,.rpcss-15kxmi0 h5,.rpcss-15kxmi0 h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-weight:800;line-height:1.2;}.rpcss-15kxmi0 img{max-width:100%;background-color:rgba(255, 255, 255, 0.75);}.rpcss-15kxmi0 code{font-size:0.9em;font-family:PragmataPro,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:1;background-color:var(--code-background-color);margin:0 0.2em;}.rpcss-15kxmi0 pre{padding:10px;overflow-x:auto;font-size:14px;border-radius:10px;border:2px solid var(--one-percent-contrast-color);-webkit-overflow-scrolling:touch;}.rpcss-15kxmi0 pre code{font-size:14px;background-color:transparent;margin:0;}.rpcss-15kxmi0 blockquote{padding-left:20px;margin:0;font-size:16px;border-left:3px solid var(--one-percent-contrast-color);font-style:italic;}.rpcss-15kxmi0 table{width:100%;text-align:center;}.rpcss-15kxmi0 figure{padding:20px 0;}.rpcss-15kxmi0 figcaption{text-align:center;}.rpcss-15kxmi0 a{word-wrap:break-word;}.rpcss-15kxmi0 table thead th{background-color:var(--page-accented-background-color);padding:10px 0;}</style><div class="rpcss-15kxmi0"><p>Vous commencez tous √† connaitre les <em>tasks runners</em>, ces outils qui permettent
d'automatiser les t√¢ches de d√©veloppement r√©currentes. Personnellement
<a href="http://moox.io/slides/2013/grunt-before-after/">je n'ai</a>
<a href="http://www.24joursdeweb.fr/2013/automatisez-votre-workflow-front-end/">pas arr√™t√©</a>
<a href="http://moox.io/slides/2014/introduction-gulp/">d'en parler</a> depuis que
<a href="/fr/articles/js/grunt/">Grunt</a> √† d√©terr√© cette vielle probl√©matique, assez
r√©cente pour le d√©veloppement Web c√¥t√© front end.</p>
<p>Il faut avouer que de par l'√©volution du d√©veloppement Web, c√¥t√© front end, on
voit beaucoup de personnes qui n'ont pas de vraies bases de d√©veloppeur. Je veux
dire par l√† non pas que ces personnes sont incomp√©tentes, mais plut√¥t qu'il
manque parfois la bonne flemme du d√©veloppeur, celle qui le pousse √†
<strong>d√©velopper</strong> des solutions techniques pour mieux d√©velopper des produits. Il
manque un peu <a href="http://fr.wiktionary.org/wiki/algorithmie">d'algorithmie</a> dans
les veines, de curiosit√© et d'amour du risque. Ce n'est pas en restant dans sa
zone de confort qu'on va de l'avant. Enfin si vous avez des exemples contraires,
je suis preneur. Mais tout cela doit provenir du fait que pas mal de m√©tiers
dans le web sont nouveaux, dont celui de ¬´ d√©veloppeur Web front end ¬ª et que du
coup, peu de personnes ont initialement suivi des formations appropri√©s (pour ma
part je proviens d'une formation <em>d'analyste-programmeur</em>, conception et
d√©veloppement software quoi). Je remarque que niveau back end il y a beaucoup
moins de lacunes, du fait que les probl√©matiques g√©r√©es de ce c√¥t√© sont (il me
semble) moins nouvelles.</p>
<p>Bref. Je ne vais pas m'√©terniser sur une intro du pourquoi on met en place un
task runner, ni faire une comparaison entre Make, Rake, Cake, Jake, Grunt,
Brunch et Broccoli. Rentrons dans le vif. Parlons Gulp.</p>
<h1>Pourquoi Gulp</h1>
<p>Je vais faire court. Pour faire simple, son point fort r√©side dans le fait qu'il
utilise des <a href="http://dailyjs.com/2012/09/10/streams/">streams</a> (tl;dr: un flux de
donn√©es - en m√©moire) et qu'il limite au maximum l'utilisation de fichiers. Au
point qu'il existe une
<a href="https://github.com/godaddy/gulp-header/issues/4#issuecomment-32111457">police Gulp</a>
pour vous dire. Si vous voulez en savoir plus sur les streams, n'h√©sitez pas √†
lire l'article de Nicolas Froidure
<a href="http://insertafter.com/fr/blog/gulp_vs_grunt.html">Gulp remplacera-t-il Grunt ?</a>
qui contient une partie explicative sur les streams.</p>
<p>Dans la pratique cela √©vite d'avoir un gruntfile qui, si on imagine une task
sass -&gt; autoprefixer -&gt; csso, passe
<a href="/fr/articles/css/autoprefixer/mise-en-place/#autoprefixer-avec-grunt">3 fois par des lectures/√©critures sur le syst√®me de fichiers</a>.</p>
<figure>
  <img src="https://jaysoo.ca/images/grunt-flow-2.png" alt="" />
  <figcaption>Sans stream</figcaption>
</figure>
<p>Et du coup au lieu d'avoir un fichier de conf d'une soixantaine de lignes, on
arrive √† avoir
<a href="/fr/articles/css/autoprefixer/mise-en-place/#autoprefixer-avec-gulp">quelque chose de concis</a>
(une vingtaine de ligne seulement).</p>
<figure>
  <img src="https://jaysoo.ca/images/gulp-flow.png" alt="" />
  <figcaption>Avec stream</figcaption>
</figure>
<h2>Installation</h2>
<p>Pour avoir la commande globale sur le syst√®me (comme grunt-cli) :</p>
<pre><code class="hljs language-console"><span class="hljs-meta">$</span><span class="bash"> npm i -g gulp</span>
</code></pre>
<p>Ensuite dans votre projet :</p>
<pre><code class="hljs language-console"><span class="hljs-meta">$</span><span class="bash"> npm i -D gulp gulp-util gulp-plumber gulp-WHATEVER</span>
</code></pre>
<p><em>Note : <code>npm i -D</code> == <code>npm install --save-dev</code>, c'est cadeau.</em></p>
<p>Bon dans mon exemple j'ai mis un peu n'importe quoi, donc on va faire un mini
workflow de hipster hacker.</p>
<h2>Utilisation</h2>
<p>On part avec une t√¢che tr√®s simple : transpiler <a href="http://cssnext.io">cssnext</a>.</p>
<pre><code class="hljs language-console"><span class="hljs-meta">$</span><span class="bash"> mkdir putaindegulp &amp;&amp; <span class="hljs-built_in">cd</span> putaindegulp</span>
<span class="hljs-meta">$</span><span class="bash"> npm init</span>
<span class="hljs-meta">$</span><span class="bash"> npm i -D gulp gulp-util gulp-plumber gulp-cssnext gulp-csso minimist</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;gulp&quot;</span>);
<span class="hljs-keyword">var</span> gutil = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;gulp-util&quot;</span>);
<span class="hljs-keyword">var</span> plumber = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;gulp-plumber&quot;</span>);
<span class="hljs-keyword">var</span> cssnext = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;gulp-cssnext&quot;</span>);
<span class="hljs-keyword">var</span> csso = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;gulp-csso&quot;</span>);
<span class="hljs-keyword">var</span> options = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;minimist&quot;</span>)(process.argv.slice(<span class="hljs-number">2</span>));

gulp.task(<span class="hljs-string">&quot;styles&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  gulp
    .src(<span class="hljs-string">&quot;./src/css/*.css&quot;</span>)
    .pipe(!options.production ? plumber() : gutil.noop())
    .pipe(cssnext({ <span class="hljs-attr">sourcemap</span>: !options.production }))
    .pipe(options.production ? csso() : gutil.noop())
    .pipe(gulp.dest(<span class="hljs-string">&quot;./dist/css/&quot;</span>));
});

gulp.task(<span class="hljs-string">&quot;default&quot;</span>, [<span class="hljs-string">&quot;styles&quot;</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  gulp.watch(<span class="hljs-string">&quot;./src/css/**/*&quot;</span>, [<span class="hljs-string">&quot;styles&quot;</span>]);
});
</code></pre>
<p>Voil√† c'est tout. Et heureusement.</p>
<p>Bon, on se refait l'exemple comment√© :</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// bah l√† ok, on est oblig√© d&#x27;y passer pour avoir l&#x27;API Gulp</span>
<span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;gulp&quot;</span>);

<span class="hljs-comment">// √áa c&#x27;est optionnel, c&#x27;est pour avoir (entre autres la m√©thode noop())</span>
<span class="hljs-comment">// je reviens dessus apr√®s</span>
<span class="hljs-comment">// https://github.com/gulpjs/gulp-util</span>
<span class="hljs-keyword">var</span> gutil = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;gulp-util&quot;</span>);

<span class="hljs-comment">// L√† on a Mario le plombier qui fixe la tuyauterie foireuse.</span>
<span class="hljs-comment">// Ce plugin patch le probl√®me de stream avec node.js qui fait que tout le process</span>
<span class="hljs-comment">// explose √† la moindre erreur (pas pratique en cas de watch par exemple)</span>
<span class="hljs-comment">// en gros, il remplace la m√©thode pipe et attrape les erreurs pour les ressortir gentiment</span>
<span class="hljs-comment">// https://gist.github.com/floatdrop/8269868</span>
<span class="hljs-keyword">var</span> plumber = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;gulp-plumber&quot;</span>);

<span class="hljs-comment">// Ici, rien de magique, du plugin en veux-tu en voil√†</span>
<span class="hljs-keyword">var</span> cssnext = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;gulp-cssnext&quot;</span>);
<span class="hljs-keyword">var</span> csso = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;gulp-csso&quot;</span>);

<span class="hljs-comment">// ici on chope les options de la ligne de commande</span>
<span class="hljs-comment">// exemple: pour avoir options.production √† true,</span>
<span class="hljs-comment">// il suffit de faire `gulp --production`</span>
<span class="hljs-keyword">var</span> options = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;minimist&quot;</span>)(process.argv.slice(<span class="hljs-number">2</span>));

<span class="hljs-comment">// D√©finition d&#x27;une t√¢che, un nom et une fonction.</span>
<span class="hljs-comment">// Ce qui est pratique c&#x27;est le fait de pouvoir mettre ce qu&#x27;on veut</span>
<span class="hljs-comment">// y compris un console.log() ^^</span>
<span class="hljs-comment">// un autre param√®tre peut √™tre ajout√© avant la fonction, qui permet de pr√©ciser</span>
<span class="hljs-comment">// les d√©pendances (cf task dev plus bas par exemple)</span>
gulp.task(<span class="hljs-string">&quot;styles&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// Ici on attrape les fichiers (glob classique)</span>
  <span class="hljs-comment">// √† la racine (on va consid√©rer que nos fichiers finaux ne seront pas dans</span>
  <span class="hljs-comment">// des sous dossiers, r√©serv√©s aux partials &amp; co)</span>
  gulp
    .src(<span class="hljs-string">&quot;./src/css/*.css&quot;</span>)

    <span class="hljs-comment">// On utilise plumber que si on build en dev, sinon faut que √ßa p√™te, qu&#x27;on</span>
    <span class="hljs-comment">// soit pr√©venu lors d&#x27;un build pour la prod</span>
    .pipe(!options.production ? plumber() : gutil.noop())

    <span class="hljs-comment">// Et l√† on pipe nos plugins</span>
    <span class="hljs-comment">// toujours en jouant avec les options si besoin</span>
    .pipe(
      cssnext({
        <span class="hljs-attr">compress</span>: options.production,
        <span class="hljs-attr">sourcemap</span>: !options.production,
      }),
    )

    <span class="hljs-comment">// Super important, on convertit nos streams en fichiers</span>
    .pipe(gulp.dest(<span class="hljs-string">&quot;./dist/css/&quot;</span>));
});

<span class="hljs-comment">// Ici on a une t√¢che de dev qui lance un watch APRES avoir ex√©cut√© `styles` une fois</span>
gulp.task(<span class="hljs-string">&quot;default&quot;</span>, [<span class="hljs-string">&quot;styles&quot;</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// gulp.watch est natif (pas comme avec grunt)</span>
  <span class="hljs-comment">// vous noterez qu&#x27;ici par exemple on va surveiller tous les fichiers</span>
  <span class="hljs-comment">// et non pas ceux juste √† la racine par exemple</span>
  gulp.watch(<span class="hljs-string">&quot;./src/css/**/*&quot;</span>, [<span class="hljs-string">&quot;styles&quot;</span>]);
});

<span class="hljs-comment">// Comme grunt, `gulp` sans argument lancera la t√¢che `default`.</span>
</code></pre>
<p>Bien entendu, vous avez d√©j√† compris que si vous voulez remplacer cssnext par
Sass, c'est l'histoire de 4 secondes.</p>
<p>Chez <em>Putain de code !</em> on a aim√© Gulp. Il faut bien avouer que
<a href="https://twitter.com/putaindecode/status/460868992396460032">√ßa va vite</a> (encore
plus appr√©ciable lorsque l'on n'a pas de SSD) et que c'est plaisant √† √©crire
compar√© √† Grunt. Pas de configurations pas sp√©cialement verbeuse et trop
espac√©e. Avec Gulp on se sent plus libre, moins contraint. Du coup, on avait
carr√©ment refait notre site avec Gulp (puis au passage un petit refresh
graphique tant qu'√† faire).</p>
<p><strong>Mise √† jour: depuis nous avons encore simplifi√© notre process et nous nous
sommes pass√© de Gulp.</strong></p>
<p>Pour aller plus loin, vous n'avez qu'√† ouvrir notre ancien
<a href="https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/gulpfile.js">Gulpfile</a>
et regarder nos
<a href="https://github.com/putaindecode/putaindecode.io/tree/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks">tasks</a>
de l'√©poque qui vont de
<a href="https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/clean.js">la plus simple</a>
√†
<a href="https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/contributors.js">la plus compliqu√©</a>.</p>
<p>Pour voir des t√¢ches plus ¬´ real world example ¬ª je vous invite √† regarder les
tasks suivantes :</p>
<ul>
<li><a href="https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/server.js">server</a>,
le server de dev local avec livereload dedans ;</li>
<li><a href="https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/watch.js">watch</a>,
le classique et si simple watcher ;</li>
<li><a href="https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/deploy.js">deploy</a>,
la t√¢che pour publier le dossier <code>dist/</code> sur les
<a href="https://pages.github.com/">gh-pages</a> ;</li>
<li><a href="https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/icons.js">icons</a>,
qui transforme des SVG en fontes d'icones avec le bout de CSS qui va bien ;</li>
<li><a href="https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/scripts-linting.js">scripts-linting</a>,
qui v√©rifie la qualit√© du code ;</li>
<li><a href="https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/scripts.js">scripts</a>,
du <a href="/fr/articles/js/browserify/">browserify</a> pour nos JS c√¥t√© client ;</li>
<li><a href="https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/stylesheets.js">stylesheets</a>,
notre t√¢che pour coder des css du futur ;</li>
</ul>
<h2>Vous reprendrez bien un peu de‚Ä¶ Gulp* ! Pardon.</h2>
<p>Si vous avez encore envie de d√©tails je vous renvoie sur l'article anglais
<a href="http://markgoodyear.com/2014/01/getting-started-with-gulp/">Getting started with gulp</a>
qui d√©taille tellement bien chaque point que m√™me un anglophobe comprendrait.</p>
<p>Vous avez aussi
<a href="https://github.com/gulpjs/gulp/blob/master/docs/README.md">une documentation</a>
tr√®s bien faite, qui comporte carr√©ment
<a href="https://github.com/gulpjs/gulp/tree/master/docs/recipes">des exemples <em>officiels</em> tout pr√™ts</a>.</p>
<p>Comme je vous disais plus t√¥t, les auteurs de Gulp sont assez carr√©s et valident
(ou plut√¥t <em>invalident</em>)
<a href="https://www.npmjs.org/search?q=gulpplugin">les plugins</a> qui ne respectent pas
les
<a href="https://github.com/gulpjs/gulp/blob/master/docs/writing-a-plugin/guidelines.md">r√®gles</a>.
Je trouve que c'est gage de qualit√©.</p>
<p>Pour finir quelques liens pour ceux qui en veulent toujours plus :</p>
<ul>
<li><a href="http://insertafter.com/fr/blog/retour_experience_gulp.html">Gulp : Retour d'exp√©rience</a></li>
<li><a href="https://jaysoo.ca/2014/01/27/gruntjs-vs-gulpjs/">Grunt vs. Gulp, au-del√† des chiffres</a>
(anglais)</li>
</ul>
<pre><code class="hljs language-console"><span class="hljs-meta">$</span><span class="bash"> gulp bisous</span>
‚ùØ ‚ô° üòò
</code></pre>
</div><style data-emotion="rpcss unyj6i">.rpcss-unyj6i{max-width:640px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:20px auto;padding:20px;background-color:var(--page-background-color);border-radius:10px;box-shadow:0 15px 15px -5px rgba(0, 0, 0, 0.2);}@media (max-width: 540px){.rpcss-unyj6i{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-unyj6i"><style data-emotion="rpcss ty7r4z">.rpcss-ty7r4z{font-weight:800;}</style><div class="rpcss-ty7r4z">Vous avez aim√© cet article?</div><style data-emotion="rpcss klacsp">.rpcss-klacsp{width:0;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-klacsp"></div><style data-emotion="rpcss 1pkr03v">.rpcss-1pkr03v{background-color:#00aced;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:800;}.rpcss-1pkr03v:active{opacity:0.5;}</style><a class="rpcss-1pkr03v" href="https://www.twitter.com/intent/tweet?text=Introduction%20%C3%A0%20Gulp%20sur%20%40PutainDeCode%20https%3A%2F%2Fputaindecode.io%2Farticles%2Fintroduction-a-gulp" target="_blank">Le partager sur Twitter</a></div><style data-emotion="rpcss x4iqxe">.rpcss-x4iqxe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;padding:20px;}</style><div class="rpcss-x4iqxe"><style data-emotion="rpcss gein6x">.rpcss-gein6x{font-size:20px;-webkit-text-decoration:none;text-decoration:none;color:#1E49B5;}</style><a class="rpcss-gein6x" href="/articles">‚Üê Articles</a></div><style data-emotion="rpcss 8bodgl">.rpcss-8bodgl{max-width:640px;width:100%;margin:0 auto;padding:20px 0;}</style><div class="rpcss-8bodgl" id="disqus_thread"></div></div></div></div></div><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1vau6rl">.rpcss-1vau6rl{margin:20px 0;background-color:var(--page-accented-background-color);border-radius:10px;padding:20px;}</style><div class="rpcss-1vau6rl"><style data-emotion="rpcss 1gz1i1h">.rpcss-1gz1i1h{font-size:32px;font-weight:800;margin-bottom:20px;text-align:center;}</style><div aria-level="2" class="rpcss-1gz1i1h" role="heading">Ne rien rater</div><style data-emotion="rpcss 1wbispj">.rpcss-1wbispj{font-size:18px;margin-bottom:10px;text-align:center;}</style><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur les r√©seaux</div><style data-emotion="rpcss 1hyoz7m">.rpcss-1hyoz7m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="rpcss-1hyoz7m"><a href="https://twitter.com/PutainDeCode"><img alt="Twitter" height="48" src="/public/images/website/twitter.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://facebook.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/facebook.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://github.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/github.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://itunes.apple.com/fr/podcast/putain-de-code-!/id1185311825"><img alt="Apple Podcast" height="48" src="/public/images/website/apple-podcast.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://soundcloud.com/putaindecode"><img alt="Soundcloud" height="48" src="/public/images/website/soundcloud.svg" width="48"/></a></div><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur le chat</div><div class="rpcss-1hyoz7m"><a href="https://discord.gg/jtbGNNc"><img alt="Discord" height="48" src="/public/images/website/discord.svg" width="48"/></a></div></div></div></div><style data-emotion="rpcss zs8kw7">.rpcss-zs8kw7{background-color:#222;padding:20px 0;}</style><footer class="rpcss-zs8kw7"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 79elbk">.rpcss-79elbk{position:relative;}</style><div class="rpcss-79elbk"><style data-emotion="rpcss 1hle0ni">.rpcss-1hle0ni{position:absolute;left:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1hle0ni" href="/api/articles/feeds/desc/feed.xml"><style data-emotion="rpcss lvyu5j">.rpcss-lvyu5j{margin-right:10px;}</style><img class="rpcss-lvyu5j" alt="Flux RSS" height="16" src="/public/images/website/rss-feed.svg" width="16"/><style data-emotion="rpcss um3i31">@media (max-width: 400px){.rpcss-um3i31{display:none;}}</style><div class="rpcss-um3i31">Flux RSS</div></a><style data-emotion="rpcss 12cp4l7">.rpcss-12cp4l7{color:rgba(255, 255, 255, 0.5);text-align:center;font-size:14px;}</style><div class="rpcss-12cp4l7">¬© 2021 Putain de code !</div><style data-emotion="rpcss 1w98uy3">.rpcss-1w98uy3{position:absolute;right:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1w98uy3" href="https://github.com/putaindecode/putaindecode.io">GitHub</a></div></div></div></footer></div><script id="initialData" type="text/data">{"lists":{"RE_PRIVATE_NONE":true},"items":{"k":"articles","v":{"k":"introduction-a-gulp","v":{"_0":{"TAG":0,"_0":{"slug":"introduction-a-gulp","filename":"2014-04-29-introduction-a-gulp","title":"Introduction √† Gulp","date":"Tue, 29 Apr 2014 00:00:00 GMT","draft":false,"meta":{"date":"2014-04-29T00:00:00.000Z","title":"Introduction √† Gulp","author":"MoOx","oldSlug":"js/gulp","slug":"introduction-a-gulp"},"body":"<p>Vous commencez tous √† connaitre les <em>tasks runners</em>, ces outils qui permettent\nd'automatiser les t√¢ches de d√©veloppement r√©currentes. Personnellement\n<a href=\"http://moox.io/slides/2013/grunt-before-after/\">je n'ai</a>\n<a href=\"http://www.24joursdeweb.fr/2013/automatisez-votre-workflow-front-end/\">pas arr√™t√©</a>\n<a href=\"http://moox.io/slides/2014/introduction-gulp/\">d'en parler</a> depuis que\n<a href=\"/fr/articles/js/grunt/\">Grunt</a> √† d√©terr√© cette vielle probl√©matique, assez\nr√©cente pour le d√©veloppement Web c√¥t√© front end.</p>\n<p>Il faut avouer que de par l'√©volution du d√©veloppement Web, c√¥t√© front end, on\nvoit beaucoup de personnes qui n'ont pas de vraies bases de d√©veloppeur. Je veux\ndire par l√† non pas que ces personnes sont incomp√©tentes, mais plut√¥t qu'il\nmanque parfois la bonne flemme du d√©veloppeur, celle qui le pousse √†\n<strong>d√©velopper</strong> des solutions techniques pour mieux d√©velopper des produits. Il\nmanque un peu <a href=\"http://fr.wiktionary.org/wiki/algorithmie\">d'algorithmie</a> dans\nles veines, de curiosit√© et d'amour du risque. Ce n'est pas en restant dans sa\nzone de confort qu'on va de l'avant. Enfin si vous avez des exemples contraires,\nje suis preneur. Mais tout cela doit provenir du fait que pas mal de m√©tiers\ndans le web sont nouveaux, dont celui de ¬´ d√©veloppeur Web front end ¬ª et que du\ncoup, peu de personnes ont initialement suivi des formations appropri√©s (pour ma\npart je proviens d'une formation <em>d'analyste-programmeur</em>, conception et\nd√©veloppement software quoi). Je remarque que niveau back end il y a beaucoup\nmoins de lacunes, du fait que les probl√©matiques g√©r√©es de ce c√¥t√© sont (il me\nsemble) moins nouvelles.</p>\n<p>Bref. Je ne vais pas m'√©terniser sur une intro du pourquoi on met en place un\ntask runner, ni faire une comparaison entre Make, Rake, Cake, Jake, Grunt,\nBrunch et Broccoli. Rentrons dans le vif. Parlons Gulp.</p>\n<h1>Pourquoi Gulp</h1>\n<p>Je vais faire court. Pour faire simple, son point fort r√©side dans le fait qu'il\nutilise des <a href=\"http://dailyjs.com/2012/09/10/streams/\">streams</a> (tl;dr: un flux de\ndonn√©es - en m√©moire) et qu'il limite au maximum l'utilisation de fichiers. Au\npoint qu'il existe une\n<a href=\"https://github.com/godaddy/gulp-header/issues/4#issuecomment-32111457\">police Gulp</a>\npour vous dire. Si vous voulez en savoir plus sur les streams, n'h√©sitez pas √†\nlire l'article de Nicolas Froidure\n<a href=\"http://insertafter.com/fr/blog/gulp_vs_grunt.html\">Gulp remplacera-t-il Grunt ?</a>\nqui contient une partie explicative sur les streams.</p>\n<p>Dans la pratique cela √©vite d'avoir un gruntfile qui, si on imagine une task\nsass -&gt; autoprefixer -&gt; csso, passe\n<a href=\"/fr/articles/css/autoprefixer/mise-en-place/#autoprefixer-avec-grunt\">3 fois par des lectures/√©critures sur le syst√®me de fichiers</a>.</p>\n<figure>\n  <img src=\"https://jaysoo.ca/images/grunt-flow-2.png\" alt=\"\" />\n  <figcaption>Sans stream</figcaption>\n</figure>\n<p>Et du coup au lieu d'avoir un fichier de conf d'une soixantaine de lignes, on\narrive √† avoir\n<a href=\"/fr/articles/css/autoprefixer/mise-en-place/#autoprefixer-avec-gulp\">quelque chose de concis</a>\n(une vingtaine de ligne seulement).</p>\n<figure>\n  <img src=\"https://jaysoo.ca/images/gulp-flow.png\" alt=\"\" />\n  <figcaption>Avec stream</figcaption>\n</figure>\n<h2>Installation</h2>\n<p>Pour avoir la commande globale sur le syst√®me (comme grunt-cli) :</p>\n<pre><code class=\"hljs language-console\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> npm i -g gulp</span>\n</code></pre>\n<p>Ensuite dans votre projet :</p>\n<pre><code class=\"hljs language-console\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> npm i -D gulp gulp-util gulp-plumber gulp-WHATEVER</span>\n</code></pre>\n<p><em>Note : <code>npm i -D</code> == <code>npm install --save-dev</code>, c'est cadeau.</em></p>\n<p>Bon dans mon exemple j'ai mis un peu n'importe quoi, donc on va faire un mini\nworkflow de hipster hacker.</p>\n<h2>Utilisation</h2>\n<p>On part avec une t√¢che tr√®s simple : transpiler <a href=\"http://cssnext.io\">cssnext</a>.</p>\n<pre><code class=\"hljs language-console\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> mkdir putaindegulp &amp;&amp; <span class=\"hljs-built_in\">cd</span> putaindegulp</span>\n<span class=\"hljs-meta\">$</span><span class=\"bash\"> npm init</span>\n<span class=\"hljs-meta\">$</span><span class=\"bash\"> npm i -D gulp gulp-util gulp-plumber gulp-cssnext gulp-csso minimist</span>\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">var</span> gulp = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;gulp&quot;</span>);\n<span class=\"hljs-keyword\">var</span> gutil = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;gulp-util&quot;</span>);\n<span class=\"hljs-keyword\">var</span> plumber = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;gulp-plumber&quot;</span>);\n<span class=\"hljs-keyword\">var</span> cssnext = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;gulp-cssnext&quot;</span>);\n<span class=\"hljs-keyword\">var</span> csso = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;gulp-csso&quot;</span>);\n<span class=\"hljs-keyword\">var</span> options = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;minimist&quot;</span>)(process.argv.slice(<span class=\"hljs-number\">2</span>));\n\ngulp.task(<span class=\"hljs-string\">&quot;styles&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  gulp\n    .src(<span class=\"hljs-string\">&quot;./src/css/*.css&quot;</span>)\n    .pipe(!options.production ? plumber() : gutil.noop())\n    .pipe(cssnext({ <span class=\"hljs-attr\">sourcemap</span>: !options.production }))\n    .pipe(options.production ? csso() : gutil.noop())\n    .pipe(gulp.dest(<span class=\"hljs-string\">&quot;./dist/css/&quot;</span>));\n});\n\ngulp.task(<span class=\"hljs-string\">&quot;default&quot;</span>, [<span class=\"hljs-string\">&quot;styles&quot;</span>], <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  gulp.watch(<span class=\"hljs-string\">&quot;./src/css/**/*&quot;</span>, [<span class=\"hljs-string\">&quot;styles&quot;</span>]);\n});\n</code></pre>\n<p>Voil√† c'est tout. Et heureusement.</p>\n<p>Bon, on se refait l'exemple comment√© :</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// bah l√† ok, on est oblig√© d&#x27;y passer pour avoir l&#x27;API Gulp</span>\n<span class=\"hljs-keyword\">var</span> gulp = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;gulp&quot;</span>);\n\n<span class=\"hljs-comment\">// √áa c&#x27;est optionnel, c&#x27;est pour avoir (entre autres la m√©thode noop())</span>\n<span class=\"hljs-comment\">// je reviens dessus apr√®s</span>\n<span class=\"hljs-comment\">// https://github.com/gulpjs/gulp-util</span>\n<span class=\"hljs-keyword\">var</span> gutil = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;gulp-util&quot;</span>);\n\n<span class=\"hljs-comment\">// L√† on a Mario le plombier qui fixe la tuyauterie foireuse.</span>\n<span class=\"hljs-comment\">// Ce plugin patch le probl√®me de stream avec node.js qui fait que tout le process</span>\n<span class=\"hljs-comment\">// explose √† la moindre erreur (pas pratique en cas de watch par exemple)</span>\n<span class=\"hljs-comment\">// en gros, il remplace la m√©thode pipe et attrape les erreurs pour les ressortir gentiment</span>\n<span class=\"hljs-comment\">// https://gist.github.com/floatdrop/8269868</span>\n<span class=\"hljs-keyword\">var</span> plumber = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;gulp-plumber&quot;</span>);\n\n<span class=\"hljs-comment\">// Ici, rien de magique, du plugin en veux-tu en voil√†</span>\n<span class=\"hljs-keyword\">var</span> cssnext = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;gulp-cssnext&quot;</span>);\n<span class=\"hljs-keyword\">var</span> csso = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;gulp-csso&quot;</span>);\n\n<span class=\"hljs-comment\">// ici on chope les options de la ligne de commande</span>\n<span class=\"hljs-comment\">// exemple: pour avoir options.production √† true,</span>\n<span class=\"hljs-comment\">// il suffit de faire `gulp --production`</span>\n<span class=\"hljs-keyword\">var</span> options = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;minimist&quot;</span>)(process.argv.slice(<span class=\"hljs-number\">2</span>));\n\n<span class=\"hljs-comment\">// D√©finition d&#x27;une t√¢che, un nom et une fonction.</span>\n<span class=\"hljs-comment\">// Ce qui est pratique c&#x27;est le fait de pouvoir mettre ce qu&#x27;on veut</span>\n<span class=\"hljs-comment\">// y compris un console.log() ^^</span>\n<span class=\"hljs-comment\">// un autre param√®tre peut √™tre ajout√© avant la fonction, qui permet de pr√©ciser</span>\n<span class=\"hljs-comment\">// les d√©pendances (cf task dev plus bas par exemple)</span>\ngulp.task(<span class=\"hljs-string\">&quot;styles&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-comment\">// Ici on attrape les fichiers (glob classique)</span>\n  <span class=\"hljs-comment\">// √† la racine (on va consid√©rer que nos fichiers finaux ne seront pas dans</span>\n  <span class=\"hljs-comment\">// des sous dossiers, r√©serv√©s aux partials &amp; co)</span>\n  gulp\n    .src(<span class=\"hljs-string\">&quot;./src/css/*.css&quot;</span>)\n\n    <span class=\"hljs-comment\">// On utilise plumber que si on build en dev, sinon faut que √ßa p√™te, qu&#x27;on</span>\n    <span class=\"hljs-comment\">// soit pr√©venu lors d&#x27;un build pour la prod</span>\n    .pipe(!options.production ? plumber() : gutil.noop())\n\n    <span class=\"hljs-comment\">// Et l√† on pipe nos plugins</span>\n    <span class=\"hljs-comment\">// toujours en jouant avec les options si besoin</span>\n    .pipe(\n      cssnext({\n        <span class=\"hljs-attr\">compress</span>: options.production,\n        <span class=\"hljs-attr\">sourcemap</span>: !options.production,\n      }),\n    )\n\n    <span class=\"hljs-comment\">// Super important, on convertit nos streams en fichiers</span>\n    .pipe(gulp.dest(<span class=\"hljs-string\">&quot;./dist/css/&quot;</span>));\n});\n\n<span class=\"hljs-comment\">// Ici on a une t√¢che de dev qui lance un watch APRES avoir ex√©cut√© `styles` une fois</span>\ngulp.task(<span class=\"hljs-string\">&quot;default&quot;</span>, [<span class=\"hljs-string\">&quot;styles&quot;</span>], <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-comment\">// gulp.watch est natif (pas comme avec grunt)</span>\n  <span class=\"hljs-comment\">// vous noterez qu&#x27;ici par exemple on va surveiller tous les fichiers</span>\n  <span class=\"hljs-comment\">// et non pas ceux juste √† la racine par exemple</span>\n  gulp.watch(<span class=\"hljs-string\">&quot;./src/css/**/*&quot;</span>, [<span class=\"hljs-string\">&quot;styles&quot;</span>]);\n});\n\n<span class=\"hljs-comment\">// Comme grunt, `gulp` sans argument lancera la t√¢che `default`.</span>\n</code></pre>\n<p>Bien entendu, vous avez d√©j√† compris que si vous voulez remplacer cssnext par\nSass, c'est l'histoire de 4 secondes.</p>\n<p>Chez <em>Putain de code !</em> on a aim√© Gulp. Il faut bien avouer que\n<a href=\"https://twitter.com/putaindecode/status/460868992396460032\">√ßa va vite</a> (encore\nplus appr√©ciable lorsque l'on n'a pas de SSD) et que c'est plaisant √† √©crire\ncompar√© √† Grunt. Pas de configurations pas sp√©cialement verbeuse et trop\nespac√©e. Avec Gulp on se sent plus libre, moins contraint. Du coup, on avait\ncarr√©ment refait notre site avec Gulp (puis au passage un petit refresh\ngraphique tant qu'√† faire).</p>\n<p><strong>Mise √† jour: depuis nous avons encore simplifi√© notre process et nous nous\nsommes pass√© de Gulp.</strong></p>\n<p>Pour aller plus loin, vous n'avez qu'√† ouvrir notre ancien\n<a href=\"https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/gulpfile.js\">Gulpfile</a>\net regarder nos\n<a href=\"https://github.com/putaindecode/putaindecode.io/tree/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks\">tasks</a>\nde l'√©poque qui vont de\n<a href=\"https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/clean.js\">la plus simple</a>\n√†\n<a href=\"https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/contributors.js\">la plus compliqu√©</a>.</p>\n<p>Pour voir des t√¢ches plus ¬´ real world example ¬ª je vous invite √† regarder les\ntasks suivantes :</p>\n<ul>\n<li><a href=\"https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/server.js\">server</a>,\nle server de dev local avec livereload dedans ;</li>\n<li><a href=\"https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/watch.js\">watch</a>,\nle classique et si simple watcher ;</li>\n<li><a href=\"https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/deploy.js\">deploy</a>,\nla t√¢che pour publier le dossier <code>dist/</code> sur les\n<a href=\"https://pages.github.com/\">gh-pages</a> ;</li>\n<li><a href=\"https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/icons.js\">icons</a>,\nqui transforme des SVG en fontes d'icones avec le bout de CSS qui va bien ;</li>\n<li><a href=\"https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/scripts-linting.js\">scripts-linting</a>,\nqui v√©rifie la qualit√© du code ;</li>\n<li><a href=\"https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/scripts.js\">scripts</a>,\ndu <a href=\"/fr/articles/js/browserify/\">browserify</a> pour nos JS c√¥t√© client ;</li>\n<li><a href=\"https://github.com/putaindecode/putaindecode.io/blob/6702dffed608cf6d03141f1dcdbb096a66ff7d8f/tasks/stylesheets.js\">stylesheets</a>,\nnotre t√¢che pour coder des css du futur ;</li>\n</ul>\n<h2>Vous reprendrez bien un peu de‚Ä¶ Gulp* ! Pardon.</h2>\n<p>Si vous avez encore envie de d√©tails je vous renvoie sur l'article anglais\n<a href=\"http://markgoodyear.com/2014/01/getting-started-with-gulp/\">Getting started with gulp</a>\nqui d√©taille tellement bien chaque point que m√™me un anglophobe comprendrait.</p>\n<p>Vous avez aussi\n<a href=\"https://github.com/gulpjs/gulp/blob/master/docs/README.md\">une documentation</a>\ntr√®s bien faite, qui comporte carr√©ment\n<a href=\"https://github.com/gulpjs/gulp/tree/master/docs/recipes\">des exemples <em>officiels</em> tout pr√™ts</a>.</p>\n<p>Comme je vous disais plus t√¥t, les auteurs de Gulp sont assez carr√©s et valident\n(ou plut√¥t <em>invalident</em>)\n<a href=\"https://www.npmjs.org/search?q=gulpplugin\">les plugins</a> qui ne respectent pas\nles\n<a href=\"https://github.com/gulpjs/gulp/blob/master/docs/writing-a-plugin/guidelines.md\">r√®gles</a>.\nJe trouve que c'est gage de qualit√©.</p>\n<p>Pour finir quelques liens pour ceux qui en veulent toujours plus :</p>\n<ul>\n<li><a href=\"http://insertafter.com/fr/blog/retour_experience_gulp.html\">Gulp : Retour d'exp√©rience</a></li>\n<li><a href=\"https://jaysoo.ca/2014/01/27/gruntjs-vs-gulpjs/\">Grunt vs. Gulp, au-del√† des chiffres</a>\n(anglais)</li>\n</ul>\n<pre><code class=\"hljs language-console\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> gulp bisous</span>\n‚ùØ ‚ô° üòò\n</code></pre>\n"}}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"listsRequests":{"data":{"RE_PRIVATE_NONE":true}},"itemsRequests":{"data":{"RE_PRIVATE_NONE":true}}}</script><head><script defer="defer" src="/public/main.56c69761a03eb0112696.js"></script></head></html>