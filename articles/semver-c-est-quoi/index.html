<!DOCTYPE html><html lang="fr"><head><title data-react-helmet="true">SemVer, c&#x27;est quoi ? | Putain de code</title><meta data-react-helmet="true" charset="UTF-8"/><meta data-react-helmet="true" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" name="viewport"/><meta data-react-helmet="true" content="summary_large_image" name="twitter:card"/><meta data-react-helmet="true" content="Putain de code !" property="og:site_name"/><meta data-react-helmet="true" content="@putaindecode" name="twitter:site"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" property="og:image"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" name="twitter:image"/><meta data-react-helmet="true" content="1500" property="og:image:width"/><meta data-react-helmet="true" content="777" property="og:image:height"/><meta data-react-helmet="true" content="SemVer, c&#x27;est quoi ? | Putain de code" property="og:title"/><meta data-react-helmet="true" content="SemVer, c&#x27;est quoi ? | Putain de code" name="twitter:title"/><meta data-react-helmet="true" content="Un article proposé par kud" name="description"/><link data-react-helmet="true" title="RSS Feed" href="/api/articles/feeds/desc/feed.xml" rel="alternate" type="application/rss+xml"/><link data-react-helmet="true" href="/favicon.ico" rel="shortcut icon"/><link data-react-helmet="true" href="https://putaindecode.io/articles/semver-c-est-quoi" rel="canonical"/><script>window.PAGES_BOOT_MODE="hydrate";</script></head><div id="root"><style data-emotion="rpcss zx73cm 1lc6tyj 28v1b4">@-webkit-keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}@keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}:root{--page-background-color:#fff;--page-slightly-accented-background-color:#F9F6F6;--page-accented-background-color:#E4EBEE;--page-text-color:#46515B;--link-text-color:#E51D58;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#FAF3E1;--one-percent-contrast-color:rgba(0, 0, 0, 0.1);--half-percent-contrast-color:rgba(0, 0, 0, 0.05);}@media (prefers-color-scheme: dark){:root{--page-background-color:#222;--page-slightly-accented-background-color:#171717;--page-accented-background-color:#111;--page-text-color:#ddd;--link-text-color:#F87098;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#4F3804;--one-percent-contrast-color:rgba(255, 255, 255, 0.1);--half-percent-contrast-color:rgba(255, 255, 255, 0.05);}}body{padding:0;margin:0;background-color:var(--page-background-color);color:var(--page-text-color);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;overflow-x:hidden;}html{font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}a{color:var(--link-text-color);-webkit-text-decoration:underline;text-decoration:underline;}a:hover{-webkit-text-decoration:none;text-decoration:none;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}*,*:before,*:after{box-sizing:border-box;}pre,.hljs{color:#adbac7;background:#22272e;}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067;}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb;}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#6cb6ff;}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#96d0ff;}.hljs-built_in,.hljs-symbol{color:#f69d50;}.hljs-comment,.hljs-code,.hljs-formula{color:#768390;}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#8ddb8c;}.hljs-subst{color:#adbac7;}.hljs-section{color:#316dca;font-weight:bold;}.hljs-bullet{color:#eac55f;}.hljs-emphasis{color:#adbac7;font-style:italic;}.hljs-strong{color:#adbac7;font-weight:bold;}.hljs-addition{color:#b4f1b4;background-color:#1b4721;}.hljs-deletion{color:#ffd8d3;background-color:#78191b;}</style><style data-emotion="rpcss 9vhaby">.rpcss-9vhaby{background-color:var(--gradient-red-bottom);background-image:linear-gradient(to bottom right, var(--gradient-red-top), var(--gradient-red-bottom));}</style><header class="rpcss-9vhaby" style="background-image:linear-gradient(to bottom right, hsl(40, 100%, 35%), hsl(33, 100%, 30%))"><style data-emotion="rpcss 1qqk0tr">.rpcss-1qqk0tr{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}</style><div class="rpcss-1qqk0tr"><style data-emotion="rpcss qx7dny">.rpcss-qx7dny{width:100%;max-width:1024px;margin:0 auto;padding:0 10px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="rpcss-qx7dny"><style data-emotion="rpcss 7s9om2">.rpcss-7s9om2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:20px 0 50px;}</style><div class="rpcss-7s9om2"><style data-emotion="rpcss gdpa5c">.rpcss-gdpa5c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-gdpa5c" href="/"><style data-emotion="rpcss 1lm4738">.rpcss-1lm4738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;padding-bottom:10px;}</style><div class="rpcss-1lm4738"><style data-emotion="rpcss 13o7eu2">.rpcss-13o7eu2{display:block;}</style><svg class="rpcss-13o7eu2" height="36px" width="36px" viewBox="0 0 36 36"><defs><linearGradient id="PutainDeCodeLogoGradient" x1="50%" x2="50%" y1="0%" y2="127.223881%"><stop offset="0%" stop-color="#E41D57"></stop><stop offset="100%" stop-color="#C60000"></stop></linearGradient></defs><circle cx="18" cy="18" fill="url(#PutainDeCodeLogoGradient)" r="17" stroke="#FFFFFF" stroke-width="2"></circle><polygon fill="#FFFFFF" points="15.9033203 18.2246094 15.9033203 18.3710938 11.2304688 20.5317383 11.2304688 22.8095703 18.0566406 19.184082 18.0566406 17.4116211 11.2304688 13.7788086 11.2304688 16.0639648"></polygon><rect height="14" width="2" fill="#FFFFFF" x="22" y="11"><animate attributeName="opacity" begin="100ms" calcMode="discrete" dur="2s" repeatCount="indefinite" values="1;0"></animate></rect></svg><style data-emotion="rpcss 4cf197">.rpcss-4cf197{width:10px;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-4cf197"></div><style data-emotion="rpcss u5k24">.rpcss-u5k24{font-size:22px;color:#fff;font-weight:800;}</style><div aria-level="2" class="rpcss-u5k24" role="heading">Putain de code !</div></div><style data-emotion="rpcss 1nyebg4">.rpcss-1nyebg4{font-size:14px;color:rgba(255, 255, 255, 0.8);text-align:center;}</style><div class="rpcss-1nyebg4">Blog participatif de la communauté dev</div></a></div></div></div></header><style data-emotion="rpcss a4ric9">.rpcss-a4ric9{background-color:var(--page-slightly-accented-background-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="rpcss-a4ric9"><style data-emotion="rpcss oeugsb">.rpcss-oeugsb{-webkit-animation:500ms ease-out animation-zx73cm;animation:500ms ease-out animation-zx73cm;}</style><div class="rpcss-oeugsb"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1qc2bam">.rpcss-1qc2bam{font-size:42px;font-weight:800;text-align:center;padding-top:40px;line-height:1.2;margin:0;}</style><h1 class="rpcss-1qc2bam">SemVer, c&#x27;est quoi ?</h1><style data-emotion="rpcss obg2kr">.rpcss-obg2kr{font-size:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:40px;color:var(--page-text-color);-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-obg2kr" href="https://github.com/kud"><style data-emotion="rpcss uco8i7">.rpcss-uco8i7{width:32px;height:32px;border-radius:100%;margin-right:10px;}</style><img class="rpcss-uco8i7" alt="kud" src="https://avatars.githubusercontent.com/kud?size=64"/><div>kud<!-- --> <!-- -->•<!-- --> <!-- -->2015/06/16</div></a><style data-emotion="rpcss 15kxmi0">.rpcss-15kxmi0{max-width:640px;width:100%;font-size:18px;margin:0 auto;line-height:1.7;}.rpcss-15kxmi0 h2,.rpcss-15kxmi0 h3,.rpcss-15kxmi0 h4,.rpcss-15kxmi0 h5,.rpcss-15kxmi0 h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-weight:800;line-height:1.2;}.rpcss-15kxmi0 img{max-width:100%;background-color:rgba(255, 255, 255, 0.75);}.rpcss-15kxmi0 code{font-size:0.9em;font-family:PragmataPro,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:1;background-color:var(--code-background-color);margin:0 0.2em;}.rpcss-15kxmi0 pre{padding:10px;overflow-x:auto;font-size:14px;border-radius:10px;border:2px solid var(--one-percent-contrast-color);-webkit-overflow-scrolling:touch;}.rpcss-15kxmi0 pre code{font-size:14px;background-color:transparent;margin:0;}.rpcss-15kxmi0 blockquote{padding-left:20px;margin:0;font-size:16px;border-left:3px solid var(--one-percent-contrast-color);font-style:italic;}.rpcss-15kxmi0 table{width:100%;text-align:center;}.rpcss-15kxmi0 figure{padding:20px 0;}.rpcss-15kxmi0 figcaption{text-align:center;}.rpcss-15kxmi0 a{word-wrap:break-word;}.rpcss-15kxmi0 table thead th{background-color:var(--page-accented-background-color);padding:10px 0;}</style><div class="rpcss-15kxmi0"><p><em>Ce post a été largement inspiré de la mauvaise expérience que j'ai pu avoir
avec l'évolution de <a href="http://backbonejs.org/">Backbone.js</a> qui, ne respectant pas
SemVer, m'a posé des problèmes lors de mise à jour de versions. Les node_modules
(dépendances de dépendances) sont aussi en question.</em></p>
<p>Depuis quelques temps, vous devez entendre le terme <strong>SemVer</strong> par-ci par-là
mais peut-être que vous ne savez pas ce que c'est ou que vous ne savez pas
comment l'appliquer. Et je vous comprends, j'ai mis un peu de temps à maitriser
le sujet.</p>
<p>Pour faire simple, <strong>SemVer</strong> (voulant dire <em>Semantic Versioning</em>) est une
gestion sémantique des versions. En d'autres termes, une façon de numéroter les
versions de manière logique, cohérente, parlante, ayant du sens. Ce n'est
cependant pas forcément une norme, vous n'êtes pas obligé(e) de la respecter
mais ce serait vraiment, vraiment dommage car il tend justement à l'être.</p>
<p>Mais tout d'abord, posons les bases, qu'est-ce qu'une version ?</p>
<p>Une version s'applique à un produit, une application, une bibliothèque, un OS,
tout ce qui a une progression en informatique. Cela permet de définir
l'avancement du produit. La majorité du temps (sauf pour quelques hérétiques),
cela s'écrit de cette façon : <code>X.Y.Z</code> où <code>X</code>, <code>Y</code> et <code>Z</code> sont des entiers (pas
forcément des chiffres d'ailleurs, cela peut être supérieur à 9) soit <code>1.0.10</code>
par exemple. Il est possible que vous voyiez cette forme <code>vX.Y.Z</code> comme
<code>v1.0.10</code> mais en toute franchise, je ne l'apprécie pas. J'aime que mon tag
équivaille à ma version en elle-même. Purement personnel.</p>
<p>Maintenant que nous savons ce qu'est une version, voyons voir ce qu'est
réellement <strong>SemVer</strong>.</p>
<p><strong>SemVer</strong> est un moyen cohérent, pertinent de nommer ses versions afin de
savoir rapidement quelles modifications ont été apportées à votre projet.</p>
<p>Voyons voir ce que dit la documentation officielle de
<a href="http://semver.org/lang/fr/">SemVer</a></p>
<blockquote>
<p>Étant donné un numéro de version MAJEUR.MINEUR.CORRECTIF, il faut incrémenter
:</p>
</blockquote>
<blockquote>
<p>le numéro de version MAJEUR quand il y a des changements
rétro-incompatibles,<br> le numéro de version MINEUR quand il y a des
changements rétro-compatibles,<br> le numéro de version de CORRECTIF quand il
y a des corrections d’anomalies rétro-compatibles</p>
</blockquote>
<blockquote>
<p>Des libellés supplémentaires peuvent être ajoutés pour les versions de
pré-livraison et pour des méta-données de construction sous forme d'extension
du format MAJEURE.MINEURE.CORRECTIF.</p>
</blockquote>
<p>On comprend effectivement l'idée de <strong>SemVer</strong> (et la suite du site explique
comment l'appliquer) mais je trouve que l'on peut mieux expliquer.</p>
<p>Pour comprendre <strong>SemVer</strong>, il faut se mettre dans la peau de l'utilisateur qui
va se servir de votre production.</p>
<p>En effet, <strong>SemVer</strong> est un contrat que vous signez avec vos utilisateurs, une
forme de respect qui leur permet d'adapter leur code ou non en fonction des
versions que vous proposez.</p>
<p>Si je devais définir à quelqu'un ce qu'est <strong>SemVer</strong>, je lui dirais ceci :</p>
<blockquote>
<p>SemVer s'écrit de cette façon : <code>X.Y.Z</code> où <code>X</code> est &quot;majeur&quot;, <code>Y</code> est &quot;mineur&quot;,
<code>Z</code> est &quot;patch&quot;.</p>
</blockquote>
<blockquote>
<p>Qu'est-ce que cela veut dire. Cela veut dire que si vous avez corrigé un bug
dans votre lib et que cela n'affecte en rien le code écrit par votre
utilisateur, alors incrémentez <code>Z</code> (+0.0.1).</p>
</blockquote>
<blockquote>
<p>Si vous avez fait des ajouts dans votre app qui peuvent être intéressants pour
l'utilisateur et mérite une certaine attention afin d'améliorer le code qui
utilise votre lib, alors incrémentez <code>Y</code> (+0.1.0).</p>
</blockquote>
<blockquote>
<p>Si en revanche, vous avez cassé ne serait-ce qu'une partie de l'API (&quot;breaking
changes&quot;), que vous avez <em>juste</em> changé des noms de méthodes / fonctions déjà
existantes (et donc sûrement utilisées par quelqu'un d'autre), que finalement
cela nécessite <strong>forcément</strong> une modification de la part de l'utilisateur sous
peine que sa propre app ne fonctionne plus, alors incrémentez <code>X</code> (+1.0.0).</p>
</blockquote>
<p>C'est vraiment une question de respect envers qui vous proposez votre lib. Par
<strong>SemVer</strong>, je vous informe des potentielles modifications ou lectures de
documentation que vous devez faire. Il ne faut vraiment pas voir ça comme une
évolution de votre propre code.</p>
<p>Par exemple, vous avez refactorisé tout votre code mais l'API n'a pas changé.
Alors <code>Z</code> suffit. Et si vous avez ajoutez des méthodes, c'est plutôt <code>Y</code>.
Pourtant il y a eu une quantité phénoménale de code modifié. Des lignes et des
lignes. Est-ce pour autant que vous devez incrémentez <code>X</code> ? Non. Surtout lorsque
les tests automatisés n'ont pas été modifiés et passent toujours.</p>
<p>En revanche, vous ne faites qu'une petite modification de nom de méthode qui ne
vous semble pas appropriée, ça ne vous prend qu'une ligne de modification, vous
pourriez croire que c'est uniquement <code>Z</code> à changer ? Non plus. Là, vous modifiez
le contrat que l'utilisateur a acquiescé en utilisant votre lib ; vous avez
alors la responsabilité de lui indiquer que son code doit absolument changer
sinon celui-ci ne marchera plus correctement.</p>
<p>En bref, ne voyez pas l'évolution de votre projet avec <strong>SemVer</strong> mais le
contrat que vous signez implicitement avec vos utilisateurs.</p>
<p>Oh et oui, surtout, surtout, ce n'est pas parce que vous êtes arrivé(e) à <code>9</code>
dans <code>Y</code> ou <code>Z</code> que le nombre le précédant doit augmenter. Par exemple <em>mineur</em>
sur <code>1.9.0</code> ? Alors <code>1.10.0</code> et non <code>2.0.0</code>.</p>
<p>J'espère qu'avec ceci, vous vous sentirez plus à l'aise.</p>
<h2>Tips npm</h2>
<p>Avec npm, il est possible de mettre à jour rapidement son <code>package.json</code> et tag
git en utilisant la commande <code>$ npm version</code>. Comme ceci :</p>
<pre><code class="hljs language-console"><span class="hljs-meta">$</span><span class="bash"> npm version (major|minor|patch)</span>
</code></pre>
<p>Cela vous incrémentera le <code>package.json</code> et vous fera un beau commit + tag dans
git tel que :</p>
<pre><code class="hljs language-console">* b474d9c (HEAD -&gt; master, tag: 1.5.3, origin/master) 1.5.3`.
</code></pre>
<p>Et pour éviter d'avoir le &quot;v&quot; dans les tags git qui est par défaut dans npm,
faites :</p>
<pre><code class="hljs language-console"><span class="hljs-meta">$</span><span class="bash"> npm config <span class="hljs-built_in">set</span> tag-version-prefix <span class="hljs-string">&quot;&quot;</span></span>
</code></pre>
<h2>Changelog</h2>
<p><strong>SemVer</strong> va de pair avec les <a href="http://keepachangelog.com/">changelog</a>. Mettre à
jour le changelog vous permet d'indiquer très rapidement ce qui a été modifié
sans que l'utilisateur ait forcément à regarder votre code. Il est surtout très
important lors d'ajouts de fonctionnalités ou de modifications (majeures et
mineures) afin de voir directement les méthodes / fonctions affectées mais aussi
dans le cas d'un patch de voir le gain obtenu de cette nouvelle mise à jour. À
ajouter directement dans le <code>README.md</code> à la fin ou carrément dans un fichier ou
des fichiers dédiés à ça. Voici un
<a href="https://github.com/cssnext/cssnext/blob/master/CHANGELOG.md">exemple</a>.</p>
<hr />
<p>Stay safe, use <strong>SemVer</strong>.</p>
<p>Ressources :</p>
<ul>
<li><a href="http://semver.org/">site officiel</a></li>
<li><a href="http://semver-ftw.org/">semver-ftw</a></li>
</ul>
</div><style data-emotion="rpcss unyj6i">.rpcss-unyj6i{max-width:640px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:20px auto;padding:20px;background-color:var(--page-background-color);border-radius:10px;box-shadow:0 15px 15px -5px rgba(0, 0, 0, 0.2);}@media (max-width: 540px){.rpcss-unyj6i{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-unyj6i"><style data-emotion="rpcss ty7r4z">.rpcss-ty7r4z{font-weight:800;}</style><div class="rpcss-ty7r4z">Vous avez aimé cet article?</div><style data-emotion="rpcss klacsp">.rpcss-klacsp{width:0;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-klacsp"></div><style data-emotion="rpcss 1pkr03v">.rpcss-1pkr03v{background-color:#00aced;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:800;}.rpcss-1pkr03v:active{opacity:0.5;}</style><a class="rpcss-1pkr03v" href="https://www.twitter.com/intent/tweet?text=SemVer%2C%20c&#x27;est%20quoi%20%3F%20sur%20%40PutainDeCode%20https%3A%2F%2Fputaindecode.io%2Farticles%2Fsemver-c-est-quoi" target="_blank">Le partager sur Twitter</a></div><style data-emotion="rpcss x4iqxe">.rpcss-x4iqxe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;padding:20px;}</style><div class="rpcss-x4iqxe"><style data-emotion="rpcss gein6x">.rpcss-gein6x{font-size:20px;-webkit-text-decoration:none;text-decoration:none;color:#1E49B5;}</style><a class="rpcss-gein6x" href="/articles">← Articles</a></div><style data-emotion="rpcss 8bodgl">.rpcss-8bodgl{max-width:640px;width:100%;margin:0 auto;padding:20px 0;}</style><div class="rpcss-8bodgl" id="disqus_thread"></div></div></div></div></div><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1vau6rl">.rpcss-1vau6rl{margin:20px 0;background-color:var(--page-accented-background-color);border-radius:10px;padding:20px;}</style><div class="rpcss-1vau6rl"><style data-emotion="rpcss 1gz1i1h">.rpcss-1gz1i1h{font-size:32px;font-weight:800;margin-bottom:20px;text-align:center;}</style><div aria-level="2" class="rpcss-1gz1i1h" role="heading">Ne rien rater</div><style data-emotion="rpcss 1wbispj">.rpcss-1wbispj{font-size:18px;margin-bottom:10px;text-align:center;}</style><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur les réseaux</div><style data-emotion="rpcss 1hyoz7m">.rpcss-1hyoz7m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="rpcss-1hyoz7m"><a href="https://twitter.com/PutainDeCode"><img alt="Twitter" height="48" src="/public/images/website/twitter.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://facebook.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/facebook.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://github.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/github.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://itunes.apple.com/fr/podcast/putain-de-code-!/id1185311825"><img alt="Apple Podcast" height="48" src="/public/images/website/apple-podcast.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://soundcloud.com/putaindecode"><img alt="Soundcloud" height="48" src="/public/images/website/soundcloud.svg" width="48"/></a></div><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur le chat</div><div class="rpcss-1hyoz7m"><a href="https://discord.gg/jtbGNNc"><img alt="Discord" height="48" src="/public/images/website/discord.svg" width="48"/></a></div></div></div></div><style data-emotion="rpcss zs8kw7">.rpcss-zs8kw7{background-color:#222;padding:20px 0;}</style><footer class="rpcss-zs8kw7"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 79elbk">.rpcss-79elbk{position:relative;}</style><div class="rpcss-79elbk"><style data-emotion="rpcss 1hle0ni">.rpcss-1hle0ni{position:absolute;left:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1hle0ni" href="/api/articles/feeds/desc/feed.xml"><style data-emotion="rpcss lvyu5j">.rpcss-lvyu5j{margin-right:10px;}</style><img class="rpcss-lvyu5j" alt="Flux RSS" height="16" src="/public/images/website/rss-feed.svg" width="16"/><style data-emotion="rpcss um3i31">@media (max-width: 400px){.rpcss-um3i31{display:none;}}</style><div class="rpcss-um3i31">Flux RSS</div></a><style data-emotion="rpcss 12cp4l7">.rpcss-12cp4l7{color:rgba(255, 255, 255, 0.5);text-align:center;font-size:14px;}</style><div class="rpcss-12cp4l7">© 2021 Putain de code !</div><style data-emotion="rpcss 1w98uy3">.rpcss-1w98uy3{position:absolute;right:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1w98uy3" href="https://github.com/putaindecode/putaindecode.io">GitHub</a></div></div></div></footer></div><script id="initialData" type="text/data">{"lists":{"RE_PRIVATE_NONE":true},"items":{"k":"articles","v":{"k":"semver-c-est-quoi","v":{"_0":{"TAG":0,"_0":{"slug":"semver-c-est-quoi","filename":"2015-06-16-semver-c-est-quoi","title":"SemVer, c'est quoi ?","date":"Tue, 16 Jun 2015 00:00:00 GMT","draft":false,"meta":{"date":"2015-06-16T00:00:00.000Z","title":"SemVer, c'est quoi ?","author":"kud","oldSlug":"semver","slug":"semver-c-est-quoi"},"body":"<p><em>Ce post a été largement inspiré de la mauvaise expérience que j'ai pu avoir\navec l'évolution de <a href=\"http://backbonejs.org/\">Backbone.js</a> qui, ne respectant pas\nSemVer, m'a posé des problèmes lors de mise à jour de versions. Les node_modules\n(dépendances de dépendances) sont aussi en question.</em></p>\n<p>Depuis quelques temps, vous devez entendre le terme <strong>SemVer</strong> par-ci par-là\nmais peut-être que vous ne savez pas ce que c'est ou que vous ne savez pas\ncomment l'appliquer. Et je vous comprends, j'ai mis un peu de temps à maitriser\nle sujet.</p>\n<p>Pour faire simple, <strong>SemVer</strong> (voulant dire <em>Semantic Versioning</em>) est une\ngestion sémantique des versions. En d'autres termes, une façon de numéroter les\nversions de manière logique, cohérente, parlante, ayant du sens. Ce n'est\ncependant pas forcément une norme, vous n'êtes pas obligé(e) de la respecter\nmais ce serait vraiment, vraiment dommage car il tend justement à l'être.</p>\n<p>Mais tout d'abord, posons les bases, qu'est-ce qu'une version ?</p>\n<p>Une version s'applique à un produit, une application, une bibliothèque, un OS,\ntout ce qui a une progression en informatique. Cela permet de définir\nl'avancement du produit. La majorité du temps (sauf pour quelques hérétiques),\ncela s'écrit de cette façon : <code>X.Y.Z</code> où <code>X</code>, <code>Y</code> et <code>Z</code> sont des entiers (pas\nforcément des chiffres d'ailleurs, cela peut être supérieur à 9) soit <code>1.0.10</code>\npar exemple. Il est possible que vous voyiez cette forme <code>vX.Y.Z</code> comme\n<code>v1.0.10</code> mais en toute franchise, je ne l'apprécie pas. J'aime que mon tag\néquivaille à ma version en elle-même. Purement personnel.</p>\n<p>Maintenant que nous savons ce qu'est une version, voyons voir ce qu'est\nréellement <strong>SemVer</strong>.</p>\n<p><strong>SemVer</strong> est un moyen cohérent, pertinent de nommer ses versions afin de\nsavoir rapidement quelles modifications ont été apportées à votre projet.</p>\n<p>Voyons voir ce que dit la documentation officielle de\n<a href=\"http://semver.org/lang/fr/\">SemVer</a></p>\n<blockquote>\n<p>Étant donné un numéro de version MAJEUR.MINEUR.CORRECTIF, il faut incrémenter\n:</p>\n</blockquote>\n<blockquote>\n<p>le numéro de version MAJEUR quand il y a des changements\nrétro-incompatibles,<br> le numéro de version MINEUR quand il y a des\nchangements rétro-compatibles,<br> le numéro de version de CORRECTIF quand il\ny a des corrections d’anomalies rétro-compatibles</p>\n</blockquote>\n<blockquote>\n<p>Des libellés supplémentaires peuvent être ajoutés pour les versions de\npré-livraison et pour des méta-données de construction sous forme d'extension\ndu format MAJEURE.MINEURE.CORRECTIF.</p>\n</blockquote>\n<p>On comprend effectivement l'idée de <strong>SemVer</strong> (et la suite du site explique\ncomment l'appliquer) mais je trouve que l'on peut mieux expliquer.</p>\n<p>Pour comprendre <strong>SemVer</strong>, il faut se mettre dans la peau de l'utilisateur qui\nva se servir de votre production.</p>\n<p>En effet, <strong>SemVer</strong> est un contrat que vous signez avec vos utilisateurs, une\nforme de respect qui leur permet d'adapter leur code ou non en fonction des\nversions que vous proposez.</p>\n<p>Si je devais définir à quelqu'un ce qu'est <strong>SemVer</strong>, je lui dirais ceci :</p>\n<blockquote>\n<p>SemVer s'écrit de cette façon : <code>X.Y.Z</code> où <code>X</code> est &quot;majeur&quot;, <code>Y</code> est &quot;mineur&quot;,\n<code>Z</code> est &quot;patch&quot;.</p>\n</blockquote>\n<blockquote>\n<p>Qu'est-ce que cela veut dire. Cela veut dire que si vous avez corrigé un bug\ndans votre lib et que cela n'affecte en rien le code écrit par votre\nutilisateur, alors incrémentez <code>Z</code> (+0.0.1).</p>\n</blockquote>\n<blockquote>\n<p>Si vous avez fait des ajouts dans votre app qui peuvent être intéressants pour\nl'utilisateur et mérite une certaine attention afin d'améliorer le code qui\nutilise votre lib, alors incrémentez <code>Y</code> (+0.1.0).</p>\n</blockquote>\n<blockquote>\n<p>Si en revanche, vous avez cassé ne serait-ce qu'une partie de l'API (&quot;breaking\nchanges&quot;), que vous avez <em>juste</em> changé des noms de méthodes / fonctions déjà\nexistantes (et donc sûrement utilisées par quelqu'un d'autre), que finalement\ncela nécessite <strong>forcément</strong> une modification de la part de l'utilisateur sous\npeine que sa propre app ne fonctionne plus, alors incrémentez <code>X</code> (+1.0.0).</p>\n</blockquote>\n<p>C'est vraiment une question de respect envers qui vous proposez votre lib. Par\n<strong>SemVer</strong>, je vous informe des potentielles modifications ou lectures de\ndocumentation que vous devez faire. Il ne faut vraiment pas voir ça comme une\névolution de votre propre code.</p>\n<p>Par exemple, vous avez refactorisé tout votre code mais l'API n'a pas changé.\nAlors <code>Z</code> suffit. Et si vous avez ajoutez des méthodes, c'est plutôt <code>Y</code>.\nPourtant il y a eu une quantité phénoménale de code modifié. Des lignes et des\nlignes. Est-ce pour autant que vous devez incrémentez <code>X</code> ? Non. Surtout lorsque\nles tests automatisés n'ont pas été modifiés et passent toujours.</p>\n<p>En revanche, vous ne faites qu'une petite modification de nom de méthode qui ne\nvous semble pas appropriée, ça ne vous prend qu'une ligne de modification, vous\npourriez croire que c'est uniquement <code>Z</code> à changer ? Non plus. Là, vous modifiez\nle contrat que l'utilisateur a acquiescé en utilisant votre lib ; vous avez\nalors la responsabilité de lui indiquer que son code doit absolument changer\nsinon celui-ci ne marchera plus correctement.</p>\n<p>En bref, ne voyez pas l'évolution de votre projet avec <strong>SemVer</strong> mais le\ncontrat que vous signez implicitement avec vos utilisateurs.</p>\n<p>Oh et oui, surtout, surtout, ce n'est pas parce que vous êtes arrivé(e) à <code>9</code>\ndans <code>Y</code> ou <code>Z</code> que le nombre le précédant doit augmenter. Par exemple <em>mineur</em>\nsur <code>1.9.0</code> ? Alors <code>1.10.0</code> et non <code>2.0.0</code>.</p>\n<p>J'espère qu'avec ceci, vous vous sentirez plus à l'aise.</p>\n<h2>Tips npm</h2>\n<p>Avec npm, il est possible de mettre à jour rapidement son <code>package.json</code> et tag\ngit en utilisant la commande <code>$ npm version</code>. Comme ceci :</p>\n<pre><code class=\"hljs language-console\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> npm version (major|minor|patch)</span>\n</code></pre>\n<p>Cela vous incrémentera le <code>package.json</code> et vous fera un beau commit + tag dans\ngit tel que :</p>\n<pre><code class=\"hljs language-console\">* b474d9c (HEAD -&gt; master, tag: 1.5.3, origin/master) 1.5.3`.\n</code></pre>\n<p>Et pour éviter d'avoir le &quot;v&quot; dans les tags git qui est par défaut dans npm,\nfaites :</p>\n<pre><code class=\"hljs language-console\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> npm config <span class=\"hljs-built_in\">set</span> tag-version-prefix <span class=\"hljs-string\">&quot;&quot;</span></span>\n</code></pre>\n<h2>Changelog</h2>\n<p><strong>SemVer</strong> va de pair avec les <a href=\"http://keepachangelog.com/\">changelog</a>. Mettre à\njour le changelog vous permet d'indiquer très rapidement ce qui a été modifié\nsans que l'utilisateur ait forcément à regarder votre code. Il est surtout très\nimportant lors d'ajouts de fonctionnalités ou de modifications (majeures et\nmineures) afin de voir directement les méthodes / fonctions affectées mais aussi\ndans le cas d'un patch de voir le gain obtenu de cette nouvelle mise à jour. À\najouter directement dans le <code>README.md</code> à la fin ou carrément dans un fichier ou\ndes fichiers dédiés à ça. Voici un\n<a href=\"https://github.com/cssnext/cssnext/blob/master/CHANGELOG.md\">exemple</a>.</p>\n<hr />\n<p>Stay safe, use <strong>SemVer</strong>.</p>\n<p>Ressources :</p>\n<ul>\n<li><a href=\"http://semver.org/\">site officiel</a></li>\n<li><a href=\"http://semver-ftw.org/\">semver-ftw</a></li>\n</ul>\n"}}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"listsRequests":{"data":{"RE_PRIVATE_NONE":true}},"itemsRequests":{"data":{"RE_PRIVATE_NONE":true}}}</script><head><script defer="defer" src="/public/main.56c69761a03eb0112696.js"></script></head></html>