<!DOCTYPE html><html lang="fr"><head><title data-react-helmet="true">Respecter SemVer (presque) sans avoir à y penser avec semantic-release | Putain de code</title><meta data-react-helmet="true" charset="UTF-8"/><meta data-react-helmet="true" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" name="viewport"/><meta data-react-helmet="true" content="summary_large_image" name="twitter:card"/><meta data-react-helmet="true" content="Putain de code !" property="og:site_name"/><meta data-react-helmet="true" content="@putaindecode" name="twitter:site"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" property="og:image"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" name="twitter:image"/><meta data-react-helmet="true" content="1500" property="og:image:width"/><meta data-react-helmet="true" content="777" property="og:image:height"/><meta data-react-helmet="true" content="Respecter SemVer (presque) sans avoir à y penser avec semantic-release | Putain de code" property="og:title"/><meta data-react-helmet="true" content="Respecter SemVer (presque) sans avoir à y penser avec semantic-release | Putain de code" name="twitter:title"/><meta data-react-helmet="true" content="Un article proposé par drazik" name="description"/><link data-react-helmet="true" title="RSS Feed" href="/api/articles/feeds/desc/feed.xml" rel="alternate" type="application/rss+xml"/><link data-react-helmet="true" href="/favicon.ico" rel="shortcut icon"/><link data-react-helmet="true" href="https://putaindecode.io/articles/respecter-semver-sans-avoir-a-y-penser-avec-semantic-release" rel="canonical"/><script>window.PAGES_BOOT_MODE="hydrate";</script></head><div id="root"><style data-emotion="rpcss zx73cm 1lc6tyj 28v1b4">@-webkit-keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}@keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}:root{--page-background-color:#fff;--page-slightly-accented-background-color:#F9F6F6;--page-accented-background-color:#E4EBEE;--page-text-color:#46515B;--link-text-color:#E51D58;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#FAF3E1;--one-percent-contrast-color:rgba(0, 0, 0, 0.1);--half-percent-contrast-color:rgba(0, 0, 0, 0.05);}@media (prefers-color-scheme: dark){:root{--page-background-color:#222;--page-slightly-accented-background-color:#171717;--page-accented-background-color:#111;--page-text-color:#ddd;--link-text-color:#F87098;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#4F3804;--one-percent-contrast-color:rgba(255, 255, 255, 0.1);--half-percent-contrast-color:rgba(255, 255, 255, 0.05);}}body{padding:0;margin:0;background-color:var(--page-background-color);color:var(--page-text-color);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;overflow-x:hidden;}html{font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}a{color:var(--link-text-color);-webkit-text-decoration:underline;text-decoration:underline;}a:hover{-webkit-text-decoration:none;text-decoration:none;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}*,*:before,*:after{box-sizing:border-box;}pre,.hljs{color:#adbac7;background:#22272e;}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067;}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb;}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#6cb6ff;}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#96d0ff;}.hljs-built_in,.hljs-symbol{color:#f69d50;}.hljs-comment,.hljs-code,.hljs-formula{color:#768390;}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#8ddb8c;}.hljs-subst{color:#adbac7;}.hljs-section{color:#316dca;font-weight:bold;}.hljs-bullet{color:#eac55f;}.hljs-emphasis{color:#adbac7;font-style:italic;}.hljs-strong{color:#adbac7;font-weight:bold;}.hljs-addition{color:#b4f1b4;background-color:#1b4721;}.hljs-deletion{color:#ffd8d3;background-color:#78191b;}</style><style data-emotion="rpcss 9vhaby">.rpcss-9vhaby{background-color:var(--gradient-red-bottom);background-image:linear-gradient(to bottom right, var(--gradient-red-top), var(--gradient-red-bottom));}</style><header class="rpcss-9vhaby" style="background-image:linear-gradient(to bottom right, hsl(301, 100%, 35%), hsl(250, 100%, 30%))"><style data-emotion="rpcss 1qqk0tr">.rpcss-1qqk0tr{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}</style><div class="rpcss-1qqk0tr"><style data-emotion="rpcss qx7dny">.rpcss-qx7dny{width:100%;max-width:1024px;margin:0 auto;padding:0 10px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="rpcss-qx7dny"><style data-emotion="rpcss 7s9om2">.rpcss-7s9om2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:20px 0 50px;}</style><div class="rpcss-7s9om2"><style data-emotion="rpcss gdpa5c">.rpcss-gdpa5c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-gdpa5c" href="/"><style data-emotion="rpcss 1lm4738">.rpcss-1lm4738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;padding-bottom:10px;}</style><div class="rpcss-1lm4738"><style data-emotion="rpcss 13o7eu2">.rpcss-13o7eu2{display:block;}</style><svg class="rpcss-13o7eu2" height="36px" width="36px" viewBox="0 0 36 36"><defs><linearGradient id="PutainDeCodeLogoGradient" x1="50%" x2="50%" y1="0%" y2="127.223881%"><stop offset="0%" stop-color="#E41D57"></stop><stop offset="100%" stop-color="#C60000"></stop></linearGradient></defs><circle cx="18" cy="18" fill="url(#PutainDeCodeLogoGradient)" r="17" stroke="#FFFFFF" stroke-width="2"></circle><polygon fill="#FFFFFF" points="15.9033203 18.2246094 15.9033203 18.3710938 11.2304688 20.5317383 11.2304688 22.8095703 18.0566406 19.184082 18.0566406 17.4116211 11.2304688 13.7788086 11.2304688 16.0639648"></polygon><rect height="14" width="2" fill="#FFFFFF" x="22" y="11"><animate attributeName="opacity" begin="100ms" calcMode="discrete" dur="2s" repeatCount="indefinite" values="1;0"></animate></rect></svg><style data-emotion="rpcss 4cf197">.rpcss-4cf197{width:10px;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-4cf197"></div><style data-emotion="rpcss u5k24">.rpcss-u5k24{font-size:22px;color:#fff;font-weight:800;}</style><div aria-level="2" class="rpcss-u5k24" role="heading">Putain de code !</div></div><style data-emotion="rpcss 1nyebg4">.rpcss-1nyebg4{font-size:14px;color:rgba(255, 255, 255, 0.8);text-align:center;}</style><div class="rpcss-1nyebg4">Blog participatif de la communauté dev</div></a></div></div></div></header><style data-emotion="rpcss a4ric9">.rpcss-a4ric9{background-color:var(--page-slightly-accented-background-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="rpcss-a4ric9"><style data-emotion="rpcss oeugsb">.rpcss-oeugsb{-webkit-animation:500ms ease-out animation-zx73cm;animation:500ms ease-out animation-zx73cm;}</style><div class="rpcss-oeugsb"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1qc2bam">.rpcss-1qc2bam{font-size:42px;font-weight:800;text-align:center;padding-top:40px;line-height:1.2;margin:0;}</style><h1 class="rpcss-1qc2bam">Respecter SemVer (presque) sans avoir à y penser avec semantic-release</h1><style data-emotion="rpcss obg2kr">.rpcss-obg2kr{font-size:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:40px;color:var(--page-text-color);-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-obg2kr" href="https://github.com/drazik"><style data-emotion="rpcss uco8i7">.rpcss-uco8i7{width:32px;height:32px;border-radius:100%;margin-right:10px;}</style><img class="rpcss-uco8i7" alt="drazik" src="https://avatars.githubusercontent.com/drazik?size=64"/><div>drazik<!-- --> <!-- -->•<!-- --> <!-- -->2017/11/21</div></a><style data-emotion="rpcss 15kxmi0">.rpcss-15kxmi0{max-width:640px;width:100%;font-size:18px;margin:0 auto;line-height:1.7;}.rpcss-15kxmi0 h2,.rpcss-15kxmi0 h3,.rpcss-15kxmi0 h4,.rpcss-15kxmi0 h5,.rpcss-15kxmi0 h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-weight:800;line-height:1.2;}.rpcss-15kxmi0 img{max-width:100%;background-color:rgba(255, 255, 255, 0.75);}.rpcss-15kxmi0 code{font-size:0.9em;font-family:PragmataPro,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:1;background-color:var(--code-background-color);margin:0 0.2em;}.rpcss-15kxmi0 pre{padding:10px;overflow-x:auto;font-size:14px;border-radius:10px;border:2px solid var(--one-percent-contrast-color);-webkit-overflow-scrolling:touch;}.rpcss-15kxmi0 pre code{font-size:14px;background-color:transparent;margin:0;}.rpcss-15kxmi0 blockquote{padding-left:20px;margin:0;font-size:16px;border-left:3px solid var(--one-percent-contrast-color);font-style:italic;}.rpcss-15kxmi0 table{width:100%;text-align:center;}.rpcss-15kxmi0 figure{padding:20px 0;}.rpcss-15kxmi0 figcaption{text-align:center;}.rpcss-15kxmi0 a{word-wrap:break-word;}.rpcss-15kxmi0 table thead th{background-color:var(--page-accented-background-color);padding:10px 0;}</style><div class="rpcss-15kxmi0"><h2>Petit rappel : SemVer, c'est quoi déjà ?</h2>
<p>SemVer signifie <strong>Sem</strong>antic <strong>Ver</strong>sionning. C'est une manière de numéroter les
versions succéssives d'un module. Je vous invite à aller lire
<a href="http://putaindecode.io/fr/articles/semver/">l'article sur SemVer</a> avant de lire
la suite si vous n'êtes pas certain de bien comprendre ce que c'est. Je vais ici
citer certaines parties de ce post afin de faire un rapide résumé :</p>
<blockquote>
<p>Une version s'applique à un produit, une application, une bibliothèque, un OS,
tout ce qui a une progression en informatique. Cela permet de définir
l'avancement du produit. SemVer s'écrit de cette façon : X.Y.Z où X est
&quot;majeur&quot;, Y est &quot;mineur&quot;, Z est &quot;patch&quot;.</p>
</blockquote>
<blockquote>
<p>SemVer est un contrat que vous signez avec vos utilisateurs, une forme de
respect qui leur permet d'adapter leur code ou non en fonction des versions
que vous proposez.</p>
</blockquote>
<blockquote>
<p>Cela veut dire que si vous avez corrigé un bug dans votre lib et que cela
n'affecte en rien le code écrit par votre utilisateur, alors incrémentez Z
(+0.0.1).</p>
</blockquote>
<blockquote>
<p>Si vous avez fait des ajouts dans votre app qui peuvent être intéressants pour
l'utilisateur et mérite une certaine attention afin d'améliorer le code qui
utilise votre lib, alors incrémentez Y (+0.1.0).</p>
</blockquote>
<blockquote>
<p>Si en revanche, vous avez cassé ne serait-ce qu'une partie de l'API (&quot;breaking
changes&quot;), que vous avez juste changé des noms de méthodes / fonctions déjà
existantes (et donc sûrement utilisées par quelqu'un d'autre), que finalement
cela nécessite forcément une modification de la part de l'utilisateur sous
peine que sa propre app ne fonctionne plus, alors incrémentez X (+1.0.0).</p>
</blockquote>
<p>Maintenant que nous sommes au point sur SemVer, passons à la suite.</p>
<h2>Publier un module sur npm manuellement</h2>
<p>Lorsqu'on veut publier un module sur npm, on utilise principalement deux
commandes : <code>npm version</code> et <code>npm publish</code>.</p>
<p><code>npm version</code> nous permet de dire quelle composante de notre numéro de version
on souhaite incrémenter. Ainsi, <code>npm version major</code> augmentera la partie
<code>MAJEUR</code>, <code>npm version minor</code> augmentera la partie <code>MINEUR</code> et
<code>npm version patch</code>... je crois que vous l'avez maintenant. La commande crée
aussi un tag git ayant pour nom le numéro de version.</p>
<p>Une fois la nouvelle version prête, <code>npm publish</code> permet, vous l'aurez deviné
(j'espère), de la publier sur npm.</p>
<p>Ce processus semble simple à première vue. Selon les modifications qui ont été
apportées au module depuis la dernière version, on décide de la composante
SemVer à incrémenter, on lance un <code>npm version</code> puis un <code>npm publish</code> et c'est
terminé. Pourtant, une étape du processus implique une décision prise par un
humain, et est donc soumise à interprétation ainsi qu'à de potentielles erreurs
ou oublis.</p>
<p>Imaginons : je travaille sur mon super module au nom extrêmement original
<code>foobar</code>. Celui-ci est actuellement en version <code>1.2.3</code> et plusieurs personnes
ont proposé des pull requests ajoutant des fonctionnalités et corrigeant des
bugs. Il est temps de publier une nouvelle version de <code>foobar</code> afin que tout le
monde puisse bénéficier de ces améliorations. Je passe en revue ce qui a été
ajouté, et je décide d'incrémenter la composante <code>MINEUR</code> de mon numéro de
version. Je publie cette nouvelle version, documente le tout dans une note de
version, je suis heureux.</p>
<p>Manque de chance, quelques temps après la publication, les issues Github de mon
projet s'affolent. J'ai raté une modification non rétrocompatible, les
utilisateurs de mon module (auxquels je promets de respecter SemVer) se sont
joyeusement empressés de faire la mise à jour dans leur application, et
maintenant tout est cassé. Sueurs froides, j'étais pourtant sûr de mon coup, et
maintenant je dois me débrouiller pour régler ce problème dans l'urgence.
&quot;Accessoirement&quot;, j'ai aussi perdu la confiance que m'accordaient certains
utilisateurs.</p>
<p>Après avoir réglé le problème, une question se pose : comment éviter cela à
l'avenir ?</p>
<h2>semantic-release, pour ne plus se soucier de rien, sauf de ce sur quoi on travaille</h2>
<p>Eviter ce problème, c'est la promesse de
<a href="https://github.com/semantic-release/semantic-release">semantic-release</a>. Ce
module nous permet de ne plus avoir à décider nous-même du prochain numéro de
version de notre module.</p>
<p>Le principe est simple : à chaque fois que je fais un commit, je décris dans le
message qui l'accompagne ce que j'ai effectué dans celui-ci, dans un format
précis qui pourra être analysé automatiquement afin de calculer le prochain
numéro de version. C'est un deal entre nous et semantic-release : si on respecte
ce format, il nous garantit de correctement incrémenter les différentes
composantes du numéro de version, et de publier automatiquement chaque nouvelle
version de notre module.</p>
<p>Par défaut, semantic-release se base sur la convention de message de commit du
projet AngularJS, qui propose le format suivant :</p>
<pre><code><type>(<scope>): <subject>
<BLANK LINE>
<body>
<BLANK LINE>
<footer>
</code></pre>
<p>Ainsi, si un commit correspond à la correction d'un bug, je peux lui attribuer
un message de la forme (exemples tirés de la documentation) :</p>
<pre><code>fix(pencil): stop graphite breaking when too much pressure applied
</code></pre>
<p>Dans le cas d'un ajout de fonctionnalité :</p>
<pre><code>feat(pencil): add 'graphiteWidth' option
</code></pre>
<p>Et dans le cas d'une modification qui casse la rétrocompatibilité :</p>
<pre><code>perf(pencil): remove graphiteWidth option

BREAKING CHANGE: The graphiteWidth option has been removed. The default
graphite width of 10mm is always used for performance reasons.
</code></pre>
<p>Ainsi, lorsque semantic-release va passer tous les commits en revue, il pourra
analyser le type de chacun d'entre eux, ainsi que rechercher les &quot;BREAKING
CHANGE&quot;, afin d'incrémenter le numéro de version comme il se doit.</p>
<p>Petit bonus : semantic-release se charge aussi de vous générer des notes de
version et de les ajouter à votre release sur Github.</p>
<p>Finalement, en écrivant de bons messages de commits (ce qui devrait déjà être le
cas, non ?) qui suivent un formalisme précis, vous vous épargnez d'avoir à gérer
vous-même SemVer pour votre module.</p>
<h2>Mettre en place semantic-release sur son projet</h2>
<p>Voyons maintenant comment mettre en place semantic-release sur un projet de
module npm.</p>
<p>La première chose à faire, c'est d'installer la CLI :</p>
<pre><code>npm install -g semantic-release-cli
</code></pre>
<p>Puis de lancer le setup dans le dossier de votre projet :</p>
<pre><code>semantic-release-cli setup
</code></pre>
<p>semantic-release vous pose alors quelques questions :</p>
<ul>
<li><code>What is your npm registry?</code> : appuyez directement sur entrée pour
sélectionner le registry npm par défaut</li>
<li><code>What is your npm username?</code> : entrez votre username npm</li>
<li><code>What is your npm password?</code> : entrez votre mot de passe npm</li>
<li><code>What is your GitHub username?</code> : entrez votre username GitHub</li>
<li><code>What is your GitHub password?</code> : entrez votre mot de passe GitHub</li>
<li><code>What is your GitHub two-factor authentication code?</code> : si vous avez activé
l'authentification à deux facteurs sur GitHub, entrez le code que vous aurez
reçu ici</li>
<li><code>What CI are you using?</code> : nous allons ici utiliser Travis CI, mais vous
pouvez utiliser ce que vous voulez si vous avez un système de CI particulier.
Pour la suite, il n'y a pas besoin de maîtriser Travis CI ni l'intégration
continue en soit. Je vous suggère juste de lire
<a href="http://putaindecode.io/fr/articles/ci/">l'article d'introduction</a> si le
concept d'intégration continue ne vous parle pas du tout</li>
<li><code>Do you want a .travis.yml file with semantic-release setup?</code> : Yes !</li>
</ul>
<p>Voilà, tout est configuré et prêt à être utilisé :</p>
<ul>
<li>Un script npm <code>semantic release</code> a été ajouté à votre <code>package.json</code></li>
<li>Le champs <code>version</code> de votre <code>package.json</code> a été modifié en
<code>0.0.0-development</code>. Vous n'aurez plus jamais à y toucher, c'est
semantic-release qui fera ce travail avant de publier chaque nouvelle version</li>
<li>Un fichier <code>.travis.yml</code> contenant la configuration Travis CI nécessaire a été
créé. Vous pouvez le modifier selon vos besoins. Dans l'immédiat, la chose
urgente est d'adapter la liste des versions de Node sur lesquelles Travis va
lancer vos tests</li>
<li>Votre repository doit être visible sur Travis CI, prêt à lancer un build
lorsque vous ferez un <code>git push</code></li>
<li>Un token npm a été ajouté au repository sur Travis CI, pour que celui-ci
puisse s'authentifier lorsqu'il voudra publier une nouvelle version</li>
</ul>
<p><em>Une petite note concernant Travis CI : le but de semantic-release étant
d'automatiser le processus de publication d'un module npm, celui-ci va tout
bonnement refuser de se lancer en dehors d'un environnement d'intégration
continue. Une configuration de base est fournie, il n'y a donc pas à se soucier
de ça, mais sans intégration continue, pas de semantic-release. C'est pourquoi
l'utilisation d'une plateforme d'intégration continue vous est imposée.</em></p>
<p>Maintenant que tout est en place, il va falloir travailler un peu, faire
quelques commits afin d'arriver au point où on voudra publier une nouvelle
version. Disons que je travaille sur un module <code>math</code> qui implémente
actuellement les fonctions <code>add</code> et <code>substract</code>. Le module est actuellement en
version 1.0.0 sur npm, et un utilisateur m'a remonté un bug sur la fonction
<code>add</code> lorsqu'on souhaite additionner deux nombres décimaux. Je règle le
problème, et arrive le moment de faire le commit. Selon la convention que nous
avons vu un peu plus tôt, celui-ci devra ressembler à :</p>
<pre><code>fix(add): handle decimal numbers addition
</code></pre>
<p>Semantic-release pourra alors voir que ce commit est une correction de bug, qui
s'applique à la fonction add, et qui règle un problème d'addition sur des
nombres décimaux. Il pourra donc prendre la décision d'incrémenter la composante
<code>MINEUR</code> de la version du module.</p>
<p>Satisfait de mon travail pour aujourd'hui, je décide de m'arrêter là, et je fais
un <code>git push</code>. Travis CI déclenchera un build dès qu'il aura détecté ce nouveau
commit sur mon repository GitHub. Celui-ci va donc lancer mes tests, et si
ceux-ci passent, lancera le script npm créé lors du setup de semantic-release
(<code>npm run semantic-release</code>). Ce script va faire les choses suivantes :</p>
<ol>
<li>Vérifier que les conditions d'exécution sont bonnes (par défaut, il vérifie
qu'on est bien sur Travis CI, sur la branche master et que tous les autres
jobs Travis CI sont bien terminés)</li>
<li>Récupérer le dernier numéro de version publié</li>
<li>Analyser les commits afin de déterminer le numéro de la nouvelle version</li>
<li>Publier la nouvelle version (mise à jour du champ <code>version</code> du
<code>package.json</code> puis <code>npm publish</code>)</li>
<li>Générer les notes de version</li>
<li>Créer un tag git ainsi que la release associée sur GitHub</li>
</ol>
<p>Une fois le build Travis CI terminé, je verrais donc la version <code>1.0.1</code> de
<code>math</code> publiée sur npm, un nouveau tag et une nouvelle release (avec les notes
qui y sont associées) disponibles sur GitHub.</p>
<p>Si je décide maintenant d'ajouter les fonctions <code>multiply</code> et <code>divide</code> à mon
module, et d'effectuer les deux commits suivants :</p>
<pre><code>feat(multiply): add multiply function
</code></pre>
<pre><code>feat(divide): add divide function
</code></pre>
<p>Semantic-release déterminera que le prochain numéro de version est <code>1.1.0</code>, et
fera le même travail que précédemment.</p>
<p>Enfin, si je décide d'implémenter une fonction spécifique pour l'addition de
deux nombre décimaux, je ferais le commit suivant :</p>
<pre><code>feat(add): split add function into addInts and addFloats

BREAKING CHANGE: add function has been removed. You must replace it with
addInts or addFloats
</code></pre>
<p>Semantic-release publiera dans ce cas la version <code>2.0.0</code>, parce qu'il détectera
(grâce au &quot;BREAKING CHANGE&quot;) que ce commit contient des modifications non
rétrocompatibles. Il s'occupera aussi d'ajouter aux notes de version une liste
des changements non rétrocompatibles.</p>
<h2>Si vous voulez aller un peu plus loin</h2>
<p>Nous avons jusqu'ici utilisé semantic-release avec tout ce qu'il propose par
défaut. Toutefois celui-ci est basé sur un système de plugins et peut donc être
personnalisé quasiment de A à Z. Je ne détaillerais pas tout ici, mais chaque
étape du processus qui se déroule au lancement du script npm <code>semantic-release</code>
ne fait qu'exécuter une liste de plugins qui peuvent tous être remplacés. Vous
pouvez ainsi implémenter votre propre logique pour chaque étape. Un exemple :
écrire un plugin pour la phase d'analyse des commits afin d'utiliser une
convention différente de celle d'Angular JS.</p>
<p><a href="https://github.com/semantic-release/semantic-release#plugins">La documentation</a>
explique bien comment écrire un plugin. Les possibilités sont virtuellement
infinies, libre à vous d'adapter semantic-release à votre façon de travailler et
vos envies.</p>
</div><style data-emotion="rpcss unyj6i">.rpcss-unyj6i{max-width:640px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:20px auto;padding:20px;background-color:var(--page-background-color);border-radius:10px;box-shadow:0 15px 15px -5px rgba(0, 0, 0, 0.2);}@media (max-width: 540px){.rpcss-unyj6i{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-unyj6i"><style data-emotion="rpcss ty7r4z">.rpcss-ty7r4z{font-weight:800;}</style><div class="rpcss-ty7r4z">Vous avez aimé cet article?</div><style data-emotion="rpcss klacsp">.rpcss-klacsp{width:0;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-klacsp"></div><style data-emotion="rpcss 1pkr03v">.rpcss-1pkr03v{background-color:#00aced;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:800;}.rpcss-1pkr03v:active{opacity:0.5;}</style><a class="rpcss-1pkr03v" href="https://www.twitter.com/intent/tweet?text=Respecter%20SemVer%20(presque)%20sans%20avoir%20%C3%A0%20y%20penser%20avec%20semantic-release%20sur%20%40PutainDeCode%20https%3A%2F%2Fputaindecode.io%2Farticles%2Frespecter-semver-sans-avoir-a-y-penser-avec-semantic-release" target="_blank">Le partager sur Twitter</a></div><style data-emotion="rpcss x4iqxe">.rpcss-x4iqxe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;padding:20px;}</style><div class="rpcss-x4iqxe"><style data-emotion="rpcss gein6x">.rpcss-gein6x{font-size:20px;-webkit-text-decoration:none;text-decoration:none;color:#1E49B5;}</style><a class="rpcss-gein6x" href="/articles">← Articles</a></div><style data-emotion="rpcss 8bodgl">.rpcss-8bodgl{max-width:640px;width:100%;margin:0 auto;padding:20px 0;}</style><div class="rpcss-8bodgl" id="disqus_thread"></div></div></div></div></div><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1vau6rl">.rpcss-1vau6rl{margin:20px 0;background-color:var(--page-accented-background-color);border-radius:10px;padding:20px;}</style><div class="rpcss-1vau6rl"><style data-emotion="rpcss 1gz1i1h">.rpcss-1gz1i1h{font-size:32px;font-weight:800;margin-bottom:20px;text-align:center;}</style><div aria-level="2" class="rpcss-1gz1i1h" role="heading">Ne rien rater</div><style data-emotion="rpcss 1wbispj">.rpcss-1wbispj{font-size:18px;margin-bottom:10px;text-align:center;}</style><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur les réseaux</div><style data-emotion="rpcss 1hyoz7m">.rpcss-1hyoz7m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="rpcss-1hyoz7m"><a href="https://twitter.com/PutainDeCode"><img alt="Twitter" height="48" src="/public/images/website/twitter.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://facebook.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/facebook.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://github.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/github.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://itunes.apple.com/fr/podcast/putain-de-code-!/id1185311825"><img alt="Apple Podcast" height="48" src="/public/images/website/apple-podcast.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://soundcloud.com/putaindecode"><img alt="Soundcloud" height="48" src="/public/images/website/soundcloud.svg" width="48"/></a></div><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur le chat</div><div class="rpcss-1hyoz7m"><a href="https://discord.gg/jtbGNNc"><img alt="Discord" height="48" src="/public/images/website/discord.svg" width="48"/></a></div></div></div></div><style data-emotion="rpcss zs8kw7">.rpcss-zs8kw7{background-color:#222;padding:20px 0;}</style><footer class="rpcss-zs8kw7"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 79elbk">.rpcss-79elbk{position:relative;}</style><div class="rpcss-79elbk"><style data-emotion="rpcss 1hle0ni">.rpcss-1hle0ni{position:absolute;left:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1hle0ni" href="/api/articles/feeds/desc/feed.xml"><style data-emotion="rpcss lvyu5j">.rpcss-lvyu5j{margin-right:10px;}</style><img class="rpcss-lvyu5j" alt="Flux RSS" height="16" src="/public/images/website/rss-feed.svg" width="16"/><style data-emotion="rpcss um3i31">@media (max-width: 400px){.rpcss-um3i31{display:none;}}</style><div class="rpcss-um3i31">Flux RSS</div></a><style data-emotion="rpcss 12cp4l7">.rpcss-12cp4l7{color:rgba(255, 255, 255, 0.5);text-align:center;font-size:14px;}</style><div class="rpcss-12cp4l7">© 2021 Putain de code !</div><style data-emotion="rpcss 1w98uy3">.rpcss-1w98uy3{position:absolute;right:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1w98uy3" href="https://github.com/putaindecode/putaindecode.io">GitHub</a></div></div></div></footer></div><script id="initialData" type="text/data">{"lists":{"RE_PRIVATE_NONE":true},"items":{"k":"articles","v":{"k":"respecter-semver-sans-avoir-a-y-penser-avec-semantic-release","v":{"_0":{"TAG":0,"_0":{"slug":"respecter-semver-sans-avoir-a-y-penser-avec-semantic-release","filename":"2017-11-21-respecter-semver-sans-avoir-a-y-penser-avec-semantic-release","title":"Respecter SemVer (presque) sans avoir à y penser avec semantic-release","date":"Tue, 21 Nov 2017 00:00:00 GMT","draft":false,"meta":{"date":"2017-11-21T00:00:00.000Z","title":"Respecter SemVer (presque) sans avoir à y penser avec semantic-release","author":"drazik","oldSlug":"semver/semantic-release","slug":"respecter-semver-sans-avoir-a-y-penser-avec-semantic-release"},"body":"<h2>Petit rappel : SemVer, c'est quoi déjà ?</h2>\n<p>SemVer signifie <strong>Sem</strong>antic <strong>Ver</strong>sionning. C'est une manière de numéroter les\nversions succéssives d'un module. Je vous invite à aller lire\n<a href=\"http://putaindecode.io/fr/articles/semver/\">l'article sur SemVer</a> avant de lire\nla suite si vous n'êtes pas certain de bien comprendre ce que c'est. Je vais ici\nciter certaines parties de ce post afin de faire un rapide résumé :</p>\n<blockquote>\n<p>Une version s'applique à un produit, une application, une bibliothèque, un OS,\ntout ce qui a une progression en informatique. Cela permet de définir\nl'avancement du produit. SemVer s'écrit de cette façon : X.Y.Z où X est\n&quot;majeur&quot;, Y est &quot;mineur&quot;, Z est &quot;patch&quot;.</p>\n</blockquote>\n<blockquote>\n<p>SemVer est un contrat que vous signez avec vos utilisateurs, une forme de\nrespect qui leur permet d'adapter leur code ou non en fonction des versions\nque vous proposez.</p>\n</blockquote>\n<blockquote>\n<p>Cela veut dire que si vous avez corrigé un bug dans votre lib et que cela\nn'affecte en rien le code écrit par votre utilisateur, alors incrémentez Z\n(+0.0.1).</p>\n</blockquote>\n<blockquote>\n<p>Si vous avez fait des ajouts dans votre app qui peuvent être intéressants pour\nl'utilisateur et mérite une certaine attention afin d'améliorer le code qui\nutilise votre lib, alors incrémentez Y (+0.1.0).</p>\n</blockquote>\n<blockquote>\n<p>Si en revanche, vous avez cassé ne serait-ce qu'une partie de l'API (&quot;breaking\nchanges&quot;), que vous avez juste changé des noms de méthodes / fonctions déjà\nexistantes (et donc sûrement utilisées par quelqu'un d'autre), que finalement\ncela nécessite forcément une modification de la part de l'utilisateur sous\npeine que sa propre app ne fonctionne plus, alors incrémentez X (+1.0.0).</p>\n</blockquote>\n<p>Maintenant que nous sommes au point sur SemVer, passons à la suite.</p>\n<h2>Publier un module sur npm manuellement</h2>\n<p>Lorsqu'on veut publier un module sur npm, on utilise principalement deux\ncommandes : <code>npm version</code> et <code>npm publish</code>.</p>\n<p><code>npm version</code> nous permet de dire quelle composante de notre numéro de version\non souhaite incrémenter. Ainsi, <code>npm version major</code> augmentera la partie\n<code>MAJEUR</code>, <code>npm version minor</code> augmentera la partie <code>MINEUR</code> et\n<code>npm version patch</code>... je crois que vous l'avez maintenant. La commande crée\naussi un tag git ayant pour nom le numéro de version.</p>\n<p>Une fois la nouvelle version prête, <code>npm publish</code> permet, vous l'aurez deviné\n(j'espère), de la publier sur npm.</p>\n<p>Ce processus semble simple à première vue. Selon les modifications qui ont été\napportées au module depuis la dernière version, on décide de la composante\nSemVer à incrémenter, on lance un <code>npm version</code> puis un <code>npm publish</code> et c'est\nterminé. Pourtant, une étape du processus implique une décision prise par un\nhumain, et est donc soumise à interprétation ainsi qu'à de potentielles erreurs\nou oublis.</p>\n<p>Imaginons : je travaille sur mon super module au nom extrêmement original\n<code>foobar</code>. Celui-ci est actuellement en version <code>1.2.3</code> et plusieurs personnes\nont proposé des pull requests ajoutant des fonctionnalités et corrigeant des\nbugs. Il est temps de publier une nouvelle version de <code>foobar</code> afin que tout le\nmonde puisse bénéficier de ces améliorations. Je passe en revue ce qui a été\najouté, et je décide d'incrémenter la composante <code>MINEUR</code> de mon numéro de\nversion. Je publie cette nouvelle version, documente le tout dans une note de\nversion, je suis heureux.</p>\n<p>Manque de chance, quelques temps après la publication, les issues Github de mon\nprojet s'affolent. J'ai raté une modification non rétrocompatible, les\nutilisateurs de mon module (auxquels je promets de respecter SemVer) se sont\njoyeusement empressés de faire la mise à jour dans leur application, et\nmaintenant tout est cassé. Sueurs froides, j'étais pourtant sûr de mon coup, et\nmaintenant je dois me débrouiller pour régler ce problème dans l'urgence.\n&quot;Accessoirement&quot;, j'ai aussi perdu la confiance que m'accordaient certains\nutilisateurs.</p>\n<p>Après avoir réglé le problème, une question se pose : comment éviter cela à\nl'avenir ?</p>\n<h2>semantic-release, pour ne plus se soucier de rien, sauf de ce sur quoi on travaille</h2>\n<p>Eviter ce problème, c'est la promesse de\n<a href=\"https://github.com/semantic-release/semantic-release\">semantic-release</a>. Ce\nmodule nous permet de ne plus avoir à décider nous-même du prochain numéro de\nversion de notre module.</p>\n<p>Le principe est simple : à chaque fois que je fais un commit, je décris dans le\nmessage qui l'accompagne ce que j'ai effectué dans celui-ci, dans un format\nprécis qui pourra être analysé automatiquement afin de calculer le prochain\nnuméro de version. C'est un deal entre nous et semantic-release : si on respecte\nce format, il nous garantit de correctement incrémenter les différentes\ncomposantes du numéro de version, et de publier automatiquement chaque nouvelle\nversion de notre module.</p>\n<p>Par défaut, semantic-release se base sur la convention de message de commit du\nprojet AngularJS, qui propose le format suivant :</p>\n<pre><code><type>(<scope>): <subject>\n<BLANK LINE>\n<body>\n<BLANK LINE>\n<footer>\n</code></pre>\n<p>Ainsi, si un commit correspond à la correction d'un bug, je peux lui attribuer\nun message de la forme (exemples tirés de la documentation) :</p>\n<pre><code>fix(pencil): stop graphite breaking when too much pressure applied\n</code></pre>\n<p>Dans le cas d'un ajout de fonctionnalité :</p>\n<pre><code>feat(pencil): add 'graphiteWidth' option\n</code></pre>\n<p>Et dans le cas d'une modification qui casse la rétrocompatibilité :</p>\n<pre><code>perf(pencil): remove graphiteWidth option\n\nBREAKING CHANGE: The graphiteWidth option has been removed. The default\ngraphite width of 10mm is always used for performance reasons.\n</code></pre>\n<p>Ainsi, lorsque semantic-release va passer tous les commits en revue, il pourra\nanalyser le type de chacun d'entre eux, ainsi que rechercher les &quot;BREAKING\nCHANGE&quot;, afin d'incrémenter le numéro de version comme il se doit.</p>\n<p>Petit bonus : semantic-release se charge aussi de vous générer des notes de\nversion et de les ajouter à votre release sur Github.</p>\n<p>Finalement, en écrivant de bons messages de commits (ce qui devrait déjà être le\ncas, non ?) qui suivent un formalisme précis, vous vous épargnez d'avoir à gérer\nvous-même SemVer pour votre module.</p>\n<h2>Mettre en place semantic-release sur son projet</h2>\n<p>Voyons maintenant comment mettre en place semantic-release sur un projet de\nmodule npm.</p>\n<p>La première chose à faire, c'est d'installer la CLI :</p>\n<pre><code>npm install -g semantic-release-cli\n</code></pre>\n<p>Puis de lancer le setup dans le dossier de votre projet :</p>\n<pre><code>semantic-release-cli setup\n</code></pre>\n<p>semantic-release vous pose alors quelques questions :</p>\n<ul>\n<li><code>What is your npm registry?</code> : appuyez directement sur entrée pour\nsélectionner le registry npm par défaut</li>\n<li><code>What is your npm username?</code> : entrez votre username npm</li>\n<li><code>What is your npm password?</code> : entrez votre mot de passe npm</li>\n<li><code>What is your GitHub username?</code> : entrez votre username GitHub</li>\n<li><code>What is your GitHub password?</code> : entrez votre mot de passe GitHub</li>\n<li><code>What is your GitHub two-factor authentication code?</code> : si vous avez activé\nl'authentification à deux facteurs sur GitHub, entrez le code que vous aurez\nreçu ici</li>\n<li><code>What CI are you using?</code> : nous allons ici utiliser Travis CI, mais vous\npouvez utiliser ce que vous voulez si vous avez un système de CI particulier.\nPour la suite, il n'y a pas besoin de maîtriser Travis CI ni l'intégration\ncontinue en soit. Je vous suggère juste de lire\n<a href=\"http://putaindecode.io/fr/articles/ci/\">l'article d'introduction</a> si le\nconcept d'intégration continue ne vous parle pas du tout</li>\n<li><code>Do you want a .travis.yml file with semantic-release setup?</code> : Yes !</li>\n</ul>\n<p>Voilà, tout est configuré et prêt à être utilisé :</p>\n<ul>\n<li>Un script npm <code>semantic release</code> a été ajouté à votre <code>package.json</code></li>\n<li>Le champs <code>version</code> de votre <code>package.json</code> a été modifié en\n<code>0.0.0-development</code>. Vous n'aurez plus jamais à y toucher, c'est\nsemantic-release qui fera ce travail avant de publier chaque nouvelle version</li>\n<li>Un fichier <code>.travis.yml</code> contenant la configuration Travis CI nécessaire a été\ncréé. Vous pouvez le modifier selon vos besoins. Dans l'immédiat, la chose\nurgente est d'adapter la liste des versions de Node sur lesquelles Travis va\nlancer vos tests</li>\n<li>Votre repository doit être visible sur Travis CI, prêt à lancer un build\nlorsque vous ferez un <code>git push</code></li>\n<li>Un token npm a été ajouté au repository sur Travis CI, pour que celui-ci\npuisse s'authentifier lorsqu'il voudra publier une nouvelle version</li>\n</ul>\n<p><em>Une petite note concernant Travis CI : le but de semantic-release étant\nd'automatiser le processus de publication d'un module npm, celui-ci va tout\nbonnement refuser de se lancer en dehors d'un environnement d'intégration\ncontinue. Une configuration de base est fournie, il n'y a donc pas à se soucier\nde ça, mais sans intégration continue, pas de semantic-release. C'est pourquoi\nl'utilisation d'une plateforme d'intégration continue vous est imposée.</em></p>\n<p>Maintenant que tout est en place, il va falloir travailler un peu, faire\nquelques commits afin d'arriver au point où on voudra publier une nouvelle\nversion. Disons que je travaille sur un module <code>math</code> qui implémente\nactuellement les fonctions <code>add</code> et <code>substract</code>. Le module est actuellement en\nversion 1.0.0 sur npm, et un utilisateur m'a remonté un bug sur la fonction\n<code>add</code> lorsqu'on souhaite additionner deux nombres décimaux. Je règle le\nproblème, et arrive le moment de faire le commit. Selon la convention que nous\navons vu un peu plus tôt, celui-ci devra ressembler à :</p>\n<pre><code>fix(add): handle decimal numbers addition\n</code></pre>\n<p>Semantic-release pourra alors voir que ce commit est une correction de bug, qui\ns'applique à la fonction add, et qui règle un problème d'addition sur des\nnombres décimaux. Il pourra donc prendre la décision d'incrémenter la composante\n<code>MINEUR</code> de la version du module.</p>\n<p>Satisfait de mon travail pour aujourd'hui, je décide de m'arrêter là, et je fais\nun <code>git push</code>. Travis CI déclenchera un build dès qu'il aura détecté ce nouveau\ncommit sur mon repository GitHub. Celui-ci va donc lancer mes tests, et si\nceux-ci passent, lancera le script npm créé lors du setup de semantic-release\n(<code>npm run semantic-release</code>). Ce script va faire les choses suivantes :</p>\n<ol>\n<li>Vérifier que les conditions d'exécution sont bonnes (par défaut, il vérifie\nqu'on est bien sur Travis CI, sur la branche master et que tous les autres\njobs Travis CI sont bien terminés)</li>\n<li>Récupérer le dernier numéro de version publié</li>\n<li>Analyser les commits afin de déterminer le numéro de la nouvelle version</li>\n<li>Publier la nouvelle version (mise à jour du champ <code>version</code> du\n<code>package.json</code> puis <code>npm publish</code>)</li>\n<li>Générer les notes de version</li>\n<li>Créer un tag git ainsi que la release associée sur GitHub</li>\n</ol>\n<p>Une fois le build Travis CI terminé, je verrais donc la version <code>1.0.1</code> de\n<code>math</code> publiée sur npm, un nouveau tag et une nouvelle release (avec les notes\nqui y sont associées) disponibles sur GitHub.</p>\n<p>Si je décide maintenant d'ajouter les fonctions <code>multiply</code> et <code>divide</code> à mon\nmodule, et d'effectuer les deux commits suivants :</p>\n<pre><code>feat(multiply): add multiply function\n</code></pre>\n<pre><code>feat(divide): add divide function\n</code></pre>\n<p>Semantic-release déterminera que le prochain numéro de version est <code>1.1.0</code>, et\nfera le même travail que précédemment.</p>\n<p>Enfin, si je décide d'implémenter une fonction spécifique pour l'addition de\ndeux nombre décimaux, je ferais le commit suivant :</p>\n<pre><code>feat(add): split add function into addInts and addFloats\n\nBREAKING CHANGE: add function has been removed. You must replace it with\naddInts or addFloats\n</code></pre>\n<p>Semantic-release publiera dans ce cas la version <code>2.0.0</code>, parce qu'il détectera\n(grâce au &quot;BREAKING CHANGE&quot;) que ce commit contient des modifications non\nrétrocompatibles. Il s'occupera aussi d'ajouter aux notes de version une liste\ndes changements non rétrocompatibles.</p>\n<h2>Si vous voulez aller un peu plus loin</h2>\n<p>Nous avons jusqu'ici utilisé semantic-release avec tout ce qu'il propose par\ndéfaut. Toutefois celui-ci est basé sur un système de plugins et peut donc être\npersonnalisé quasiment de A à Z. Je ne détaillerais pas tout ici, mais chaque\nétape du processus qui se déroule au lancement du script npm <code>semantic-release</code>\nne fait qu'exécuter une liste de plugins qui peuvent tous être remplacés. Vous\npouvez ainsi implémenter votre propre logique pour chaque étape. Un exemple :\nécrire un plugin pour la phase d'analyse des commits afin d'utiliser une\nconvention différente de celle d'Angular JS.</p>\n<p><a href=\"https://github.com/semantic-release/semantic-release#plugins\">La documentation</a>\nexplique bien comment écrire un plugin. Les possibilités sont virtuellement\ninfinies, libre à vous d'adapter semantic-release à votre façon de travailler et\nvos envies.</p>\n"}}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"listsRequests":{"data":{"RE_PRIVATE_NONE":true}},"itemsRequests":{"data":{"RE_PRIVATE_NONE":true}}}</script><head><script defer="defer" src="/public/main.56c69761a03eb0112696.js"></script></head></html>