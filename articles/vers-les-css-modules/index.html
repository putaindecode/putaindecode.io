<!DOCTYPE html><html lang="fr"><head><title data-react-helmet="true">Vers les CSS modules | Putain de code</title><meta data-react-helmet="true" charset="UTF-8"/><meta data-react-helmet="true" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" name="viewport"/><meta data-react-helmet="true" content="summary_large_image" name="twitter:card"/><meta data-react-helmet="true" content="Putain de code !" property="og:site_name"/><meta data-react-helmet="true" content="@putaindecode" name="twitter:site"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" property="og:image"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" name="twitter:image"/><meta data-react-helmet="true" content="1500" property="og:image:width"/><meta data-react-helmet="true" content="777" property="og:image:height"/><meta data-react-helmet="true" content="Vers les CSS modules | Putain de code" property="og:title"/><meta data-react-helmet="true" content="Vers les CSS modules | Putain de code" name="twitter:title"/><meta data-react-helmet="true" content="Un article proposé par thibthib" name="description"/><link data-react-helmet="true" title="RSS Feed" href="/api/articles/feeds/desc/feed.xml" rel="alternate" type="application/rss+xml"/><link data-react-helmet="true" href="/favicon.ico" rel="shortcut icon"/><link data-react-helmet="true" href="https://putaindecode.io/articles/vers-les-css-modules" rel="canonical"/><script>window.PAGES_BOOT_MODE="hydrate";</script></head><div id="root"><style data-emotion="rpcss zx73cm 1lc6tyj 28v1b4">@-webkit-keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}@keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}:root{--page-background-color:#fff;--page-slightly-accented-background-color:#F9F6F6;--page-accented-background-color:#E4EBEE;--page-text-color:#46515B;--link-text-color:#E51D58;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#FAF3E1;--one-percent-contrast-color:rgba(0, 0, 0, 0.1);--half-percent-contrast-color:rgba(0, 0, 0, 0.05);}@media (prefers-color-scheme: dark){:root{--page-background-color:#222;--page-slightly-accented-background-color:#171717;--page-accented-background-color:#111;--page-text-color:#ddd;--link-text-color:#F87098;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#4F3804;--one-percent-contrast-color:rgba(255, 255, 255, 0.1);--half-percent-contrast-color:rgba(255, 255, 255, 0.05);}}body{padding:0;margin:0;background-color:var(--page-background-color);color:var(--page-text-color);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;overflow-x:hidden;}html{font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}a{color:var(--link-text-color);-webkit-text-decoration:underline;text-decoration:underline;}a:hover{-webkit-text-decoration:none;text-decoration:none;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}*,*:before,*:after{box-sizing:border-box;}pre,.hljs{color:#adbac7;background:#22272e;}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067;}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb;}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#6cb6ff;}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#96d0ff;}.hljs-built_in,.hljs-symbol{color:#f69d50;}.hljs-comment,.hljs-code,.hljs-formula{color:#768390;}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#8ddb8c;}.hljs-subst{color:#adbac7;}.hljs-section{color:#316dca;font-weight:bold;}.hljs-bullet{color:#eac55f;}.hljs-emphasis{color:#adbac7;font-style:italic;}.hljs-strong{color:#adbac7;font-weight:bold;}.hljs-addition{color:#b4f1b4;background-color:#1b4721;}.hljs-deletion{color:#ffd8d3;background-color:#78191b;}</style><style data-emotion="rpcss 9vhaby">.rpcss-9vhaby{background-color:var(--gradient-red-bottom);background-image:linear-gradient(to bottom right, var(--gradient-red-top), var(--gradient-red-bottom));}</style><header class="rpcss-9vhaby" style="background-image:linear-gradient(to bottom right, hsl(328, 100%, 35%), hsl(273, 100%, 30%))"><style data-emotion="rpcss 1qqk0tr">.rpcss-1qqk0tr{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}</style><div class="rpcss-1qqk0tr"><style data-emotion="rpcss qx7dny">.rpcss-qx7dny{width:100%;max-width:1024px;margin:0 auto;padding:0 10px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="rpcss-qx7dny"><style data-emotion="rpcss 7s9om2">.rpcss-7s9om2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:20px 0 50px;}</style><div class="rpcss-7s9om2"><style data-emotion="rpcss gdpa5c">.rpcss-gdpa5c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-gdpa5c" href="/"><style data-emotion="rpcss 1lm4738">.rpcss-1lm4738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;padding-bottom:10px;}</style><div class="rpcss-1lm4738"><style data-emotion="rpcss 13o7eu2">.rpcss-13o7eu2{display:block;}</style><svg class="rpcss-13o7eu2" height="36px" width="36px" viewBox="0 0 36 36"><defs><linearGradient id="PutainDeCodeLogoGradient" x1="50%" x2="50%" y1="0%" y2="127.223881%"><stop offset="0%" stop-color="#E41D57"></stop><stop offset="100%" stop-color="#C60000"></stop></linearGradient></defs><circle cx="18" cy="18" fill="url(#PutainDeCodeLogoGradient)" r="17" stroke="#FFFFFF" stroke-width="2"></circle><polygon fill="#FFFFFF" points="15.9033203 18.2246094 15.9033203 18.3710938 11.2304688 20.5317383 11.2304688 22.8095703 18.0566406 19.184082 18.0566406 17.4116211 11.2304688 13.7788086 11.2304688 16.0639648"></polygon><rect height="14" width="2" fill="#FFFFFF" x="22" y="11"><animate attributeName="opacity" begin="100ms" calcMode="discrete" dur="2s" repeatCount="indefinite" values="1;0"></animate></rect></svg><style data-emotion="rpcss 4cf197">.rpcss-4cf197{width:10px;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-4cf197"></div><style data-emotion="rpcss u5k24">.rpcss-u5k24{font-size:22px;color:#fff;font-weight:800;}</style><div aria-level="2" class="rpcss-u5k24" role="heading">Putain de code !</div></div><style data-emotion="rpcss 1nyebg4">.rpcss-1nyebg4{font-size:14px;color:rgba(255, 255, 255, 0.8);text-align:center;}</style><div class="rpcss-1nyebg4">Blog participatif de la communauté dev</div></a></div></div></div></header><style data-emotion="rpcss a4ric9">.rpcss-a4ric9{background-color:var(--page-slightly-accented-background-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="rpcss-a4ric9"><style data-emotion="rpcss oeugsb">.rpcss-oeugsb{-webkit-animation:500ms ease-out animation-zx73cm;animation:500ms ease-out animation-zx73cm;}</style><div class="rpcss-oeugsb"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1qc2bam">.rpcss-1qc2bam{font-size:42px;font-weight:800;text-align:center;padding-top:40px;line-height:1.2;margin:0;}</style><h1 class="rpcss-1qc2bam">Vers les CSS modules</h1><style data-emotion="rpcss obg2kr">.rpcss-obg2kr{font-size:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:40px;color:var(--page-text-color);-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-obg2kr" href="https://github.com/thibthib"><style data-emotion="rpcss uco8i7">.rpcss-uco8i7{width:32px;height:32px;border-radius:100%;margin-right:10px;}</style><img class="rpcss-uco8i7" alt="thibthib" src="https://avatars.githubusercontent.com/thibthib?size=64"/><div>thibthib<!-- --> <!-- -->•<!-- --> <!-- -->2016/02/23</div></a><style data-emotion="rpcss 15kxmi0">.rpcss-15kxmi0{max-width:640px;width:100%;font-size:18px;margin:0 auto;line-height:1.7;}.rpcss-15kxmi0 h2,.rpcss-15kxmi0 h3,.rpcss-15kxmi0 h4,.rpcss-15kxmi0 h5,.rpcss-15kxmi0 h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-weight:800;line-height:1.2;}.rpcss-15kxmi0 img{max-width:100%;background-color:rgba(255, 255, 255, 0.75);}.rpcss-15kxmi0 code{font-size:0.9em;font-family:PragmataPro,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:1;background-color:var(--code-background-color);margin:0 0.2em;}.rpcss-15kxmi0 pre{padding:10px;overflow-x:auto;font-size:14px;border-radius:10px;border:2px solid var(--one-percent-contrast-color);-webkit-overflow-scrolling:touch;}.rpcss-15kxmi0 pre code{font-size:14px;background-color:transparent;margin:0;}.rpcss-15kxmi0 blockquote{padding-left:20px;margin:0;font-size:16px;border-left:3px solid var(--one-percent-contrast-color);font-style:italic;}.rpcss-15kxmi0 table{width:100%;text-align:center;}.rpcss-15kxmi0 figure{padding:20px 0;}.rpcss-15kxmi0 figcaption{text-align:center;}.rpcss-15kxmi0 a{word-wrap:break-word;}.rpcss-15kxmi0 table thead th{background-color:var(--page-accented-background-color);padding:10px 0;}</style><div class="rpcss-15kxmi0"><blockquote>
<p>Je crois que même avant que je sache exactement ce qu'était le CSS, j'avais
déjà entendu quelqu'un me dire &quot;Je HAIS le CSS&quot;. Cette phrase était souvent
dite par un de mes amis du back-end, et souvent pour de très bonnes raisons.
Cet article n'essaiera pas de défendre ni de vous faire aimer le CSS, mais
comme les outils de développement front-end évoluent rapidement, je trouve
intéressant d'expliquer les nouvelles façons d'écrire le CSS.</p>
</blockquote>
<h2>Retour aux bases</h2>
<p>D'abord, pour comprendre quel sont les problèmes que les nouveaux outils tentent
de résoudre, un petit rappel sur ce qu'est le CSS : <em>Cascading Style Sheets</em> ou
<em>Feuilles de style en cascade</em>.</p>
<p>Une feuille de style ? C'est facile ! C'est un bout de code qui lie des &quot;styles&quot;
à du HTML. En cascade ? Et bien, quelques fois un élément HTML peut correspondre
à plusieurs styles, et &quot;en cascade&quot; est le groupe de règles qui permet de
déterminer lequel appliquer.</p>
<p>Voici du code CSS basique : nous voulons que nos titres h1 soient rouges.</p>
<pre><code class="hljs language-css"><span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<p>Ici, nous lions la <strong><em>règle (ou déclaration)</em></strong> <code>color: red</code> au <strong><em>sélecteur</em></strong>
&quot;h1&quot;. Un sélecteur peut contenir plusieurs règles dans son bloc de déclarations.</p>
<blockquote>
<p>Et les dernières lueurs de bonheur s'éteignent alors que nous entrons dans
l'enfer de la cascade</p>
</blockquote>
<h2>Le truc qui cascade</h2>
<p>La cascade est pour moi un désastre qui rend le CSS très compliqué à maintenir
si on ne suit pas de lignes directrices ou on n'utilise pas d'outils pour
l'écrire. Je vais vous montrer quelques exemples simples pour vous expliquer les
principaux concepts de la cascade, mais gardez en tête que la plupart des
applications web contiennent de nos jours beaucoup de code, aggravant les effets
de la cascade.</p>
<p>La nécessité d'avoir un système comme la cascade vient du fait que le CSS permet
à plusieurs règles de style de s'appliquer à un même élément, ces dernières
pouvant même venir de plusieurs origines (du site, mais aussi du navigateur ou
encore même de l'utilisateur). Il faut donc pouvoir définir dans ce cas-là
quelle est la règle qui au final sera appliquée. Pour cela, la cascade donne à
chacune un poids, calculé selon un certain nombre de critères, et applique la
règle la plus lourde. Cela peut paraitre simple au premier abord, mais les
critères de calcul de poids ne le sont pas du tout.</p>
<p>Les règles qui sont les plus légères dans la cascade ne sont pas vraiment un
problème, mais il faut les connaitre afin de s'éviter des surprises :</p>
<h3>Les valeurs par défaut du navigateur</h3>
<p>Voici le haut de la cascade. Ce sont les règles qui font qu'un titre h1 est gros
même si on ne l'a pas spécifié.</p>
<h3>L'héritage des parents</h3>
<p>Ensuite, les règles sont héritées depuis les éléments HTML parents. Si on
reprend notre élément h1, si une règle <code>color: blue</code> est définie sur l'élément
<code>body</code>, le titre va en hériter, et sera donc bleu.</p>
<p>Ceci étant dit, on entre maintenant dans un niveau plus douloureux de la
cascade.</p>
<h3>L'ordre des règles</h3>
<p>La position d'une règle par rapport aux autres va influer sur son poids. Deux
règles auraient pu avoir le même poids si elles étaient à la même position mais,
au final, c'est la dernière qui sera la plus lourde et sera donc appliquée.
<strong><em>La dernière.</em></strong> Quand il s'agit de code assez simple, cela peut être
facilement compréhensible :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">color</span>: red;
  <span class="hljs-attribute">color</span>: blue;
}
</code></pre>
<p>Facile, n'est-ce pas ? Le titre sera bleu ! Mais s'il y a une règle <code>color: red</code>
dans un fichier CSS nommé <em>foo.css</em>, et une règle <code>color: blue</code> dans un autre
fichier nommé <em>bar.css</em>, que le fichier <em>foo.css</em> met plus de temps que le
fichier <em>bar.css</em> à charger, mais que le tag HTML référençant <em>foo.css</em> est
avant celui de <em>bar.css</em>, quelle règle est appliquée ? Eh bien, c'est plus
compliqué à savoir. <em>(indice : le temps de chargement n'est pas pris en compte)</em></p>
<h3>La spécificité des sélecteurs</h3>
<p>Ce critère est un niveau de complexité au-dessus des autres,
<a href="https://specificity.keegan.st">si bien que des personnes en ont fait des calculettes pour le simplifier</a>.
Je ne vais pas rentrer dans les détails, mais il faut savoir que le poids d'un
sélecteur est égal à la somme des poids de tous les sélecteurs le composant. Et
que tous les sélecteurs n'ont pas le même poids.</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.title</span> {
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-selector-tag">body</span> <span class="hljs-selector-tag">header</span> <span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">color</span>: blue;
}
</code></pre>
<p>Ici, le premier sélecteur pèse 10 parce qu'il contient un sélecteur de classe
CSS, qui pèse lui-même 10. Le deuxième sélecteur quant à lui pèse 3, parce qu'il
contient trois sélecteurs de tag, pesant chacun 1. Et donc, comme 10 &gt; 3, le
titre h1 sera rouge !</p>
<h3>Les styles inline</h3>
<p>Les règles qui sont dans l'attribut “style” d'un élément HTML sont plus lourdes
que n'importe quel sélecteur défini précédemment. Et donc voici un titre bleu :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: blue;&quot;</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
<h3>Importance</h3>
<p>Et enfin le dernier critère, le God Mode, le broyeur de styles, le mot-clé
<strong><em>!important.</em></strong> Quand on veut VRAIMENT que le titre soit rouge :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">color</span>: red <span class="hljs-meta">!important</span>;
}
</code></pre>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: blue;&quot;</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
<p>Et comme toute la cascade est à propos de poids, si deux règles sont marquées
comme !important, le reste des critères est toujours pris en compte pour
calculer laquelle est la plus lourde, et donc appliquée.</p>
<p><strong>…Et on ne peut pas faire plus compliqué que ça.</strong> Maintenant, imaginez des
milliers et des milliers de sélecteurs et règles cascadant les uns sur les
autres pour définir le style d'un site, et vous comprendrez l'enfer que peut
être le CSS. Ainsi, des développeurs CSS ont imaginé différentes méthodologies
et outils pour éviter ce cauchemar !</p>
<h2>L'évolution des outils</h2>
<p>Maintenant, je vais vous présenter comment ma façon d'écrire du CSS a évolué au
fil du temps. Ne vous attendez pas à une chronologie complète de tous les outils
inventés depuis la création du CSS en 1996 (j'avais 6 ans !) mais plutôt une
explication de comment je me suis débrouillé avec la cascade dans ma courte
expérience personnelle.</p>
<h3>Pré-processeurs</h3>
<p>J'ai commencé à developper des applications web en 2012, en plein âge d'or
<a href="/fr/articles/css/preprocesseurs/">des pré-processeurs</a>. Ils étaient apparus
quelques années auparavant, comme le CSS lui-même n'était pas suffisamment
adapté pour construire des sites complexes. Les pré-processeurs sont des
compilateurs qui génèrent du code CSS à partir de languages légèrement
différents, comme <a href="http://sass-lang.com">Sass</a> ou <a href="http://lesscss.org">LESS</a>.
Ces nouveaux languages permettent de créer des variables par exemple, ou
d'imbriquer des sélecteurs, entre autres merveilleuses nouvelles
fonctionnalités.</p>
<p>On peut transformer ce vieux code CSS compliqué à maintenir :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#e5e5e5</span>;
}

<span class="hljs-selector-tag">body</span> <span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333333</span>;
}
</code></pre>
<p>en cette bien <em>meilleure</em> version :</p>
<pre><code class="hljs language-scss"><span class="hljs-variable">$textColor</span>: <span class="hljs-number">#333333</span>;

<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">background</span>: lighten(<span class="hljs-variable">$textColor</span>, <span class="hljs-number">90%</span>);

  <span class="hljs-selector-tag">h1</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-variable">$textColor</span>;
  }
}
</code></pre>
<p>Avec ces nouveaux outils, et pour éviter aux règles d'entrer en collision dans
la cascade, nous avons commencé à imbriquer nos sélecteurs et à répliquer toute
notre structure HTML dans le code de notre pré-processeur favori. Notre CSS se
retrouva donc avec des sélecteurs très long et lourds qui étaient associés
uniquement avec un element HTML précis, comme ce dernier :</p>
<blockquote>
<p>.searchPage .sideBar .refinements.default .category .star input</p>
</blockquote>
<p>Et ça a plutôt bien marché au début ! Mais ces sélecteurs n'étaient pas les plus
performants, et la structure du HTML étant répliquée, n'importe quel changement
dans cette dernière doit être répercuté dans les styles. Donc je suis passé à
autre chose.</p>
<h3>Méthodologies CSS</h3>
<p>À ce moment, quelques nouvelles guidelines CSS ont commencé a attirer mon
attention. On pouvait les utiliser avec les pré-processeurs, et avaient pour but
d'éviter les collisions dans la cascade (tout comme l'imbrication des
sélecteurs) avec un certain nombre de règles, comme sur le nommage des
sélecteurs.</p>
<p>Ces méthodologies sont arrivées au moment ou je commençais à découper mes
développements en composants. L'imbrication des sélecteurs ne marchait pas très
bien avec ces derniers, vu que le but est de créer des bouts de code
réutilisables partout dans la web app, comme un bouton par exemple. La
méthodologie que j'utilise (toujours aujourd'hui) est appelée
<a href="/fr/articles/css/bem/">BEM, pour Block Element Modifier</a>, mais il y en a
d'autres avec le même but : chaque élément HTML de mes composants doit avoir une
classe CSS qui lui est unique. De cette façon, pas besoin d'imbrication, et pas
de collision de la cascade !</p>
<p>Et ce code de pré-processeur :</p>
<pre><code class="hljs language-scss"><span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-variable">$textColor</span> img {
    border: <span class="hljs-number">1px</span> solid black;
  }
}
</code></pre>
<p>se transforme en :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.Title</span> {
  <span class="hljs-attribute">color</span>: $textColor;
}

<span class="hljs-selector-class">.Title-icon</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid black;
}
</code></pre>
<p>Évidement, le code HTML doit être mis à jour avec les nouvelles classes, mais
les sélecteurs sont maintenant courts et compréhensibles. Et ceci, sans aucune
chance de collision de cascade.</p>
<p>Maintenant, pour pouvoir mieux expliquer un dernier outil, celui qui je pense va
résoudre tous nos problèmes, il faut que je vous montre une autre approche pour
contourner les problèmes de la cascade :</p>
<h3>Frameworks CSS</h3>
<p>Ici, pour éviter à nos règles CSS d'entrer en collision, nous… n'en écrivons
plus ! Les frameworks CSS sont des styles déjà écrits qu'on peut utiliser avec
des classes CSS spécifiques. Il y a deux approches ici :</p>
<ul>
<li><p>Les frameworks de styles &quot;finaux&quot; comme <a href="http://getbootstrap.com">Bootstrap</a>.
Il suffit d'ajouter la classe <code>btn</code> sur un élément HTML et… tada ! C'est
maintenant un magnifique bouton. Certaines variables sont modifiables pour
transformer le look global du framework.</p></li>
<li><p>Les frameworks de styles &quot;utilitaires&quot; comme <a href="http://tachyons.io">Tachyons</a>.
Ici, il n'y a pas de styles pré-définis, mais plein de classes utilitaires
sont disponibles, comme <code>pam</code> pour donner un <em>medium padding</em> à un élément, ou
encore <code>ba</code> pour lui donner une <em>border all</em> tout autour.</p></li>
</ul>
<p>Les frameworks utilitaires sont assez intéressants, du fait que le fichier CSS
final fera autour de 10kB et jamais plus, même si le site grandit ! Mais il y
aura beaucoup de classes peu compréhensibles dans le code HTML. C'est comparable
aux styles inline, avec une optimization de poids final, comme <code>ba</code> est plus
court que <em>“border-style: solid; border-width: 1px;”</em></p>
<p>Ces frameworks nous évitent tout tracas avec la cascade ! Mais je n'aimais pas
le fait d'utiliser un framework, ainsi qu'avoir beaucoup de classes non
compréhensibles dans mon code HTML. Cependant, la totale réutilisabilité et
modularité des styles, sans problèmes de cascade, sont impressionnants.</p>
<p>Cela nous amène donc à cet outil génial, forgé directement avec la meilleure
magie JavaScript :</p>
<h3>CSS Modules</h3>
<p>Ce concept a d'abord pris forme suite à une simple observation : de nos jours,
le CSS est compilé à partir d'autres languages pour permettre une écriture plus
facile, et pour cette même raison le HTML est aussi généré grâce à des outils de
templating en JavaScript. Mais les sélecteurs CSS, le lien entre les éléments et
les styles, ceux-la même auxquels le codeur doit faire très attention pour
éviter qu'ils n'entrent en collision, n'ont pas d'outils du tout.</p>
<p>Et <a href="https://github.com/css-modules/css-modules">CSS Modules</a> fut créé. La
première fonctionnalité intéressante est la génération automatique des noms de
classes CSS. Plus d'inquiétude sur leur unicité, on peut les nommer comme on
veut, au final ceux générés dans le HTML seront uniques. Promis. Cela nous
permet de réécrire ce code CSS en BEM, et HTML :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.Title</span> {
  <span class="hljs-attribute">color</span>: $textColor;
}
</code></pre>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;Title&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
<p>en ce code CSS et template JavaScript :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.styleName</span> {
  <span class="hljs-attribute">color</span>: $textColor;
}
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./style.css&quot;</span>;
<span class="hljs-string">`&lt;h1 class=<span class="hljs-subst">${styles.styleName}</span>&gt;&lt;/h1&gt;`</span>;
</code></pre>
<p>Une fois compilé, ce code générera quelque chose comme ça :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.styleName__abc5436</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333333</span>;
}
</code></pre>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;styleName__abc5436&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
<p>Une casc-quoi ? Je ne sais pas ce que c'est ! ❤️</p>
<p>La deuxième fonctionnalité géniale, directement inspirée par les frameworks CSS
modulaires comme Tachyons, est la composition des styles. De la même façon qu'en
ajoutant plusieurs classes utilitaires sur son élément HTML, CSS Modules nous
permet de composer nos classes à partir de styles communs. Laissez-moi vous
montrer :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.titleColor</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333333</span>;
}

<span class="hljs-selector-class">.bigTitle</span> {
  <span class="hljs-attribute">composes</span>: titleColor;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
}

<span class="hljs-selector-class">.mediumTitle</span> {
  <span class="hljs-attribute">composes</span>: titleColor;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
}
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./style.css&quot;</span>;
<span class="hljs-string">`&lt;h1 class=<span class="hljs-subst">${styles.bigTitle}</span>&gt;&lt;/h1&gt;
 &lt;h2 class=<span class="hljs-subst">${styles.mediumTitle}</span>&gt;&lt;/h2&gt;`</span>;
</code></pre>
<p>va générer :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.titleColor__abc5436</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333333</span>;
}

<span class="hljs-selector-class">.bigTitle__def6547</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
}

<span class="hljs-selector-class">.mediumTitle__1638bcd</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
}
</code></pre>
<pre><code class="hljs language-js">&lt;h1 <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;titleColor__abc5436 bigTitle__def6547&quot;</span>&gt;&lt;/h1&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;titleColor__abc5436 mediumTitle__1638bcd&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>
</code></pre>
<p>Et ceci, messieurs-dames, est plutôt fantastique. Les styles sont modularisables
et composables, et ce sans classes incompréhensibles mais directement dans les
feuilles de style. Et les collisions de sélecteurs et règles ne sont plus qu'un
mauvais souvenir.</p>
<p>Et c'est ainsi que j'ai expérimenté avec le CSS et sa cascade jusque-là.
J'espère que les mois et les années à venir vont me surprendre avec de meilleurs
outils et / ou méthodologies, et je serais heureux de les apprendre et les
essayer 👍</p>
</div><style data-emotion="rpcss unyj6i">.rpcss-unyj6i{max-width:640px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:20px auto;padding:20px;background-color:var(--page-background-color);border-radius:10px;box-shadow:0 15px 15px -5px rgba(0, 0, 0, 0.2);}@media (max-width: 540px){.rpcss-unyj6i{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-unyj6i"><style data-emotion="rpcss ty7r4z">.rpcss-ty7r4z{font-weight:800;}</style><div class="rpcss-ty7r4z">Vous avez aimé cet article?</div><style data-emotion="rpcss klacsp">.rpcss-klacsp{width:0;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-klacsp"></div><style data-emotion="rpcss 1pkr03v">.rpcss-1pkr03v{background-color:#00aced;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:800;}.rpcss-1pkr03v:active{opacity:0.5;}</style><a class="rpcss-1pkr03v" href="https://www.twitter.com/intent/tweet?text=Vers%20les%20CSS%20modules%20sur%20%40PutainDeCode%20https%3A%2F%2Fputaindecode.io%2Farticles%2Fvers-les-css-modules" target="_blank">Le partager sur Twitter</a></div><style data-emotion="rpcss x4iqxe">.rpcss-x4iqxe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;padding:20px;}</style><div class="rpcss-x4iqxe"><style data-emotion="rpcss gein6x">.rpcss-gein6x{font-size:20px;-webkit-text-decoration:none;text-decoration:none;color:#1E49B5;}</style><a class="rpcss-gein6x" href="/articles">← Articles</a></div><style data-emotion="rpcss 8bodgl">.rpcss-8bodgl{max-width:640px;width:100%;margin:0 auto;padding:20px 0;}</style><div class="rpcss-8bodgl" id="disqus_thread"></div></div></div></div></div><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1vau6rl">.rpcss-1vau6rl{margin:20px 0;background-color:var(--page-accented-background-color);border-radius:10px;padding:20px;}</style><div class="rpcss-1vau6rl"><style data-emotion="rpcss 1gz1i1h">.rpcss-1gz1i1h{font-size:32px;font-weight:800;margin-bottom:20px;text-align:center;}</style><div aria-level="2" class="rpcss-1gz1i1h" role="heading">Ne rien rater</div><style data-emotion="rpcss 1wbispj">.rpcss-1wbispj{font-size:18px;margin-bottom:10px;text-align:center;}</style><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur les réseaux</div><style data-emotion="rpcss 1hyoz7m">.rpcss-1hyoz7m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="rpcss-1hyoz7m"><a href="https://twitter.com/PutainDeCode"><img alt="Twitter" height="48" src="/public/images/website/twitter.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://facebook.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/facebook.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://github.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/github.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://itunes.apple.com/fr/podcast/putain-de-code-!/id1185311825"><img alt="Apple Podcast" height="48" src="/public/images/website/apple-podcast.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://soundcloud.com/putaindecode"><img alt="Soundcloud" height="48" src="/public/images/website/soundcloud.svg" width="48"/></a></div><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur le chat</div><div class="rpcss-1hyoz7m"><a href="https://discord.gg/jtbGNNc"><img alt="Discord" height="48" src="/public/images/website/discord.svg" width="48"/></a></div></div></div></div><style data-emotion="rpcss zs8kw7">.rpcss-zs8kw7{background-color:#222;padding:20px 0;}</style><footer class="rpcss-zs8kw7"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 79elbk">.rpcss-79elbk{position:relative;}</style><div class="rpcss-79elbk"><style data-emotion="rpcss 1hle0ni">.rpcss-1hle0ni{position:absolute;left:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1hle0ni" href="/api/articles/feeds/desc/feed.xml"><style data-emotion="rpcss lvyu5j">.rpcss-lvyu5j{margin-right:10px;}</style><img class="rpcss-lvyu5j" alt="Flux RSS" height="16" src="/public/images/website/rss-feed.svg" width="16"/><style data-emotion="rpcss um3i31">@media (max-width: 400px){.rpcss-um3i31{display:none;}}</style><div class="rpcss-um3i31">Flux RSS</div></a><style data-emotion="rpcss 12cp4l7">.rpcss-12cp4l7{color:rgba(255, 255, 255, 0.5);text-align:center;font-size:14px;}</style><div class="rpcss-12cp4l7">© 2021 Putain de code !</div><style data-emotion="rpcss 1w98uy3">.rpcss-1w98uy3{position:absolute;right:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1w98uy3" href="https://github.com/putaindecode/putaindecode.io">GitHub</a></div></div></div></footer></div><script id="initialData" type="text/data">{"lists":{"RE_PRIVATE_NONE":true},"items":{"k":"articles","v":{"k":"vers-les-css-modules","v":{"_0":{"TAG":0,"_0":{"slug":"vers-les-css-modules","filename":"2016-02-23-vers-les-css-modules","title":"Vers les CSS modules","date":"Tue, 23 Feb 2016 00:00:00 GMT","draft":false,"meta":{"date":"2016-02-23T00:00:00.000Z","title":"Vers les CSS modules","author":"thibthib","oldSlug":"css/modules","slug":"vers-les-css-modules"},"body":"<blockquote>\n<p>Je crois que même avant que je sache exactement ce qu'était le CSS, j'avais\ndéjà entendu quelqu'un me dire &quot;Je HAIS le CSS&quot;. Cette phrase était souvent\ndite par un de mes amis du back-end, et souvent pour de très bonnes raisons.\nCet article n'essaiera pas de défendre ni de vous faire aimer le CSS, mais\ncomme les outils de développement front-end évoluent rapidement, je trouve\nintéressant d'expliquer les nouvelles façons d'écrire le CSS.</p>\n</blockquote>\n<h2>Retour aux bases</h2>\n<p>D'abord, pour comprendre quel sont les problèmes que les nouveaux outils tentent\nde résoudre, un petit rappel sur ce qu'est le CSS : <em>Cascading Style Sheets</em> ou\n<em>Feuilles de style en cascade</em>.</p>\n<p>Une feuille de style ? C'est facile ! C'est un bout de code qui lie des &quot;styles&quot;\nà du HTML. En cascade ? Et bien, quelques fois un élément HTML peut correspondre\nà plusieurs styles, et &quot;en cascade&quot; est le groupe de règles qui permet de\ndéterminer lequel appliquer.</p>\n<p>Voici du code CSS basique : nous voulons que nos titres h1 soient rouges.</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">h1</span> {\n  <span class=\"hljs-attribute\">color</span>: red;\n}\n</code></pre>\n<p>Ici, nous lions la <strong><em>règle (ou déclaration)</em></strong> <code>color: red</code> au <strong><em>sélecteur</em></strong>\n&quot;h1&quot;. Un sélecteur peut contenir plusieurs règles dans son bloc de déclarations.</p>\n<blockquote>\n<p>Et les dernières lueurs de bonheur s'éteignent alors que nous entrons dans\nl'enfer de la cascade</p>\n</blockquote>\n<h2>Le truc qui cascade</h2>\n<p>La cascade est pour moi un désastre qui rend le CSS très compliqué à maintenir\nsi on ne suit pas de lignes directrices ou on n'utilise pas d'outils pour\nl'écrire. Je vais vous montrer quelques exemples simples pour vous expliquer les\nprincipaux concepts de la cascade, mais gardez en tête que la plupart des\napplications web contiennent de nos jours beaucoup de code, aggravant les effets\nde la cascade.</p>\n<p>La nécessité d'avoir un système comme la cascade vient du fait que le CSS permet\nà plusieurs règles de style de s'appliquer à un même élément, ces dernières\npouvant même venir de plusieurs origines (du site, mais aussi du navigateur ou\nencore même de l'utilisateur). Il faut donc pouvoir définir dans ce cas-là\nquelle est la règle qui au final sera appliquée. Pour cela, la cascade donne à\nchacune un poids, calculé selon un certain nombre de critères, et applique la\nrègle la plus lourde. Cela peut paraitre simple au premier abord, mais les\ncritères de calcul de poids ne le sont pas du tout.</p>\n<p>Les règles qui sont les plus légères dans la cascade ne sont pas vraiment un\nproblème, mais il faut les connaitre afin de s'éviter des surprises :</p>\n<h3>Les valeurs par défaut du navigateur</h3>\n<p>Voici le haut de la cascade. Ce sont les règles qui font qu'un titre h1 est gros\nmême si on ne l'a pas spécifié.</p>\n<h3>L'héritage des parents</h3>\n<p>Ensuite, les règles sont héritées depuis les éléments HTML parents. Si on\nreprend notre élément h1, si une règle <code>color: blue</code> est définie sur l'élément\n<code>body</code>, le titre va en hériter, et sera donc bleu.</p>\n<p>Ceci étant dit, on entre maintenant dans un niveau plus douloureux de la\ncascade.</p>\n<h3>L'ordre des règles</h3>\n<p>La position d'une règle par rapport aux autres va influer sur son poids. Deux\nrègles auraient pu avoir le même poids si elles étaient à la même position mais,\nau final, c'est la dernière qui sera la plus lourde et sera donc appliquée.\n<strong><em>La dernière.</em></strong> Quand il s'agit de code assez simple, cela peut être\nfacilement compréhensible :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">h1</span> {\n  <span class=\"hljs-attribute\">color</span>: red;\n  <span class=\"hljs-attribute\">color</span>: blue;\n}\n</code></pre>\n<p>Facile, n'est-ce pas ? Le titre sera bleu ! Mais s'il y a une règle <code>color: red</code>\ndans un fichier CSS nommé <em>foo.css</em>, et une règle <code>color: blue</code> dans un autre\nfichier nommé <em>bar.css</em>, que le fichier <em>foo.css</em> met plus de temps que le\nfichier <em>bar.css</em> à charger, mais que le tag HTML référençant <em>foo.css</em> est\navant celui de <em>bar.css</em>, quelle règle est appliquée ? Eh bien, c'est plus\ncompliqué à savoir. <em>(indice : le temps de chargement n'est pas pris en compte)</em></p>\n<h3>La spécificité des sélecteurs</h3>\n<p>Ce critère est un niveau de complexité au-dessus des autres,\n<a href=\"https://specificity.keegan.st\">si bien que des personnes en ont fait des calculettes pour le simplifier</a>.\nJe ne vais pas rentrer dans les détails, mais il faut savoir que le poids d'un\nsélecteur est égal à la somme des poids de tous les sélecteurs le composant. Et\nque tous les sélecteurs n'ont pas le même poids.</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.title</span> {\n  <span class=\"hljs-attribute\">color</span>: red;\n}\n\n<span class=\"hljs-selector-tag\">body</span> <span class=\"hljs-selector-tag\">header</span> <span class=\"hljs-selector-tag\">h1</span> {\n  <span class=\"hljs-attribute\">color</span>: blue;\n}\n</code></pre>\n<p>Ici, le premier sélecteur pèse 10 parce qu'il contient un sélecteur de classe\nCSS, qui pèse lui-même 10. Le deuxième sélecteur quant à lui pèse 3, parce qu'il\ncontient trois sélecteurs de tag, pesant chacun 1. Et donc, comme 10 &gt; 3, le\ntitre h1 sera rouge !</p>\n<h3>Les styles inline</h3>\n<p>Les règles qui sont dans l'attribut “style” d'un élément HTML sont plus lourdes\nque n'importe quel sélecteur défini précédemment. Et donc voici un titre bleu :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">h1</span> {\n  <span class=\"hljs-attribute\">color</span>: red;\n}\n</code></pre>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;color: blue;&quot;</span>&gt;</span>Title<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n</code></pre>\n<h3>Importance</h3>\n<p>Et enfin le dernier critère, le God Mode, le broyeur de styles, le mot-clé\n<strong><em>!important.</em></strong> Quand on veut VRAIMENT que le titre soit rouge :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">h1</span> {\n  <span class=\"hljs-attribute\">color</span>: red <span class=\"hljs-meta\">!important</span>;\n}\n</code></pre>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;color: blue;&quot;</span>&gt;</span>Title<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n</code></pre>\n<p>Et comme toute la cascade est à propos de poids, si deux règles sont marquées\ncomme !important, le reste des critères est toujours pris en compte pour\ncalculer laquelle est la plus lourde, et donc appliquée.</p>\n<p><strong>…Et on ne peut pas faire plus compliqué que ça.</strong> Maintenant, imaginez des\nmilliers et des milliers de sélecteurs et règles cascadant les uns sur les\nautres pour définir le style d'un site, et vous comprendrez l'enfer que peut\nêtre le CSS. Ainsi, des développeurs CSS ont imaginé différentes méthodologies\net outils pour éviter ce cauchemar !</p>\n<h2>L'évolution des outils</h2>\n<p>Maintenant, je vais vous présenter comment ma façon d'écrire du CSS a évolué au\nfil du temps. Ne vous attendez pas à une chronologie complète de tous les outils\ninventés depuis la création du CSS en 1996 (j'avais 6 ans !) mais plutôt une\nexplication de comment je me suis débrouillé avec la cascade dans ma courte\nexpérience personnelle.</p>\n<h3>Pré-processeurs</h3>\n<p>J'ai commencé à developper des applications web en 2012, en plein âge d'or\n<a href=\"/fr/articles/css/preprocesseurs/\">des pré-processeurs</a>. Ils étaient apparus\nquelques années auparavant, comme le CSS lui-même n'était pas suffisamment\nadapté pour construire des sites complexes. Les pré-processeurs sont des\ncompilateurs qui génèrent du code CSS à partir de languages légèrement\ndifférents, comme <a href=\"http://sass-lang.com\">Sass</a> ou <a href=\"http://lesscss.org\">LESS</a>.\nCes nouveaux languages permettent de créer des variables par exemple, ou\nd'imbriquer des sélecteurs, entre autres merveilleuses nouvelles\nfonctionnalités.</p>\n<p>On peut transformer ce vieux code CSS compliqué à maintenir :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-tag\">body</span> {\n  <span class=\"hljs-attribute\">background</span>: <span class=\"hljs-number\">#e5e5e5</span>;\n}\n\n<span class=\"hljs-selector-tag\">body</span> <span class=\"hljs-selector-tag\">h1</span> {\n  <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#333333</span>;\n}\n</code></pre>\n<p>en cette bien <em>meilleure</em> version :</p>\n<pre><code class=\"hljs language-scss\"><span class=\"hljs-variable\">$textColor</span>: <span class=\"hljs-number\">#333333</span>;\n\n<span class=\"hljs-selector-tag\">body</span> {\n  <span class=\"hljs-attribute\">background</span>: lighten(<span class=\"hljs-variable\">$textColor</span>, <span class=\"hljs-number\">90%</span>);\n\n  <span class=\"hljs-selector-tag\">h1</span> {\n    <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-variable\">$textColor</span>;\n  }\n}\n</code></pre>\n<p>Avec ces nouveaux outils, et pour éviter aux règles d'entrer en collision dans\nla cascade, nous avons commencé à imbriquer nos sélecteurs et à répliquer toute\nnotre structure HTML dans le code de notre pré-processeur favori. Notre CSS se\nretrouva donc avec des sélecteurs très long et lourds qui étaient associés\nuniquement avec un element HTML précis, comme ce dernier :</p>\n<blockquote>\n<p>.searchPage .sideBar .refinements.default .category .star input</p>\n</blockquote>\n<p>Et ça a plutôt bien marché au début ! Mais ces sélecteurs n'étaient pas les plus\nperformants, et la structure du HTML étant répliquée, n'importe quel changement\ndans cette dernière doit être répercuté dans les styles. Donc je suis passé à\nautre chose.</p>\n<h3>Méthodologies CSS</h3>\n<p>À ce moment, quelques nouvelles guidelines CSS ont commencé a attirer mon\nattention. On pouvait les utiliser avec les pré-processeurs, et avaient pour but\nd'éviter les collisions dans la cascade (tout comme l'imbrication des\nsélecteurs) avec un certain nombre de règles, comme sur le nommage des\nsélecteurs.</p>\n<p>Ces méthodologies sont arrivées au moment ou je commençais à découper mes\ndéveloppements en composants. L'imbrication des sélecteurs ne marchait pas très\nbien avec ces derniers, vu que le but est de créer des bouts de code\nréutilisables partout dans la web app, comme un bouton par exemple. La\nméthodologie que j'utilise (toujours aujourd'hui) est appelée\n<a href=\"/fr/articles/css/bem/\">BEM, pour Block Element Modifier</a>, mais il y en a\nd'autres avec le même but : chaque élément HTML de mes composants doit avoir une\nclasse CSS qui lui est unique. De cette façon, pas besoin d'imbrication, et pas\nde collision de la cascade !</p>\n<p>Et ce code de pré-processeur :</p>\n<pre><code class=\"hljs language-scss\"><span class=\"hljs-selector-tag\">h1</span> {\n  <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-variable\">$textColor</span> img {\n    border: <span class=\"hljs-number\">1px</span> solid black;\n  }\n}\n</code></pre>\n<p>se transforme en :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.Title</span> {\n  <span class=\"hljs-attribute\">color</span>: $textColor;\n}\n\n<span class=\"hljs-selector-class\">.Title-icon</span> {\n  <span class=\"hljs-attribute\">border</span>: <span class=\"hljs-number\">1px</span> solid black;\n}\n</code></pre>\n<p>Évidement, le code HTML doit être mis à jour avec les nouvelles classes, mais\nles sélecteurs sont maintenant courts et compréhensibles. Et ceci, sans aucune\nchance de collision de cascade.</p>\n<p>Maintenant, pour pouvoir mieux expliquer un dernier outil, celui qui je pense va\nrésoudre tous nos problèmes, il faut que je vous montre une autre approche pour\ncontourner les problèmes de la cascade :</p>\n<h3>Frameworks CSS</h3>\n<p>Ici, pour éviter à nos règles CSS d'entrer en collision, nous… n'en écrivons\nplus ! Les frameworks CSS sont des styles déjà écrits qu'on peut utiliser avec\ndes classes CSS spécifiques. Il y a deux approches ici :</p>\n<ul>\n<li><p>Les frameworks de styles &quot;finaux&quot; comme <a href=\"http://getbootstrap.com\">Bootstrap</a>.\nIl suffit d'ajouter la classe <code>btn</code> sur un élément HTML et… tada ! C'est\nmaintenant un magnifique bouton. Certaines variables sont modifiables pour\ntransformer le look global du framework.</p></li>\n<li><p>Les frameworks de styles &quot;utilitaires&quot; comme <a href=\"http://tachyons.io\">Tachyons</a>.\nIci, il n'y a pas de styles pré-définis, mais plein de classes utilitaires\nsont disponibles, comme <code>pam</code> pour donner un <em>medium padding</em> à un élément, ou\nencore <code>ba</code> pour lui donner une <em>border all</em> tout autour.</p></li>\n</ul>\n<p>Les frameworks utilitaires sont assez intéressants, du fait que le fichier CSS\nfinal fera autour de 10kB et jamais plus, même si le site grandit ! Mais il y\naura beaucoup de classes peu compréhensibles dans le code HTML. C'est comparable\naux styles inline, avec une optimization de poids final, comme <code>ba</code> est plus\ncourt que <em>“border-style: solid; border-width: 1px;”</em></p>\n<p>Ces frameworks nous évitent tout tracas avec la cascade ! Mais je n'aimais pas\nle fait d'utiliser un framework, ainsi qu'avoir beaucoup de classes non\ncompréhensibles dans mon code HTML. Cependant, la totale réutilisabilité et\nmodularité des styles, sans problèmes de cascade, sont impressionnants.</p>\n<p>Cela nous amène donc à cet outil génial, forgé directement avec la meilleure\nmagie JavaScript :</p>\n<h3>CSS Modules</h3>\n<p>Ce concept a d'abord pris forme suite à une simple observation : de nos jours,\nle CSS est compilé à partir d'autres languages pour permettre une écriture plus\nfacile, et pour cette même raison le HTML est aussi généré grâce à des outils de\ntemplating en JavaScript. Mais les sélecteurs CSS, le lien entre les éléments et\nles styles, ceux-la même auxquels le codeur doit faire très attention pour\néviter qu'ils n'entrent en collision, n'ont pas d'outils du tout.</p>\n<p>Et <a href=\"https://github.com/css-modules/css-modules\">CSS Modules</a> fut créé. La\npremière fonctionnalité intéressante est la génération automatique des noms de\nclasses CSS. Plus d'inquiétude sur leur unicité, on peut les nommer comme on\nveut, au final ceux générés dans le HTML seront uniques. Promis. Cela nous\npermet de réécrire ce code CSS en BEM, et HTML :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.Title</span> {\n  <span class=\"hljs-attribute\">color</span>: $textColor;\n}\n</code></pre>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;Title&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n</code></pre>\n<p>en ce code CSS et template JavaScript :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.styleName</span> {\n  <span class=\"hljs-attribute\">color</span>: $textColor;\n}\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> styles <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./style.css&quot;</span>;\n<span class=\"hljs-string\">`&lt;h1 class=<span class=\"hljs-subst\">${styles.styleName}</span>&gt;&lt;/h1&gt;`</span>;\n</code></pre>\n<p>Une fois compilé, ce code générera quelque chose comme ça :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.styleName__abc5436</span> {\n  <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#333333</span>;\n}\n</code></pre>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;styleName__abc5436&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n</code></pre>\n<p>Une casc-quoi ? Je ne sais pas ce que c'est ! ❤️</p>\n<p>La deuxième fonctionnalité géniale, directement inspirée par les frameworks CSS\nmodulaires comme Tachyons, est la composition des styles. De la même façon qu'en\najoutant plusieurs classes utilitaires sur son élément HTML, CSS Modules nous\npermet de composer nos classes à partir de styles communs. Laissez-moi vous\nmontrer :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.titleColor</span> {\n  <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#333333</span>;\n}\n\n<span class=\"hljs-selector-class\">.bigTitle</span> {\n  <span class=\"hljs-attribute\">composes</span>: titleColor;\n  <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">24px</span>;\n}\n\n<span class=\"hljs-selector-class\">.mediumTitle</span> {\n  <span class=\"hljs-attribute\">composes</span>: titleColor;\n  <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">16px</span>;\n}\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> styles <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./style.css&quot;</span>;\n<span class=\"hljs-string\">`&lt;h1 class=<span class=\"hljs-subst\">${styles.bigTitle}</span>&gt;&lt;/h1&gt;\n &lt;h2 class=<span class=\"hljs-subst\">${styles.mediumTitle}</span>&gt;&lt;/h2&gt;`</span>;\n</code></pre>\n<p>va générer :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.titleColor__abc5436</span> {\n  <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#333333</span>;\n}\n\n<span class=\"hljs-selector-class\">.bigTitle__def6547</span> {\n  <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">24px</span>;\n}\n\n<span class=\"hljs-selector-class\">.mediumTitle__1638bcd</span> {\n  <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">16px</span>;\n}\n</code></pre>\n<pre><code class=\"hljs language-js\">&lt;h1 <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span></span>=<span class=\"hljs-string\">&quot;titleColor__abc5436 bigTitle__def6547&quot;</span>&gt;&lt;/h1&gt;\n<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;titleColor__abc5436 mediumTitle__1638bcd&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span></span>\n</code></pre>\n<p>Et ceci, messieurs-dames, est plutôt fantastique. Les styles sont modularisables\net composables, et ce sans classes incompréhensibles mais directement dans les\nfeuilles de style. Et les collisions de sélecteurs et règles ne sont plus qu'un\nmauvais souvenir.</p>\n<p>Et c'est ainsi que j'ai expérimenté avec le CSS et sa cascade jusque-là.\nJ'espère que les mois et les années à venir vont me surprendre avec de meilleurs\noutils et / ou méthodologies, et je serais heureux de les apprendre et les\nessayer 👍</p>\n"}}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"listsRequests":{"data":{"RE_PRIVATE_NONE":true}},"itemsRequests":{"data":{"RE_PRIVATE_NONE":true}}}</script><head><script defer="defer" src="/public/main.56c69761a03eb0112696.js"></script></head></html>