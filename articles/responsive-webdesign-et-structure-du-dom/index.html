<!DOCTYPE html><html lang="fr"><head><title data-react-helmet="true">Responsive webdesign et structure du DOM | Putain de code</title><meta data-react-helmet="true" charset="UTF-8"/><meta data-react-helmet="true" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" name="viewport"/><meta data-react-helmet="true" content="summary_large_image" name="twitter:card"/><meta data-react-helmet="true" content="Putain de code !" property="og:site_name"/><meta data-react-helmet="true" content="@putaindecode" name="twitter:site"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" property="og:image"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" name="twitter:image"/><meta data-react-helmet="true" content="1500" property="og:image:width"/><meta data-react-helmet="true" content="777" property="og:image:height"/><meta data-react-helmet="true" content="Responsive webdesign et structure du DOM | Putain de code" property="og:title"/><meta data-react-helmet="true" content="Responsive webdesign et structure du DOM | Putain de code" name="twitter:title"/><meta data-react-helmet="true" content="Un article proposé par neemzy" name="description"/><link data-react-helmet="true" title="RSS Feed" href="/api/articles/feeds/desc/feed.xml" rel="alternate" type="application/rss+xml"/><link data-react-helmet="true" href="/favicon.ico" rel="shortcut icon"/><link data-react-helmet="true" href="https://putaindecode.io/articles/responsive-webdesign-et-structure-du-dom" rel="canonical"/><script>window.PAGES_BOOT_MODE="hydrate";</script></head><div id="root"><style data-emotion="rpcss zx73cm 1lc6tyj 28v1b4">@-webkit-keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}@keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}:root{--page-background-color:#fff;--page-slightly-accented-background-color:#F9F6F6;--page-accented-background-color:#E4EBEE;--page-text-color:#46515B;--link-text-color:#E51D58;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#FAF3E1;--one-percent-contrast-color:rgba(0, 0, 0, 0.1);--half-percent-contrast-color:rgba(0, 0, 0, 0.05);}@media (prefers-color-scheme: dark){:root{--page-background-color:#222;--page-slightly-accented-background-color:#171717;--page-accented-background-color:#111;--page-text-color:#ddd;--link-text-color:#F87098;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#4F3804;--one-percent-contrast-color:rgba(255, 255, 255, 0.1);--half-percent-contrast-color:rgba(255, 255, 255, 0.05);}}body{padding:0;margin:0;background-color:var(--page-background-color);color:var(--page-text-color);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;overflow-x:hidden;}html{font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}a{color:var(--link-text-color);-webkit-text-decoration:underline;text-decoration:underline;}a:hover{-webkit-text-decoration:none;text-decoration:none;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}*,*:before,*:after{box-sizing:border-box;}pre,.hljs{color:#adbac7;background:#22272e;}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067;}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb;}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#6cb6ff;}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#96d0ff;}.hljs-built_in,.hljs-symbol{color:#f69d50;}.hljs-comment,.hljs-code,.hljs-formula{color:#768390;}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#8ddb8c;}.hljs-subst{color:#adbac7;}.hljs-section{color:#316dca;font-weight:bold;}.hljs-bullet{color:#eac55f;}.hljs-emphasis{color:#adbac7;font-style:italic;}.hljs-strong{color:#adbac7;font-weight:bold;}.hljs-addition{color:#b4f1b4;background-color:#1b4721;}.hljs-deletion{color:#ffd8d3;background-color:#78191b;}</style><style data-emotion="rpcss 9vhaby">.rpcss-9vhaby{background-color:var(--gradient-red-bottom);background-image:linear-gradient(to bottom right, var(--gradient-red-top), var(--gradient-red-bottom));}</style><header class="rpcss-9vhaby" style="background-image:linear-gradient(to bottom right, hsl(224, 100%, 35%), hsl(187, 100%, 30%))"><style data-emotion="rpcss 1qqk0tr">.rpcss-1qqk0tr{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}</style><div class="rpcss-1qqk0tr"><style data-emotion="rpcss qx7dny">.rpcss-qx7dny{width:100%;max-width:1024px;margin:0 auto;padding:0 10px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="rpcss-qx7dny"><style data-emotion="rpcss 7s9om2">.rpcss-7s9om2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:20px 0 50px;}</style><div class="rpcss-7s9om2"><style data-emotion="rpcss gdpa5c">.rpcss-gdpa5c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-gdpa5c" href="/"><style data-emotion="rpcss 1lm4738">.rpcss-1lm4738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;padding-bottom:10px;}</style><div class="rpcss-1lm4738"><style data-emotion="rpcss 13o7eu2">.rpcss-13o7eu2{display:block;}</style><svg class="rpcss-13o7eu2" height="36px" width="36px" viewBox="0 0 36 36"><defs><linearGradient id="PutainDeCodeLogoGradient" x1="50%" x2="50%" y1="0%" y2="127.223881%"><stop offset="0%" stop-color="#E41D57"></stop><stop offset="100%" stop-color="#C60000"></stop></linearGradient></defs><circle cx="18" cy="18" fill="url(#PutainDeCodeLogoGradient)" r="17" stroke="#FFFFFF" stroke-width="2"></circle><polygon fill="#FFFFFF" points="15.9033203 18.2246094 15.9033203 18.3710938 11.2304688 20.5317383 11.2304688 22.8095703 18.0566406 19.184082 18.0566406 17.4116211 11.2304688 13.7788086 11.2304688 16.0639648"></polygon><rect height="14" width="2" fill="#FFFFFF" x="22" y="11"><animate attributeName="opacity" begin="100ms" calcMode="discrete" dur="2s" repeatCount="indefinite" values="1;0"></animate></rect></svg><style data-emotion="rpcss 4cf197">.rpcss-4cf197{width:10px;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-4cf197"></div><style data-emotion="rpcss u5k24">.rpcss-u5k24{font-size:22px;color:#fff;font-weight:800;}</style><div aria-level="2" class="rpcss-u5k24" role="heading">Putain de code !</div></div><style data-emotion="rpcss 1nyebg4">.rpcss-1nyebg4{font-size:14px;color:rgba(255, 255, 255, 0.8);text-align:center;}</style><div class="rpcss-1nyebg4">Blog participatif de la communauté dev</div></a></div></div></div></header><style data-emotion="rpcss a4ric9">.rpcss-a4ric9{background-color:var(--page-slightly-accented-background-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="rpcss-a4ric9"><style data-emotion="rpcss oeugsb">.rpcss-oeugsb{-webkit-animation:500ms ease-out animation-zx73cm;animation:500ms ease-out animation-zx73cm;}</style><div class="rpcss-oeugsb"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1qc2bam">.rpcss-1qc2bam{font-size:42px;font-weight:800;text-align:center;padding-top:40px;line-height:1.2;margin:0;}</style><h1 class="rpcss-1qc2bam">Responsive webdesign et structure du DOM</h1><style data-emotion="rpcss obg2kr">.rpcss-obg2kr{font-size:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:40px;color:var(--page-text-color);-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-obg2kr" href="https://github.com/neemzy"><style data-emotion="rpcss uco8i7">.rpcss-uco8i7{width:32px;height:32px;border-radius:100%;margin-right:10px;}</style><img class="rpcss-uco8i7" alt="neemzy" src="https://avatars.githubusercontent.com/neemzy?size=64"/><div>neemzy<!-- --> <!-- -->•<!-- --> <!-- -->2013/12/26</div></a><style data-emotion="rpcss 15kxmi0">.rpcss-15kxmi0{max-width:640px;width:100%;font-size:18px;margin:0 auto;line-height:1.7;}.rpcss-15kxmi0 h2,.rpcss-15kxmi0 h3,.rpcss-15kxmi0 h4,.rpcss-15kxmi0 h5,.rpcss-15kxmi0 h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-weight:800;line-height:1.2;}.rpcss-15kxmi0 img{max-width:100%;background-color:rgba(255, 255, 255, 0.75);}.rpcss-15kxmi0 code{font-size:0.9em;font-family:PragmataPro,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:1;background-color:var(--code-background-color);margin:0 0.2em;}.rpcss-15kxmi0 pre{padding:10px;overflow-x:auto;font-size:14px;border-radius:10px;border:2px solid var(--one-percent-contrast-color);-webkit-overflow-scrolling:touch;}.rpcss-15kxmi0 pre code{font-size:14px;background-color:transparent;margin:0;}.rpcss-15kxmi0 blockquote{padding-left:20px;margin:0;font-size:16px;border-left:3px solid var(--one-percent-contrast-color);font-style:italic;}.rpcss-15kxmi0 table{width:100%;text-align:center;}.rpcss-15kxmi0 figure{padding:20px 0;}.rpcss-15kxmi0 figcaption{text-align:center;}.rpcss-15kxmi0 a{word-wrap:break-word;}.rpcss-15kxmi0 table thead th{background-color:var(--page-accented-background-color);padding:10px 0;}</style><div class="rpcss-15kxmi0"><p>Bien, commençons par le commencement, si tu veux bien. Le <strong>responsive
webdesign</strong>, ça te dit quelque chose ? Oui ? Bon. Dans ce cas, tu as peut-être
comme moi déjà été confronté à un cas de figure plutôt ennuyeux. Que tu sois
adepte du <em>mobile-first</em> ou irréductible dégradateur progressiste, il est
forcément arrivé un moment où tu t'es dit cette chose toute bête :</p>
<blockquote>
<p>Ce serait quand même pas mal si cet élément était ici plutôt que là. Sauf que
non.</p>
</blockquote>
<p>Le cas typique est celui d'un menu un minimum complexe, dont on réordonnerait
volontiers les éléments un chouïa au-dessus ou en deçà d'une certaine taille
d'écran. Et là, il faut bien avouer qu'il n'existe pas vraiment de solution
miracle.</p>
<p>J'entends déjà les plus teigneux vociférer qu'avec une meilleure réflexion en
amont, le <em>markup</em> aurait été mieux conçu et on n'en serait pas là. Bien qu'un
peu facile, cette réponse peut s'avérer vraie dans un certain nombre de cas
(admire la phrase du mec qui ne se mouille pas). Mais quoi qu'il en soit, si tu
en es au stade de ce type de questionnement, c'est qu'il est de toute façon trop
tard pour faire machine arrière.</p>
<p>Au train où va l'innovation dans notre branche, surtout pour tout ce qui touche
au mobile en général et à la conception web en particulier, il n'est pas exclu
que les bouts de ficelle que je vais t'exposer ici soient obsolètes dans six
mois, et que cet article fasse un comeback incroyable sur Twitter, les RT
moquant gentiment les techniques précolombiennes auxquelles nous étions réduits
il n'y a encore pas si longtemps. Va savoir, je pourrais bien faire l'objet
d'une célébrité paradoxalement décadente, à la Rick Astley. En attendant, il
s'agit des seules solutions que je connais pour ce type de cas. Si tu as mieux à
proposer, je te recommande chaudement de l'ouvrir dans les commentaires pour
qu'on en bénéficie tous. C'est bon, on y va ? Je t'attends, moi !</p>
<h2>À l'ancienne : Do Repeat Yourself</h2>
<p>Imagine une page de blog, où apparaissent consécutivement le titre de l'article,
la photo l'illustrant, et enfin le texte. Comme une photo, selon la qualité de
ta connexion, ça peut être un peu galère à charger sur mobile (et que la
question des images en responsive design
<a href="http://css-tricks.com/responsive-images-hard/">est encore un sacré bordel</a>), tu
prends la décision de passer la photo en dessous du contenu textuel pour que tes
visiteurs puissent lire leur article peinards même si la photo n'a pas fini de
charger - et tu vas même en profiter pour la remplacer par une version plus
light.</p>
<p>Dans un tel cas, la meilleure solution peut encore être de dupliquer ta balise
<code>img</code>, et de masquer l'une ou l'autre avec CSS en fonction de la taille d'écran,
grâce à une <code>media query</code>. Voilà un exemple rudimentaire :</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Mon super article<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/mon/image/desktop.jpg&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;img-desktop&quot;</span> /&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Lâche tes comm&#x27; !<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/mon/image/mobile.jpg&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;img-mobile&quot;</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.img-desktop</span> {
  <span class="hljs-comment">/* Par défaut, l&#x27;image desktop est cachée */</span>
  <span class="hljs-attribute">display</span>: none;
}

<span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-width:</span> <span class="hljs-number">768px</span>) {
  <span class="hljs-comment">/* Si on est sur &quot;grand&quot; écran, on affiche l&#x27;image desktop... */</span>
  <span class="hljs-selector-class">.img-desktop</span> {
    <span class="hljs-attribute">display</span>: block;
  }

  <span class="hljs-comment">/* ...et on masque l&#x27;image mobile */</span>
  <span class="hljs-selector-class">.img-mobile</span> {
    <span class="hljs-attribute">display</span>: none;
  }
}
</code></pre>
<p>Évidemment, le gros inconvénient de ce type de solution est que qui dit
duplication de contenu dit augmentation du poids total. Dans le cas d'un contenu
purement textuel, selon sa taille, cela peut être négligeable. J'ai ici
volontairement pris l'exemple le moins adapté : une image, qu'il ne faut
absolument pas faire charger deux fois à nos visiteurs. On va tricher un peu
avec JavaScript :</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Mon super article<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- Ces images ne seront pas chargées car elles n&#x27;ont pas d&#x27;attribut src --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/mon/image/desktop.jpg&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;img-desktop&quot;</span> /&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Lâche tes comm&#x27; !<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/mon/image/mobile.jpg&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;img-mobile&quot;</span> /&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Cette image ne sera chargée que si le visiteur n&#x27;a pas activé le JS --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/mon/image/mobile.jpg&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;img-mobile img-noscript&quot;</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.img-desktop</span> {
  <span class="hljs-attribute">display</span>: none;
}

<span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-width:</span> <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-class">.img-desktop</span> {
    <span class="hljs-attribute">display</span>: block;
  }

  <span class="hljs-selector-class">.img-mobile</span> {
    <span class="hljs-attribute">display</span>: none;
  }
}

<span class="hljs-selector-class">.img-noscript</span> {
  <span class="hljs-comment">/* On surcharge le style desktop pour s&#x27;assurer
     que cette image s&#x27;affiche quelle que soit la taille de l&#x27;écran */</span>

  <span class="hljs-attribute">display</span>: block;
}
</code></pre>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> handleImages = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// On charge les images ayant l&#x27;attribut data-src,</span>
  <span class="hljs-comment">// non encore chargées (attribut src indéfini)</span>
  <span class="hljs-comment">// et non masquées par CSS</span>

  [].forEach.call(
    <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&quot;img[data-src]:not([src])&quot;</span>),
    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">el</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.getComputedStyle(el).display != <span class="hljs-string">&quot;none&quot;</span>) {
        el.src = el.getAttribute(<span class="hljs-string">&quot;data-src&quot;</span>);
      }
    },
  );
};

<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&quot;load&quot;</span>, handleImages);
<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&quot;resize&quot;</span>, handleImages);
</code></pre>
<p>Ainsi, seules les images nécessaires seront chargées avec la page. J'applique
également le même traitement au <code>resize</code> ; c'est un peu bourrin, je te
l'accorde, on pourrait probablement faire plus fin avec <code>matchMedia</code>.</p>
<p>Dans le cas d'un visiteur naviguant sans JavaScript, seule l'image mobile est
chargée : je pars du principe qu'étant donné qu'on ne peut pas définir laquelle
des deux versions de l'image est la mieux adaptée pour lui, autant lui envoyer
la plus légère.</p>
<h2>JS powa : enquire.js</h2>
<p>La seconde solution peut tout à fait être réalisée &quot;à la main&quot;, mais je vais te
parler d'une petite librairie que j'aime beaucoup et que j'ai déjà utilisée dans
ce genre de cas. Elle se nomme <a href="http://wicky.nillia.ms/enquire.js/">enquire.js</a>
et permet tout simplement d'affecter des callbacks à des media queries :</p>
<pre><code class="hljs language-javascript">enquire.register(<span class="hljs-string">&quot;screen and (min-width: 768px)&quot;</span>, {
  <span class="hljs-attr">match</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// L&#x27;écran fait 768px de large ou plus...</span>
  },

  <span class="hljs-attr">unmatch</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// ...et ici, 767px de large ou moins.</span>
    <span class="hljs-comment">// La librairie repose sur matchMedia et matchMedia.addListener</span>
  },
});
</code></pre>
<p>Plutôt sympa, non ? Pour reprendre notre exemple de tout à l'heure (le CSS n'est
plus nécessaire) :</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Mon super article<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
    <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;/mon/image/desktop.jpg&quot;</span>
    <span class="hljs-attr">data-mobile-src</span>=<span class="hljs-string">&quot;/mon/image/mobile.jpg&quot;</span>
  /&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Lâche tes comm&#x27; !<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/mon/image/mobile.jpg&quot;</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">var</span> content = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;p&quot;</span>),
  switchImage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">isMobile</span>) </span>{
    <span class="hljs-keyword">var</span> attr = isMobile ? <span class="hljs-string">&quot;data-mobile-src&quot;</span> : <span class="hljs-string">&quot;data-src&quot;</span>;

    [].forEach.call(<span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">&quot;img[&quot;</span> + attr + <span class="hljs-string">&quot;]&quot;</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">
      el,
    </span>) </span>{
      <span class="hljs-comment">// On affecte l&#x27;une ou l&#x27;autre source à notre image,</span>
      <span class="hljs-comment">// entraînant son chargement si nécessaire.</span>
      el.src = el.getAttribute(attr);

      <span class="hljs-comment">// On en profite pour la bouger avant ou après le contenu</span>
      content.parentNode.insertBefore(
        el,
        isMobile ? content.nextSibling : content,
      );
    });
  };

enquire.register(<span class="hljs-string">&quot;screen and (min-width: 768px)&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  switchImage(<span class="hljs-literal">false</span>);
});

enquire.register(<span class="hljs-string">&quot;screen and (max-width: 767px)&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  switchImage(<span class="hljs-literal">true</span>);
});
</code></pre>
<p>On peut ainsi gérer facilement le chargement de l'image, ainsi que son
emplacement. J'utilise ici deux handlers distincts pour m'assurer qu'enquire
fait bien son boulot au chargement aussi, dans tous les cas (les callbacks
<code>unmatch</code> ne sont appelés qu'au redimensionnement, semble-t-il : avec un seul
handler, l'image n'arrive donc jamais si on charge la page avec un écran d'une
largeur inférieure à 768px).</p>
<h2>That's all you've got, bitch?</h2>
<p>On peut également, puisque tu y tiens tant, évoquer d'autres solutions plus
marginales mais qui méritent d'être citées.</p>
<h3>Foundation</h3>
<p><a href="http://foundation.zurb.com/">Foundation</a> propose, dans sa version 5 (et
peut-être même avant, j'ai pas vérifié) un peu de sucre syntaxique HTML
permettant de switcher (via JS, œuf corse) simplement entre différents contenus
pour l'élément sur lequel on l'utilise.</p>
<p>C'est pas mal. Ça donne ça (tiré de
<a href="http://foundation.zurb.com/docs/components/interchange.html">la doc</a>) :</p>
<blockquote>
<p>We use the data-interchange attribute on a markup container (probably a div)
to do this. Here's an example which loads up a small, static map on mobile, a
larger static map for medium-sized devices, and a full interactive Google map
on large display devices.</p>
</blockquote>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
  <span class="hljs-attr">data-interchange</span>=<span class="hljs-string">&quot;[../examples/interchange/default.html, (small)],
                       [../examples/interchange/medium.html, (medium)],
                       [../examples/interchange/large.html, (large)]&quot;</span>
&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">data-alert</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;alert-box secondary radius&quot;</span>&gt;</span>
    This is the default content.
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;close&quot;</span>&gt;</span><span class="hljs-symbol">&amp;times;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><code>small</code>, <code>medium</code> et <code>large</code> étant des raccourcis pour des media queries données
(c'est dans
<a href="http://foundation.zurb.com/docs/components/interchange.html">la doc</a>, toujours.
J'insiste.)</p>
<h3>Flexbox (pas toi, David)</h3>
<p>On peut également, comme l'a très justement souligné lionelB, se pencher (mais
pas trop) sur le cas de Flexbox, qui est un nouveau type de positionnement
introduit en CSS3. La <a href="http://caniuse.com/#search=flexbox">compatibilité</a> n'est
pas encore au top (surtout grâce à IE, qui l'eût cru) mais autant se tenir prêts
! Pour ceux qui ont dormi, en gros, tu définis un conteneur :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.flex-container</span> {
  <span class="hljs-attribute">display</span>: flex;

  <span class="hljs-comment">/* ou bien */</span>

  <span class="hljs-attribute">display</span>: inline-flex;
}
</code></pre>
<p>...et tu donnes des numéros à ses enfants, comme à Bangkok :</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.title</span> {
  <span class="hljs-attribute">order</span>: <span class="hljs-number">1</span>;
}

<span class="hljs-selector-class">.content</span> {
  <span class="hljs-attribute">order</span>: <span class="hljs-number">2</span>;
}

<span class="hljs-selector-class">.image</span> {
  <span class="hljs-attribute">order</span>: <span class="hljs-number">3</span>;
}

<span class="hljs-comment">/*
Bien sûr, tu as été assez malin pour mettre ton image en dernier dans le DOM...
...n&#x27;est-ce pas ?
*/</span>

<span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-width:</span> <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-class">.content</span> {
    <span class="hljs-attribute">order</span>: <span class="hljs-number">3</span>;
  }

  <span class="hljs-selector-class">.image</span> {
    <span class="hljs-attribute">order</span>: <span class="hljs-number">2</span>;
  }
}
</code></pre>
<p>Et voilà, pas besoin d'avoir fait Polly Pocket pour percevoir à quel point la
flexibilité et la propreté du code que cette technique nous permet d'écrire
résolvent notre problème en deux secondes douze. Ce n'est évidemment ici que la
partie émergée du flexberg ; il y a des tas de bonnes ressources qui vous
expliqueront ça en long, en large et en travers bien mieux que moi, notamment
<a href="http://www.adobe.com/devnet/html5/articles/working-with-flexbox-the-new-spec.html">cet article</a>
sur lequel j'ai honteusement pompé les snippets de cette partie.</p>
<h2>Conclusion</h2>
<p>Comme tu l'as vu, rien de ce que je t'ai montré n'est réellement satisfaisant :
pour pouvoir contrôler le positionnement d'un élément dans le DOM dans le cadre
d'un webdesign responsive, tu dois soit le dupliquer et jouer à cache-cache,
soit le déplacer avec JavaScript. Aussi, je serais ravi que tu partages ton
opinion, tes idées ou tes retours d'XP à ce sujet. Ça me fera de la lecture pour
passer le temps, et toi tu feras quelque chose de constructif !</p>
<p>Il est temps pour moi de te laisser reprendre le cours de ta vie. Peut-être nos
routes se croiseront-elles de nouveau. Dans l'intervalle, va, vis, et code !</p>
</div><style data-emotion="rpcss unyj6i">.rpcss-unyj6i{max-width:640px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:20px auto;padding:20px;background-color:var(--page-background-color);border-radius:10px;box-shadow:0 15px 15px -5px rgba(0, 0, 0, 0.2);}@media (max-width: 540px){.rpcss-unyj6i{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-unyj6i"><style data-emotion="rpcss ty7r4z">.rpcss-ty7r4z{font-weight:800;}</style><div class="rpcss-ty7r4z">Vous avez aimé cet article?</div><style data-emotion="rpcss klacsp">.rpcss-klacsp{width:0;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-klacsp"></div><style data-emotion="rpcss 1pkr03v">.rpcss-1pkr03v{background-color:#00aced;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:800;}.rpcss-1pkr03v:active{opacity:0.5;}</style><a class="rpcss-1pkr03v" href="https://www.twitter.com/intent/tweet?text=Responsive%20webdesign%20et%20structure%20du%20DOM%20sur%20%40PutainDeCode%20https%3A%2F%2Fputaindecode.io%2Farticles%2Fresponsive-webdesign-et-structure-du-dom" target="_blank">Le partager sur Twitter</a></div><style data-emotion="rpcss x4iqxe">.rpcss-x4iqxe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;padding:20px;}</style><div class="rpcss-x4iqxe"><style data-emotion="rpcss gein6x">.rpcss-gein6x{font-size:20px;-webkit-text-decoration:none;text-decoration:none;color:#1E49B5;}</style><a class="rpcss-gein6x" href="/articles">← Articles</a></div><style data-emotion="rpcss 8bodgl">.rpcss-8bodgl{max-width:640px;width:100%;margin:0 auto;padding:20px 0;}</style><div class="rpcss-8bodgl" id="disqus_thread"></div></div></div></div></div><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1vau6rl">.rpcss-1vau6rl{margin:20px 0;background-color:var(--page-accented-background-color);border-radius:10px;padding:20px;}</style><div class="rpcss-1vau6rl"><style data-emotion="rpcss 1gz1i1h">.rpcss-1gz1i1h{font-size:32px;font-weight:800;margin-bottom:20px;text-align:center;}</style><div aria-level="2" class="rpcss-1gz1i1h" role="heading">Ne rien rater</div><style data-emotion="rpcss 1wbispj">.rpcss-1wbispj{font-size:18px;margin-bottom:10px;text-align:center;}</style><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur les réseaux</div><style data-emotion="rpcss 1hyoz7m">.rpcss-1hyoz7m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="rpcss-1hyoz7m"><a href="https://twitter.com/PutainDeCode"><img alt="Twitter" height="48" src="/public/images/website/twitter.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://facebook.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/facebook.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://github.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/github.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://itunes.apple.com/fr/podcast/putain-de-code-!/id1185311825"><img alt="Apple Podcast" height="48" src="/public/images/website/apple-podcast.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://soundcloud.com/putaindecode"><img alt="Soundcloud" height="48" src="/public/images/website/soundcloud.svg" width="48"/></a></div><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur le chat</div><div class="rpcss-1hyoz7m"><a href="https://discord.gg/jtbGNNc"><img alt="Discord" height="48" src="/public/images/website/discord.svg" width="48"/></a></div></div></div></div><style data-emotion="rpcss zs8kw7">.rpcss-zs8kw7{background-color:#222;padding:20px 0;}</style><footer class="rpcss-zs8kw7"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 79elbk">.rpcss-79elbk{position:relative;}</style><div class="rpcss-79elbk"><style data-emotion="rpcss 1hle0ni">.rpcss-1hle0ni{position:absolute;left:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1hle0ni" href="/api/articles/feeds/desc/feed.xml"><style data-emotion="rpcss lvyu5j">.rpcss-lvyu5j{margin-right:10px;}</style><img class="rpcss-lvyu5j" alt="Flux RSS" height="16" src="/public/images/website/rss-feed.svg" width="16"/><style data-emotion="rpcss um3i31">@media (max-width: 400px){.rpcss-um3i31{display:none;}}</style><div class="rpcss-um3i31">Flux RSS</div></a><style data-emotion="rpcss 12cp4l7">.rpcss-12cp4l7{color:rgba(255, 255, 255, 0.5);text-align:center;font-size:14px;}</style><div class="rpcss-12cp4l7">© 2021 Putain de code !</div><style data-emotion="rpcss 1w98uy3">.rpcss-1w98uy3{position:absolute;right:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1w98uy3" href="https://github.com/putaindecode/putaindecode.io">GitHub</a></div></div></div></footer></div><script id="initialData" type="text/data">{"lists":{"RE_PRIVATE_NONE":true},"items":{"k":"articles","v":{"k":"responsive-webdesign-et-structure-du-dom","v":{"_0":{"TAG":0,"_0":{"slug":"responsive-webdesign-et-structure-du-dom","filename":"2013-12-26-responsive-webdesign-et-structure-du-dom","title":"Responsive webdesign et structure du DOM","date":"Thu, 26 Dec 2013 00:00:00 GMT","draft":false,"meta":{"date":"2013-12-26T00:00:00.000Z","title":"Responsive webdesign et structure du DOM","author":"neemzy","oldSlug":"html/responsive-dom","slug":"responsive-webdesign-et-structure-du-dom"},"body":"<p>Bien, commençons par le commencement, si tu veux bien. Le <strong>responsive\nwebdesign</strong>, ça te dit quelque chose ? Oui ? Bon. Dans ce cas, tu as peut-être\ncomme moi déjà été confronté à un cas de figure plutôt ennuyeux. Que tu sois\nadepte du <em>mobile-first</em> ou irréductible dégradateur progressiste, il est\nforcément arrivé un moment où tu t'es dit cette chose toute bête :</p>\n<blockquote>\n<p>Ce serait quand même pas mal si cet élément était ici plutôt que là. Sauf que\nnon.</p>\n</blockquote>\n<p>Le cas typique est celui d'un menu un minimum complexe, dont on réordonnerait\nvolontiers les éléments un chouïa au-dessus ou en deçà d'une certaine taille\nd'écran. Et là, il faut bien avouer qu'il n'existe pas vraiment de solution\nmiracle.</p>\n<p>J'entends déjà les plus teigneux vociférer qu'avec une meilleure réflexion en\namont, le <em>markup</em> aurait été mieux conçu et on n'en serait pas là. Bien qu'un\npeu facile, cette réponse peut s'avérer vraie dans un certain nombre de cas\n(admire la phrase du mec qui ne se mouille pas). Mais quoi qu'il en soit, si tu\nen es au stade de ce type de questionnement, c'est qu'il est de toute façon trop\ntard pour faire machine arrière.</p>\n<p>Au train où va l'innovation dans notre branche, surtout pour tout ce qui touche\nau mobile en général et à la conception web en particulier, il n'est pas exclu\nque les bouts de ficelle que je vais t'exposer ici soient obsolètes dans six\nmois, et que cet article fasse un comeback incroyable sur Twitter, les RT\nmoquant gentiment les techniques précolombiennes auxquelles nous étions réduits\nil n'y a encore pas si longtemps. Va savoir, je pourrais bien faire l'objet\nd'une célébrité paradoxalement décadente, à la Rick Astley. En attendant, il\ns'agit des seules solutions que je connais pour ce type de cas. Si tu as mieux à\nproposer, je te recommande chaudement de l'ouvrir dans les commentaires pour\nqu'on en bénéficie tous. C'est bon, on y va ? Je t'attends, moi !</p>\n<h2>À l'ancienne : Do Repeat Yourself</h2>\n<p>Imagine une page de blog, où apparaissent consécutivement le titre de l'article,\nla photo l'illustrant, et enfin le texte. Comme une photo, selon la qualité de\nta connexion, ça peut être un peu galère à charger sur mobile (et que la\nquestion des images en responsive design\n<a href=\"http://css-tricks.com/responsive-images-hard/\">est encore un sacré bordel</a>), tu\nprends la décision de passer la photo en dessous du contenu textuel pour que tes\nvisiteurs puissent lire leur article peinards même si la photo n'a pas fini de\ncharger - et tu vas même en profiter pour la remplacer par une version plus\nlight.</p>\n<p>Dans un tel cas, la meilleure solution peut encore être de dupliquer ta balise\n<code>img</code>, et de masquer l'une ou l'autre avec CSS en fonction de la taille d'écran,\ngrâce à une <code>media query</code>. Voilà un exemple rudimentaire :</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">article</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>Mon super article<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;/mon/image/desktop.jpg&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;img-desktop&quot;</span> /&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>Lâche tes comm&#x27; !<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;/mon/image/mobile.jpg&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;img-mobile&quot;</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">article</span>&gt;</span>\n</code></pre>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.img-desktop</span> {\n  <span class=\"hljs-comment\">/* Par défaut, l&#x27;image desktop est cachée */</span>\n  <span class=\"hljs-attribute\">display</span>: none;\n}\n\n<span class=\"hljs-keyword\">@media</span> screen <span class=\"hljs-keyword\">and</span> (<span class=\"hljs-attribute\">min-width:</span> <span class=\"hljs-number\">768px</span>) {\n  <span class=\"hljs-comment\">/* Si on est sur &quot;grand&quot; écran, on affiche l&#x27;image desktop... */</span>\n  <span class=\"hljs-selector-class\">.img-desktop</span> {\n    <span class=\"hljs-attribute\">display</span>: block;\n  }\n\n  <span class=\"hljs-comment\">/* ...et on masque l&#x27;image mobile */</span>\n  <span class=\"hljs-selector-class\">.img-mobile</span> {\n    <span class=\"hljs-attribute\">display</span>: none;\n  }\n}\n</code></pre>\n<p>Évidemment, le gros inconvénient de ce type de solution est que qui dit\nduplication de contenu dit augmentation du poids total. Dans le cas d'un contenu\npurement textuel, selon sa taille, cela peut être négligeable. J'ai ici\nvolontairement pris l'exemple le moins adapté : une image, qu'il ne faut\nabsolument pas faire charger deux fois à nos visiteurs. On va tricher un peu\navec JavaScript :</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">article</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>Mon super article<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n\n  <span class=\"hljs-comment\">&lt;!-- Ces images ne seront pas chargées car elles n&#x27;ont pas d&#x27;attribut src --&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">data-src</span>=<span class=\"hljs-string\">&quot;/mon/image/desktop.jpg&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;img-desktop&quot;</span> /&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>Lâche tes comm&#x27; !<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">data-src</span>=<span class=\"hljs-string\">&quot;/mon/image/mobile.jpg&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;img-mobile&quot;</span> /&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">noscript</span>&gt;</span>\n    <span class=\"hljs-comment\">&lt;!-- Cette image ne sera chargée que si le visiteur n&#x27;a pas activé le JS --&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;/mon/image/mobile.jpg&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;img-mobile img-noscript&quot;</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">noscript</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">article</span>&gt;</span>\n</code></pre>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.img-desktop</span> {\n  <span class=\"hljs-attribute\">display</span>: none;\n}\n\n<span class=\"hljs-keyword\">@media</span> screen <span class=\"hljs-keyword\">and</span> (<span class=\"hljs-attribute\">min-width:</span> <span class=\"hljs-number\">768px</span>) {\n  <span class=\"hljs-selector-class\">.img-desktop</span> {\n    <span class=\"hljs-attribute\">display</span>: block;\n  }\n\n  <span class=\"hljs-selector-class\">.img-mobile</span> {\n    <span class=\"hljs-attribute\">display</span>: none;\n  }\n}\n\n<span class=\"hljs-selector-class\">.img-noscript</span> {\n  <span class=\"hljs-comment\">/* On surcharge le style desktop pour s&#x27;assurer\n     que cette image s&#x27;affiche quelle que soit la taille de l&#x27;écran */</span>\n\n  <span class=\"hljs-attribute\">display</span>: block;\n}\n</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">var</span> handleImages = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-comment\">// On charge les images ayant l&#x27;attribut data-src,</span>\n  <span class=\"hljs-comment\">// non encore chargées (attribut src indéfini)</span>\n  <span class=\"hljs-comment\">// et non masquées par CSS</span>\n\n  [].forEach.call(\n    <span class=\"hljs-built_in\">document</span>.querySelectorAll(<span class=\"hljs-string\">&quot;img[data-src]:not([src])&quot;</span>),\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">el</span>) </span>{\n      <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">window</span>.getComputedStyle(el).display != <span class=\"hljs-string\">&quot;none&quot;</span>) {\n        el.src = el.getAttribute(<span class=\"hljs-string\">&quot;data-src&quot;</span>);\n      }\n    },\n  );\n};\n\n<span class=\"hljs-built_in\">window</span>.addEventListener(<span class=\"hljs-string\">&quot;load&quot;</span>, handleImages);\n<span class=\"hljs-built_in\">window</span>.addEventListener(<span class=\"hljs-string\">&quot;resize&quot;</span>, handleImages);\n</code></pre>\n<p>Ainsi, seules les images nécessaires seront chargées avec la page. J'applique\négalement le même traitement au <code>resize</code> ; c'est un peu bourrin, je te\nl'accorde, on pourrait probablement faire plus fin avec <code>matchMedia</code>.</p>\n<p>Dans le cas d'un visiteur naviguant sans JavaScript, seule l'image mobile est\nchargée : je pars du principe qu'étant donné qu'on ne peut pas définir laquelle\ndes deux versions de l'image est la mieux adaptée pour lui, autant lui envoyer\nla plus légère.</p>\n<h2>JS powa : enquire.js</h2>\n<p>La seconde solution peut tout à fait être réalisée &quot;à la main&quot;, mais je vais te\nparler d'une petite librairie que j'aime beaucoup et que j'ai déjà utilisée dans\nce genre de cas. Elle se nomme <a href=\"http://wicky.nillia.ms/enquire.js/\">enquire.js</a>\net permet tout simplement d'affecter des callbacks à des media queries :</p>\n<pre><code class=\"hljs language-javascript\">enquire.register(<span class=\"hljs-string\">&quot;screen and (min-width: 768px)&quot;</span>, {\n  <span class=\"hljs-attr\">match</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n    <span class=\"hljs-comment\">// L&#x27;écran fait 768px de large ou plus...</span>\n  },\n\n  <span class=\"hljs-attr\">unmatch</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n    <span class=\"hljs-comment\">// ...et ici, 767px de large ou moins.</span>\n    <span class=\"hljs-comment\">// La librairie repose sur matchMedia et matchMedia.addListener</span>\n  },\n});\n</code></pre>\n<p>Plutôt sympa, non ? Pour reprendre notre exemple de tout à l'heure (le CSS n'est\nplus nécessaire) :</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">article</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>Mon super article<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span>\n    <span class=\"hljs-attr\">data-src</span>=<span class=\"hljs-string\">&quot;/mon/image/desktop.jpg&quot;</span>\n    <span class=\"hljs-attr\">data-mobile-src</span>=<span class=\"hljs-string\">&quot;/mon/image/mobile.jpg&quot;</span>\n  /&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>Lâche tes comm&#x27; !<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">noscript</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;/mon/image/mobile.jpg&quot;</span> /&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">noscript</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">article</span>&gt;</span>\n</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">var</span> content = <span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">&quot;p&quot;</span>),\n  switchImage = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">isMobile</span>) </span>{\n    <span class=\"hljs-keyword\">var</span> attr = isMobile ? <span class=\"hljs-string\">&quot;data-mobile-src&quot;</span> : <span class=\"hljs-string\">&quot;data-src&quot;</span>;\n\n    [].forEach.call(<span class=\"hljs-built_in\">document</span>.querySelectorAll(<span class=\"hljs-string\">&quot;img[&quot;</span> + attr + <span class=\"hljs-string\">&quot;]&quot;</span>), <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">\n      el,\n    </span>) </span>{\n      <span class=\"hljs-comment\">// On affecte l&#x27;une ou l&#x27;autre source à notre image,</span>\n      <span class=\"hljs-comment\">// entraînant son chargement si nécessaire.</span>\n      el.src = el.getAttribute(attr);\n\n      <span class=\"hljs-comment\">// On en profite pour la bouger avant ou après le contenu</span>\n      content.parentNode.insertBefore(\n        el,\n        isMobile ? content.nextSibling : content,\n      );\n    });\n  };\n\nenquire.register(<span class=\"hljs-string\">&quot;screen and (min-width: 768px)&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  switchImage(<span class=\"hljs-literal\">false</span>);\n});\n\nenquire.register(<span class=\"hljs-string\">&quot;screen and (max-width: 767px)&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  switchImage(<span class=\"hljs-literal\">true</span>);\n});\n</code></pre>\n<p>On peut ainsi gérer facilement le chargement de l'image, ainsi que son\nemplacement. J'utilise ici deux handlers distincts pour m'assurer qu'enquire\nfait bien son boulot au chargement aussi, dans tous les cas (les callbacks\n<code>unmatch</code> ne sont appelés qu'au redimensionnement, semble-t-il : avec un seul\nhandler, l'image n'arrive donc jamais si on charge la page avec un écran d'une\nlargeur inférieure à 768px).</p>\n<h2>That's all you've got, bitch?</h2>\n<p>On peut également, puisque tu y tiens tant, évoquer d'autres solutions plus\nmarginales mais qui méritent d'être citées.</p>\n<h3>Foundation</h3>\n<p><a href=\"http://foundation.zurb.com/\">Foundation</a> propose, dans sa version 5 (et\npeut-être même avant, j'ai pas vérifié) un peu de sucre syntaxique HTML\npermettant de switcher (via JS, œuf corse) simplement entre différents contenus\npour l'élément sur lequel on l'utilise.</p>\n<p>C'est pas mal. Ça donne ça (tiré de\n<a href=\"http://foundation.zurb.com/docs/components/interchange.html\">la doc</a>) :</p>\n<blockquote>\n<p>We use the data-interchange attribute on a markup container (probably a div)\nto do this. Here's an example which loads up a small, static map on mobile, a\nlarger static map for medium-sized devices, and a full interactive Google map\non large display devices.</p>\n</blockquote>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>\n  <span class=\"hljs-attr\">data-interchange</span>=<span class=\"hljs-string\">&quot;[../examples/interchange/default.html, (small)],\n                       [../examples/interchange/medium.html, (medium)],\n                       [../examples/interchange/large.html, (large)]&quot;</span>\n&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">data-alert</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;alert-box secondary radius&quot;</span>&gt;</span>\n    This is the default content.\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;close&quot;</span>&gt;</span><span class=\"hljs-symbol\">&amp;times;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n</code></pre>\n<p><code>small</code>, <code>medium</code> et <code>large</code> étant des raccourcis pour des media queries données\n(c'est dans\n<a href=\"http://foundation.zurb.com/docs/components/interchange.html\">la doc</a>, toujours.\nJ'insiste.)</p>\n<h3>Flexbox (pas toi, David)</h3>\n<p>On peut également, comme l'a très justement souligné lionelB, se pencher (mais\npas trop) sur le cas de Flexbox, qui est un nouveau type de positionnement\nintroduit en CSS3. La <a href=\"http://caniuse.com/#search=flexbox\">compatibilité</a> n'est\npas encore au top (surtout grâce à IE, qui l'eût cru) mais autant se tenir prêts\n! Pour ceux qui ont dormi, en gros, tu définis un conteneur :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.flex-container</span> {\n  <span class=\"hljs-attribute\">display</span>: flex;\n\n  <span class=\"hljs-comment\">/* ou bien */</span>\n\n  <span class=\"hljs-attribute\">display</span>: inline-flex;\n}\n</code></pre>\n<p>...et tu donnes des numéros à ses enfants, comme à Bangkok :</p>\n<pre><code class=\"hljs language-css\"><span class=\"hljs-selector-class\">.title</span> {\n  <span class=\"hljs-attribute\">order</span>: <span class=\"hljs-number\">1</span>;\n}\n\n<span class=\"hljs-selector-class\">.content</span> {\n  <span class=\"hljs-attribute\">order</span>: <span class=\"hljs-number\">2</span>;\n}\n\n<span class=\"hljs-selector-class\">.image</span> {\n  <span class=\"hljs-attribute\">order</span>: <span class=\"hljs-number\">3</span>;\n}\n\n<span class=\"hljs-comment\">/*\nBien sûr, tu as été assez malin pour mettre ton image en dernier dans le DOM...\n...n&#x27;est-ce pas ?\n*/</span>\n\n<span class=\"hljs-keyword\">@media</span> screen <span class=\"hljs-keyword\">and</span> (<span class=\"hljs-attribute\">min-width:</span> <span class=\"hljs-number\">768px</span>) {\n  <span class=\"hljs-selector-class\">.content</span> {\n    <span class=\"hljs-attribute\">order</span>: <span class=\"hljs-number\">3</span>;\n  }\n\n  <span class=\"hljs-selector-class\">.image</span> {\n    <span class=\"hljs-attribute\">order</span>: <span class=\"hljs-number\">2</span>;\n  }\n}\n</code></pre>\n<p>Et voilà, pas besoin d'avoir fait Polly Pocket pour percevoir à quel point la\nflexibilité et la propreté du code que cette technique nous permet d'écrire\nrésolvent notre problème en deux secondes douze. Ce n'est évidemment ici que la\npartie émergée du flexberg ; il y a des tas de bonnes ressources qui vous\nexpliqueront ça en long, en large et en travers bien mieux que moi, notamment\n<a href=\"http://www.adobe.com/devnet/html5/articles/working-with-flexbox-the-new-spec.html\">cet article</a>\nsur lequel j'ai honteusement pompé les snippets de cette partie.</p>\n<h2>Conclusion</h2>\n<p>Comme tu l'as vu, rien de ce que je t'ai montré n'est réellement satisfaisant :\npour pouvoir contrôler le positionnement d'un élément dans le DOM dans le cadre\nd'un webdesign responsive, tu dois soit le dupliquer et jouer à cache-cache,\nsoit le déplacer avec JavaScript. Aussi, je serais ravi que tu partages ton\nopinion, tes idées ou tes retours d'XP à ce sujet. Ça me fera de la lecture pour\npasser le temps, et toi tu feras quelque chose de constructif !</p>\n<p>Il est temps pour moi de te laisser reprendre le cours de ta vie. Peut-être nos\nroutes se croiseront-elles de nouveau. Dans l'intervalle, va, vis, et code !</p>\n"}}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"listsRequests":{"data":{"RE_PRIVATE_NONE":true}},"itemsRequests":{"data":{"RE_PRIVATE_NONE":true}}}</script><head><script defer="defer" src="/public/main.56c69761a03eb0112696.js"></script></head></html>