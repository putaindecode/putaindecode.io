<!DOCTYPE html><html lang="fr"><head><title data-react-helmet="true">Introduction à React | Putain de code</title><meta data-react-helmet="true" charset="UTF-8"/><meta data-react-helmet="true" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" name="viewport"/><meta data-react-helmet="true" content="summary_large_image" name="twitter:card"/><meta data-react-helmet="true" content="Putain de code !" property="og:site_name"/><meta data-react-helmet="true" content="@putaindecode" name="twitter:site"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" property="og:image"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" name="twitter:image"/><meta data-react-helmet="true" content="1500" property="og:image:width"/><meta data-react-helmet="true" content="777" property="og:image:height"/><meta data-react-helmet="true" content="Introduction à React | Putain de code" property="og:title"/><meta data-react-helmet="true" content="Introduction à React | Putain de code" name="twitter:title"/><meta data-react-helmet="true" content="Un article proposé par bloodyowl" name="description"/><link data-react-helmet="true" title="RSS Feed" href="/api/articles/feeds/desc/feed.xml" rel="alternate" type="application/rss+xml"/><link data-react-helmet="true" href="/favicon.ico" rel="shortcut icon"/><link data-react-helmet="true" href="https://putaindecode.io/articles/introduction-a-react" rel="canonical"/><script>window.PAGES_BOOT_MODE="hydrate";</script></head><div id="root"><style data-emotion="rpcss zx73cm 1lc6tyj 28v1b4">@-webkit-keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}@keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}:root{--page-background-color:#fff;--page-slightly-accented-background-color:#F9F6F6;--page-accented-background-color:#E4EBEE;--page-text-color:#46515B;--link-text-color:#E51D58;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#FAF3E1;--one-percent-contrast-color:rgba(0, 0, 0, 0.1);--half-percent-contrast-color:rgba(0, 0, 0, 0.05);}@media (prefers-color-scheme: dark){:root{--page-background-color:#222;--page-slightly-accented-background-color:#171717;--page-accented-background-color:#111;--page-text-color:#ddd;--link-text-color:#F87098;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#4F3804;--one-percent-contrast-color:rgba(255, 255, 255, 0.1);--half-percent-contrast-color:rgba(255, 255, 255, 0.05);}}body{padding:0;margin:0;background-color:var(--page-background-color);color:var(--page-text-color);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;overflow-x:hidden;}html{font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}a{color:var(--link-text-color);-webkit-text-decoration:underline;text-decoration:underline;}a:hover{-webkit-text-decoration:none;text-decoration:none;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}*,*:before,*:after{box-sizing:border-box;}pre,.hljs{color:#adbac7;background:#22272e;}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067;}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb;}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#6cb6ff;}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#96d0ff;}.hljs-built_in,.hljs-symbol{color:#f69d50;}.hljs-comment,.hljs-code,.hljs-formula{color:#768390;}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#8ddb8c;}.hljs-subst{color:#adbac7;}.hljs-section{color:#316dca;font-weight:bold;}.hljs-bullet{color:#eac55f;}.hljs-emphasis{color:#adbac7;font-style:italic;}.hljs-strong{color:#adbac7;font-weight:bold;}.hljs-addition{color:#b4f1b4;background-color:#1b4721;}.hljs-deletion{color:#ffd8d3;background-color:#78191b;}</style><style data-emotion="rpcss 9vhaby">.rpcss-9vhaby{background-color:var(--gradient-red-bottom);background-image:linear-gradient(to bottom right, var(--gradient-red-top), var(--gradient-red-bottom));}</style><header class="rpcss-9vhaby" style="background-image:linear-gradient(to bottom right, hsl(104, 100%, 35%), hsl(87, 100%, 30%))"><style data-emotion="rpcss 1qqk0tr">.rpcss-1qqk0tr{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}</style><div class="rpcss-1qqk0tr"><style data-emotion="rpcss qx7dny">.rpcss-qx7dny{width:100%;max-width:1024px;margin:0 auto;padding:0 10px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="rpcss-qx7dny"><style data-emotion="rpcss 7s9om2">.rpcss-7s9om2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:20px 0 50px;}</style><div class="rpcss-7s9om2"><style data-emotion="rpcss gdpa5c">.rpcss-gdpa5c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-gdpa5c" href="/"><style data-emotion="rpcss 1lm4738">.rpcss-1lm4738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;padding-bottom:10px;}</style><div class="rpcss-1lm4738"><style data-emotion="rpcss 13o7eu2">.rpcss-13o7eu2{display:block;}</style><svg class="rpcss-13o7eu2" height="36px" width="36px" viewBox="0 0 36 36"><defs><linearGradient id="PutainDeCodeLogoGradient" x1="50%" x2="50%" y1="0%" y2="127.223881%"><stop offset="0%" stop-color="#E41D57"></stop><stop offset="100%" stop-color="#C60000"></stop></linearGradient></defs><circle cx="18" cy="18" fill="url(#PutainDeCodeLogoGradient)" r="17" stroke="#FFFFFF" stroke-width="2"></circle><polygon fill="#FFFFFF" points="15.9033203 18.2246094 15.9033203 18.3710938 11.2304688 20.5317383 11.2304688 22.8095703 18.0566406 19.184082 18.0566406 17.4116211 11.2304688 13.7788086 11.2304688 16.0639648"></polygon><rect height="14" width="2" fill="#FFFFFF" x="22" y="11"><animate attributeName="opacity" begin="100ms" calcMode="discrete" dur="2s" repeatCount="indefinite" values="1;0"></animate></rect></svg><style data-emotion="rpcss 4cf197">.rpcss-4cf197{width:10px;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-4cf197"></div><style data-emotion="rpcss u5k24">.rpcss-u5k24{font-size:22px;color:#fff;font-weight:800;}</style><div aria-level="2" class="rpcss-u5k24" role="heading">Putain de code !</div></div><style data-emotion="rpcss 1nyebg4">.rpcss-1nyebg4{font-size:14px;color:rgba(255, 255, 255, 0.8);text-align:center;}</style><div class="rpcss-1nyebg4">Blog participatif de la communauté dev</div></a></div></div></div></header><style data-emotion="rpcss a4ric9">.rpcss-a4ric9{background-color:var(--page-slightly-accented-background-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="rpcss-a4ric9"><style data-emotion="rpcss oeugsb">.rpcss-oeugsb{-webkit-animation:500ms ease-out animation-zx73cm;animation:500ms ease-out animation-zx73cm;}</style><div class="rpcss-oeugsb"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1qc2bam">.rpcss-1qc2bam{font-size:42px;font-weight:800;text-align:center;padding-top:40px;line-height:1.2;margin:0;}</style><h1 class="rpcss-1qc2bam">Introduction à React</h1><style data-emotion="rpcss obg2kr">.rpcss-obg2kr{font-size:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:40px;color:var(--page-text-color);-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-obg2kr" href="https://github.com/bloodyowl"><style data-emotion="rpcss uco8i7">.rpcss-uco8i7{width:32px;height:32px;border-radius:100%;margin-right:10px;}</style><img class="rpcss-uco8i7" alt="bloodyowl" src="https://avatars.githubusercontent.com/bloodyowl?size=64"/><div>bloodyowl<!-- --> <!-- -->•<!-- --> <!-- -->2014/06/04</div></a><style data-emotion="rpcss 15kxmi0">.rpcss-15kxmi0{max-width:640px;width:100%;font-size:18px;margin:0 auto;line-height:1.7;}.rpcss-15kxmi0 h2,.rpcss-15kxmi0 h3,.rpcss-15kxmi0 h4,.rpcss-15kxmi0 h5,.rpcss-15kxmi0 h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-weight:800;line-height:1.2;}.rpcss-15kxmi0 img{max-width:100%;background-color:rgba(255, 255, 255, 0.75);}.rpcss-15kxmi0 code{font-size:0.9em;font-family:PragmataPro,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:1;background-color:var(--code-background-color);margin:0 0.2em;}.rpcss-15kxmi0 pre{padding:10px;overflow-x:auto;font-size:14px;border-radius:10px;border:2px solid var(--one-percent-contrast-color);-webkit-overflow-scrolling:touch;}.rpcss-15kxmi0 pre code{font-size:14px;background-color:transparent;margin:0;}.rpcss-15kxmi0 blockquote{padding-left:20px;margin:0;font-size:16px;border-left:3px solid var(--one-percent-contrast-color);font-style:italic;}.rpcss-15kxmi0 table{width:100%;text-align:center;}.rpcss-15kxmi0 figure{padding:20px 0;}.rpcss-15kxmi0 figcaption{text-align:center;}.rpcss-15kxmi0 a{word-wrap:break-word;}.rpcss-15kxmi0 table thead th{background-color:var(--page-accented-background-color);padding:10px 0;}</style><div class="rpcss-15kxmi0"><p>Cela fait maintenant un an que React est open-sourced. C'est l'occasion de
présenter le petit dernier de la vague MV*.</p>
<h2>Les différentes approches d'UI</h2>
<h3>Backbone</h3>
<p><a href="http://backbonejs.org">Backbone</a> apporte une simplification dans la déclaration
d'évenements, il reste cependant très peu impliqué dans le rendering. Le choix
de laisser l'utilisateur décider de tout concernant <code>Backbone.View</code> est positif
pour de nombreux projets, mais rend la gestion du DOM pénible.</p>
<p>Pour faire du data-binding, <code>Backbone</code> ne propose naturellement rien, et l'on
doit faire appel à des mixins supplémentaires pour le mettre en place sans
s'arracher les cheveux.</p>
<p>De plus, c'est souvent un moteur de templating comme Handlebars ou Jade qui
génére la vue originale. On se retrouve donc avec un joli
<code>this.$el.html(this.template(data))</code> dans la méthode <code>render()</code> qui va provoquer
des jolies horreurs visuelles (ie. les images se rechargent, les videos sont
réinitialisées).</p>
<p>En somme, Backbone est très sympathique pour structurer son code proprement,
mais concernant l'UI, n'aide absolument pas à réduire la compléxité liée aux
états du DOM.</p>
<h3>Angular</h3>
<p><a href="https://angularjs.org">Angular</a> propose une approche beaucoup plus travaillée,
en imposant un moteur de templating HTML (on peut utiliser du preprocessing) et
on déclare ses bindings très simplement avec une syntaxe <code>{{mustache}}</code>.</p>
<p>On déclare les évenements à l'aide d'attributs <code>ng-{eventName}</code>.</p>
<p>Sur le papier, angular est donc très sympathique (je ne prendrais pas parti sur
le dirty checking).</p>
<h3>Ember</h3>
<p><a href="http://emberjs.com">Ember</a> est un framework très bien pensé et très travaillé.
Il intègre très bien les concepts de <code>data-binding</code> à l'aide de
<a href="https://developer.mozilla.org/en-US/docs/Web/API/range">DOM Ranges</a>. Il propose
des conventions fortes, et contrairement à la plupart des <em>a priori</em>, est très
simple à prendre en main. Les subviews sont très simples à utiliser à l'aide
d'<code>{{outlet}}</code>.</p>
<p>Pour résumer, ember et angular proposent de vraies solutions pour la gestion de
l'UI. Cependant les deux conservent cette démarche :</p>
<ul>
<li>on <em>render</em> (génère et insère le bout de DOM) une fois</li>
<li>on update les bindings</li>
</ul>
<h3>React</h3>
<p><a href="http://facebook.github.io/react/">React</a> change complètement d'approche. Il
part d'un constat simple : le fait que le DOM ait constamment un état différent,
c'est chiant à gérer.</p>
<p>Du coup, et si on appelait <code>.render()</code> à chaque modification ? Ça a l'air
stupide, hein ? Pas tant que ça en fait.</p>
<p>React implémente un <strong>DOM virtuel</strong>, une représentation interne du DOM
extrêmement rapide. La méthode <code>render</code> retourne des objets correspondant à la
représentation interne du DOM virtuel.</p>
<p>Un composant React reçoit des <code>props</code>, ses paramètres, et peut avoir un <code>state</code>,
un état local. Lorsque l'on définit un composant React, on peut y mettre un état
par défaut en définissant une propriété <code>state</code> dans la <code>class</code>.</p>
<p>Après cela, on peut mettre à jour l'état avec la méthode <code>this.setState</code>, en y
passage les valeurs de l'état à changer afin de mettre à jour le DOM.</p>
<p>Le principal avantage est que l'on est certain, du fait de l'appel systématique
à <code>render</code>, que notre composant React aura la représentation attendue pour un
état donné, et ce à n'importe quel point dans le temps.</p>
<p>Un des autres avantages de React est son algorithme de diff interne. Le DOM
virtuel va être comparé avec la version visible, et React effectue à l'aide
d'opérations simples les seuls changements nécessaires.</p>
<p>Cela résoud des problématiques comme la position du curseur dans un champ texte
qui reçoit sa valeur de JavaScript; puisque l'algorithme n'y voit pas de
changement nécessaire, le champ texte n'est pas modifié et l'on garde donc le
focus. Du même fait, si vous avez un gif qui boucle, il ne se relancera pas
inopinément.</p>
<p>React peut être utilisé avec JSX, un <em>superset</em> de js qui permet d'écrire les
templates avec une syntaxe XML (voir l'exemple plus bas), ce qui permet de le
prendre en main très rapidement.</p>
<h2>Créons un component react :</h2>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom&quot;</span>;
<span class="hljs-keyword">import</span> cx <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;classnames&quot;</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">View</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-comment">// état initial</span>
  state = {
    <span class="hljs-attr">checked</span>: <span class="hljs-literal">false</span>,
  };
  <span class="hljs-keyword">static</span> defaultProps = {
    <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;?&quot;</span>,
  };
  toggle = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// on crée un nouvel état (les états de react sont immutable)</span>
    <span class="hljs-comment">// et on déclenche le render</span>
    <span class="hljs-built_in">this</span>.setState({
      <span class="hljs-attr">checked</span>: !<span class="hljs-built_in">this</span>.state.checked,
    });
  };
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-comment">// `cx` (classnames sur npm) permet de générer une chaîne &quot;className&quot; à</span>
    <span class="hljs-comment">// partir d&#x27;objets ayant pour clé un className et pour valeur un booléen</span>
    <span class="hljs-keyword">const</span> classes = cx({
      <span class="hljs-string">&quot;list-item&quot;</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">&quot;list-item--valid&quot;</span>: <span class="hljs-built_in">this</span>.state.checked,
    });
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{classes}</span>&gt;</span>
        {/* notre binding tout simple */}
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">checked</span>=<span class="hljs-string">{this.state.checked}</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this.toggle}</span>
        /&gt;</span>
        {this.props.label}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  }
}

<span class="hljs-comment">// on mount le component, et on passe le label</span>
ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;HelloWorld&quot;</span> /&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;id&quot;</span>));
</code></pre>
<h2>Sum up des avantages de React</h2>
<p>React a bien compris ces points :</p>
<ul>
<li>le DOM est lent, du moins en écriture, et limiter les interactions avec ce
dernier est essentiel ;</li>
<li>devoir continuellement penser à l'état du DOM à l'instant <code>n</code> n'est pas une
préoccupation que nous devrions avoir en développant l'UI de nos composants ;</li>
<li>les concepts d'immutabilité (un objet ne change pas, on en crée un nouveau à
chaque changement) et de composition (composer une classe de différentes
fonctionnalités sans devoir créer des chaînes d'héritage complexes) ont de
grands intérêts, trop peu utilisés en front-end.</li>
</ul>
<p>React n'impose pas de bibliothèque pour les data et la communication des
modules. Il existe une bibliothèque nommée <a href="https://redux.js.org">redux</a>,
aujourd'hui standard, permettant de gérer ces aspecs facilement.</p>
<p>Last but not least, vous pouvez render vos composants React depuis le serveur et
la lib sera assez intelligente pour reconnaitre les composants déjà générés pour
ne pas les render systématiquement, c'est pas beau, ça ?</p>
</div><style data-emotion="rpcss unyj6i">.rpcss-unyj6i{max-width:640px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:20px auto;padding:20px;background-color:var(--page-background-color);border-radius:10px;box-shadow:0 15px 15px -5px rgba(0, 0, 0, 0.2);}@media (max-width: 540px){.rpcss-unyj6i{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-unyj6i"><style data-emotion="rpcss ty7r4z">.rpcss-ty7r4z{font-weight:800;}</style><div class="rpcss-ty7r4z">Vous avez aimé cet article?</div><style data-emotion="rpcss klacsp">.rpcss-klacsp{width:0;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-klacsp"></div><style data-emotion="rpcss 1pkr03v">.rpcss-1pkr03v{background-color:#00aced;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:800;}.rpcss-1pkr03v:active{opacity:0.5;}</style><a class="rpcss-1pkr03v" href="https://www.twitter.com/intent/tweet?text=Introduction%20%C3%A0%20React%20sur%20%40PutainDeCode%20https%3A%2F%2Fputaindecode.io%2Farticles%2Fintroduction-a-react" target="_blank">Le partager sur Twitter</a></div><style data-emotion="rpcss x4iqxe">.rpcss-x4iqxe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;padding:20px;}</style><div class="rpcss-x4iqxe"><style data-emotion="rpcss gein6x">.rpcss-gein6x{font-size:20px;-webkit-text-decoration:none;text-decoration:none;color:#1E49B5;}</style><a class="rpcss-gein6x" href="/articles">← Articles</a></div><style data-emotion="rpcss 8bodgl">.rpcss-8bodgl{max-width:640px;width:100%;margin:0 auto;padding:20px 0;}</style><div class="rpcss-8bodgl" id="disqus_thread"></div></div></div></div></div><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1vau6rl">.rpcss-1vau6rl{margin:20px 0;background-color:var(--page-accented-background-color);border-radius:10px;padding:20px;}</style><div class="rpcss-1vau6rl"><style data-emotion="rpcss 1gz1i1h">.rpcss-1gz1i1h{font-size:32px;font-weight:800;margin-bottom:20px;text-align:center;}</style><div aria-level="2" class="rpcss-1gz1i1h" role="heading">Ne rien rater</div><style data-emotion="rpcss 1wbispj">.rpcss-1wbispj{font-size:18px;margin-bottom:10px;text-align:center;}</style><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur les réseaux</div><style data-emotion="rpcss 1hyoz7m">.rpcss-1hyoz7m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="rpcss-1hyoz7m"><a href="https://twitter.com/PutainDeCode"><img alt="Twitter" height="48" src="/public/images/website/twitter.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://facebook.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/facebook.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://github.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/github.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://itunes.apple.com/fr/podcast/putain-de-code-!/id1185311825"><img alt="Apple Podcast" height="48" src="/public/images/website/apple-podcast.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://soundcloud.com/putaindecode"><img alt="Soundcloud" height="48" src="/public/images/website/soundcloud.svg" width="48"/></a></div><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur le chat</div><div class="rpcss-1hyoz7m"><a href="https://discord.gg/jtbGNNc"><img alt="Discord" height="48" src="/public/images/website/discord.svg" width="48"/></a></div></div></div></div><style data-emotion="rpcss zs8kw7">.rpcss-zs8kw7{background-color:#222;padding:20px 0;}</style><footer class="rpcss-zs8kw7"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 79elbk">.rpcss-79elbk{position:relative;}</style><div class="rpcss-79elbk"><style data-emotion="rpcss 1hle0ni">.rpcss-1hle0ni{position:absolute;left:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1hle0ni" href="/api/articles/feeds/desc/feed.xml"><style data-emotion="rpcss lvyu5j">.rpcss-lvyu5j{margin-right:10px;}</style><img class="rpcss-lvyu5j" alt="Flux RSS" height="16" src="/public/images/website/rss-feed.svg" width="16"/><style data-emotion="rpcss um3i31">@media (max-width: 400px){.rpcss-um3i31{display:none;}}</style><div class="rpcss-um3i31">Flux RSS</div></a><style data-emotion="rpcss 12cp4l7">.rpcss-12cp4l7{color:rgba(255, 255, 255, 0.5);text-align:center;font-size:14px;}</style><div class="rpcss-12cp4l7">© 2021 Putain de code !</div><style data-emotion="rpcss 1w98uy3">.rpcss-1w98uy3{position:absolute;right:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1w98uy3" href="https://github.com/putaindecode/putaindecode.io">GitHub</a></div></div></div></footer></div><script id="initialData" type="text/data">{"lists":{"RE_PRIVATE_NONE":true},"items":{"k":"articles","v":{"k":"introduction-a-react","v":{"_0":{"TAG":0,"_0":{"slug":"introduction-a-react","filename":"2014-06-04-introduction-a-react","title":"Introduction à React","date":"Wed, 04 Jun 2014 00:00:00 GMT","draft":false,"meta":{"date":"2014-06-04T00:00:00.000Z","title":"Introduction à React","author":"bloodyowl","oldSlug":"js/react","slug":"introduction-a-react"},"body":"<p>Cela fait maintenant un an que React est open-sourced. C'est l'occasion de\nprésenter le petit dernier de la vague MV*.</p>\n<h2>Les différentes approches d'UI</h2>\n<h3>Backbone</h3>\n<p><a href=\"http://backbonejs.org\">Backbone</a> apporte une simplification dans la déclaration\nd'évenements, il reste cependant très peu impliqué dans le rendering. Le choix\nde laisser l'utilisateur décider de tout concernant <code>Backbone.View</code> est positif\npour de nombreux projets, mais rend la gestion du DOM pénible.</p>\n<p>Pour faire du data-binding, <code>Backbone</code> ne propose naturellement rien, et l'on\ndoit faire appel à des mixins supplémentaires pour le mettre en place sans\ns'arracher les cheveux.</p>\n<p>De plus, c'est souvent un moteur de templating comme Handlebars ou Jade qui\ngénére la vue originale. On se retrouve donc avec un joli\n<code>this.$el.html(this.template(data))</code> dans la méthode <code>render()</code> qui va provoquer\ndes jolies horreurs visuelles (ie. les images se rechargent, les videos sont\nréinitialisées).</p>\n<p>En somme, Backbone est très sympathique pour structurer son code proprement,\nmais concernant l'UI, n'aide absolument pas à réduire la compléxité liée aux\nétats du DOM.</p>\n<h3>Angular</h3>\n<p><a href=\"https://angularjs.org\">Angular</a> propose une approche beaucoup plus travaillée,\nen imposant un moteur de templating HTML (on peut utiliser du preprocessing) et\non déclare ses bindings très simplement avec une syntaxe <code>{{mustache}}</code>.</p>\n<p>On déclare les évenements à l'aide d'attributs <code>ng-{eventName}</code>.</p>\n<p>Sur le papier, angular est donc très sympathique (je ne prendrais pas parti sur\nle dirty checking).</p>\n<h3>Ember</h3>\n<p><a href=\"http://emberjs.com\">Ember</a> est un framework très bien pensé et très travaillé.\nIl intègre très bien les concepts de <code>data-binding</code> à l'aide de\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/range\">DOM Ranges</a>. Il propose\ndes conventions fortes, et contrairement à la plupart des <em>a priori</em>, est très\nsimple à prendre en main. Les subviews sont très simples à utiliser à l'aide\nd'<code>{{outlet}}</code>.</p>\n<p>Pour résumer, ember et angular proposent de vraies solutions pour la gestion de\nl'UI. Cependant les deux conservent cette démarche :</p>\n<ul>\n<li>on <em>render</em> (génère et insère le bout de DOM) une fois</li>\n<li>on update les bindings</li>\n</ul>\n<h3>React</h3>\n<p><a href=\"http://facebook.github.io/react/\">React</a> change complètement d'approche. Il\npart d'un constat simple : le fait que le DOM ait constamment un état différent,\nc'est chiant à gérer.</p>\n<p>Du coup, et si on appelait <code>.render()</code> à chaque modification ? Ça a l'air\nstupide, hein ? Pas tant que ça en fait.</p>\n<p>React implémente un <strong>DOM virtuel</strong>, une représentation interne du DOM\nextrêmement rapide. La méthode <code>render</code> retourne des objets correspondant à la\nreprésentation interne du DOM virtuel.</p>\n<p>Un composant React reçoit des <code>props</code>, ses paramètres, et peut avoir un <code>state</code>,\nun état local. Lorsque l'on définit un composant React, on peut y mettre un état\npar défaut en définissant une propriété <code>state</code> dans la <code>class</code>.</p>\n<p>Après cela, on peut mettre à jour l'état avec la méthode <code>this.setState</code>, en y\npassage les valeurs de l'état à changer afin de mettre à jour le DOM.</p>\n<p>Le principal avantage est que l'on est certain, du fait de l'appel systématique\nà <code>render</code>, que notre composant React aura la représentation attendue pour un\nétat donné, et ce à n'importe quel point dans le temps.</p>\n<p>Un des autres avantages de React est son algorithme de diff interne. Le DOM\nvirtuel va être comparé avec la version visible, et React effectue à l'aide\nd'opérations simples les seuls changements nécessaires.</p>\n<p>Cela résoud des problématiques comme la position du curseur dans un champ texte\nqui reçoit sa valeur de JavaScript; puisque l'algorithme n'y voit pas de\nchangement nécessaire, le champ texte n'est pas modifié et l'on garde donc le\nfocus. Du même fait, si vous avez un gif qui boucle, il ne se relancera pas\ninopinément.</p>\n<p>React peut être utilisé avec JSX, un <em>superset</em> de js qui permet d'écrire les\ntemplates avec une syntaxe XML (voir l'exemple plus bas), ce qui permet de le\nprendre en main très rapidement.</p>\n<h2>Créons un component react :</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">import</span> React <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react&quot;</span>;\n<span class=\"hljs-keyword\">import</span> ReactDOM <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react-dom&quot;</span>;\n<span class=\"hljs-keyword\">import</span> cx <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;classnames&quot;</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">View</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">React</span>.<span class=\"hljs-title\">Component</span> </span>{\n  <span class=\"hljs-comment\">// état initial</span>\n  state = {\n    <span class=\"hljs-attr\">checked</span>: <span class=\"hljs-literal\">false</span>,\n  };\n  <span class=\"hljs-keyword\">static</span> defaultProps = {\n    <span class=\"hljs-attr\">label</span>: <span class=\"hljs-string\">&quot;?&quot;</span>,\n  };\n  toggle = <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-comment\">// on crée un nouvel état (les états de react sont immutable)</span>\n    <span class=\"hljs-comment\">// et on déclenche le render</span>\n    <span class=\"hljs-built_in\">this</span>.setState({\n      <span class=\"hljs-attr\">checked</span>: !<span class=\"hljs-built_in\">this</span>.state.checked,\n    });\n  };\n  <span class=\"hljs-function\"><span class=\"hljs-title\">render</span>(<span class=\"hljs-params\"></span>)</span> {\n    <span class=\"hljs-comment\">// `cx` (classnames sur npm) permet de générer une chaîne &quot;className&quot; à</span>\n    <span class=\"hljs-comment\">// partir d&#x27;objets ayant pour clé un className et pour valeur un booléen</span>\n    <span class=\"hljs-keyword\">const</span> classes = cx({\n      <span class=\"hljs-string\">&quot;list-item&quot;</span>: <span class=\"hljs-literal\">true</span>,\n      <span class=\"hljs-string\">&quot;list-item--valid&quot;</span>: <span class=\"hljs-built_in\">this</span>.state.checked,\n    });\n    <span class=\"hljs-keyword\">return</span> (\n      <span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{classes}</span>&gt;</span>\n        {/* notre binding tout simple */}\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span>\n          <span class=\"hljs-attr\">checked</span>=<span class=\"hljs-string\">{this.state.checked}</span>\n          <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;checkbox&quot;</span>\n          <span class=\"hljs-attr\">onChange</span>=<span class=\"hljs-string\">{this.toggle}</span>\n        /&gt;</span>\n        {this.props.label}\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n    );\n  }\n}\n\n<span class=\"hljs-comment\">// on mount le component, et on passe le label</span>\nReactDOM.render(<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">View</span> <span class=\"hljs-attr\">label</span>=<span class=\"hljs-string\">&quot;HelloWorld&quot;</span> /&gt;</span></span>, <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">&quot;id&quot;</span>));\n</code></pre>\n<h2>Sum up des avantages de React</h2>\n<p>React a bien compris ces points :</p>\n<ul>\n<li>le DOM est lent, du moins en écriture, et limiter les interactions avec ce\ndernier est essentiel ;</li>\n<li>devoir continuellement penser à l'état du DOM à l'instant <code>n</code> n'est pas une\npréoccupation que nous devrions avoir en développant l'UI de nos composants ;</li>\n<li>les concepts d'immutabilité (un objet ne change pas, on en crée un nouveau à\nchaque changement) et de composition (composer une classe de différentes\nfonctionnalités sans devoir créer des chaînes d'héritage complexes) ont de\ngrands intérêts, trop peu utilisés en front-end.</li>\n</ul>\n<p>React n'impose pas de bibliothèque pour les data et la communication des\nmodules. Il existe une bibliothèque nommée <a href=\"https://redux.js.org\">redux</a>,\naujourd'hui standard, permettant de gérer ces aspecs facilement.</p>\n<p>Last but not least, vous pouvez render vos composants React depuis le serveur et\nla lib sera assez intelligente pour reconnaitre les composants déjà générés pour\nne pas les render systématiquement, c'est pas beau, ça ?</p>\n"}}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"listsRequests":{"data":{"RE_PRIVATE_NONE":true}},"itemsRequests":{"data":{"RE_PRIVATE_NONE":true}}}</script><head><script defer="defer" src="/public/main.56c69761a03eb0112696.js"></script></head></html>