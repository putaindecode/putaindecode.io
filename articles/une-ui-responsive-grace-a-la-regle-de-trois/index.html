<!DOCTYPE html><html lang="fr"><head><title data-react-helmet="true">Une UI responsive grâce à la règle de trois | Putain de code</title><meta data-react-helmet="true" charset="UTF-8"/><meta data-react-helmet="true" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" name="viewport"/><meta data-react-helmet="true" content="summary_large_image" name="twitter:card"/><meta data-react-helmet="true" content="Putain de code !" property="og:site_name"/><meta data-react-helmet="true" content="@putaindecode" name="twitter:site"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" property="og:image"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" name="twitter:image"/><meta data-react-helmet="true" content="1500" property="og:image:width"/><meta data-react-helmet="true" content="777" property="og:image:height"/><meta data-react-helmet="true" content="Une UI responsive grâce à la règle de trois | Putain de code" property="og:title"/><meta data-react-helmet="true" content="Une UI responsive grâce à la règle de trois | Putain de code" name="twitter:title"/><meta data-react-helmet="true" content="Un article proposé par zoontek" name="description"/><link data-react-helmet="true" title="RSS Feed" href="/api/articles/feeds/desc/feed.xml" rel="alternate" type="application/rss+xml"/><link data-react-helmet="true" href="/favicon.ico" rel="shortcut icon"/><link data-react-helmet="true" href="https://putaindecode.io/articles/une-ui-responsive-grace-a-la-regle-de-trois" rel="canonical"/><script>window.PAGES_BOOT_MODE="hydrate";</script></head><div id="root"><style data-emotion="rpcss zx73cm 1lc6tyj 28v1b4">@-webkit-keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}@keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}:root{--page-background-color:#fff;--page-slightly-accented-background-color:#F9F6F6;--page-accented-background-color:#E4EBEE;--page-text-color:#46515B;--link-text-color:#E51D58;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#FAF3E1;--one-percent-contrast-color:rgba(0, 0, 0, 0.1);--half-percent-contrast-color:rgba(0, 0, 0, 0.05);}@media (prefers-color-scheme: dark){:root{--page-background-color:#222;--page-slightly-accented-background-color:#171717;--page-accented-background-color:#111;--page-text-color:#ddd;--link-text-color:#F87098;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#4F3804;--one-percent-contrast-color:rgba(255, 255, 255, 0.1);--half-percent-contrast-color:rgba(255, 255, 255, 0.05);}}body{padding:0;margin:0;background-color:var(--page-background-color);color:var(--page-text-color);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;overflow-x:hidden;}html{font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}a{color:var(--link-text-color);-webkit-text-decoration:underline;text-decoration:underline;}a:hover{-webkit-text-decoration:none;text-decoration:none;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}*,*:before,*:after{box-sizing:border-box;}pre,.hljs{color:#adbac7;background:#22272e;}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067;}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb;}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#6cb6ff;}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#96d0ff;}.hljs-built_in,.hljs-symbol{color:#f69d50;}.hljs-comment,.hljs-code,.hljs-formula{color:#768390;}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#8ddb8c;}.hljs-subst{color:#adbac7;}.hljs-section{color:#316dca;font-weight:bold;}.hljs-bullet{color:#eac55f;}.hljs-emphasis{color:#adbac7;font-style:italic;}.hljs-strong{color:#adbac7;font-weight:bold;}.hljs-addition{color:#b4f1b4;background-color:#1b4721;}.hljs-deletion{color:#ffd8d3;background-color:#78191b;}</style><style data-emotion="rpcss 9vhaby">.rpcss-9vhaby{background-color:var(--gradient-red-bottom);background-image:linear-gradient(to bottom right, var(--gradient-red-top), var(--gradient-red-bottom));}</style><header class="rpcss-9vhaby" style="background-image:linear-gradient(to bottom right, hsl(261, 100%, 35%), hsl(217, 100%, 30%))"><style data-emotion="rpcss 1qqk0tr">.rpcss-1qqk0tr{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}</style><div class="rpcss-1qqk0tr"><style data-emotion="rpcss qx7dny">.rpcss-qx7dny{width:100%;max-width:1024px;margin:0 auto;padding:0 10px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="rpcss-qx7dny"><style data-emotion="rpcss 7s9om2">.rpcss-7s9om2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:20px 0 50px;}</style><div class="rpcss-7s9om2"><style data-emotion="rpcss gdpa5c">.rpcss-gdpa5c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-gdpa5c" href="/"><style data-emotion="rpcss 1lm4738">.rpcss-1lm4738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;padding-bottom:10px;}</style><div class="rpcss-1lm4738"><style data-emotion="rpcss 13o7eu2">.rpcss-13o7eu2{display:block;}</style><svg class="rpcss-13o7eu2" height="36px" width="36px" viewBox="0 0 36 36"><defs><linearGradient id="PutainDeCodeLogoGradient" x1="50%" x2="50%" y1="0%" y2="127.223881%"><stop offset="0%" stop-color="#E41D57"></stop><stop offset="100%" stop-color="#C60000"></stop></linearGradient></defs><circle cx="18" cy="18" fill="url(#PutainDeCodeLogoGradient)" r="17" stroke="#FFFFFF" stroke-width="2"></circle><polygon fill="#FFFFFF" points="15.9033203 18.2246094 15.9033203 18.3710938 11.2304688 20.5317383 11.2304688 22.8095703 18.0566406 19.184082 18.0566406 17.4116211 11.2304688 13.7788086 11.2304688 16.0639648"></polygon><rect height="14" width="2" fill="#FFFFFF" x="22" y="11"><animate attributeName="opacity" begin="100ms" calcMode="discrete" dur="2s" repeatCount="indefinite" values="1;0"></animate></rect></svg><style data-emotion="rpcss 4cf197">.rpcss-4cf197{width:10px;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-4cf197"></div><style data-emotion="rpcss u5k24">.rpcss-u5k24{font-size:22px;color:#fff;font-weight:800;}</style><div aria-level="2" class="rpcss-u5k24" role="heading">Putain de code !</div></div><style data-emotion="rpcss 1nyebg4">.rpcss-1nyebg4{font-size:14px;color:rgba(255, 255, 255, 0.8);text-align:center;}</style><div class="rpcss-1nyebg4">Blog participatif de la communauté dev</div></a></div></div></div></header><style data-emotion="rpcss a4ric9">.rpcss-a4ric9{background-color:var(--page-slightly-accented-background-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="rpcss-a4ric9"><style data-emotion="rpcss oeugsb">.rpcss-oeugsb{-webkit-animation:500ms ease-out animation-zx73cm;animation:500ms ease-out animation-zx73cm;}</style><div class="rpcss-oeugsb"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1qc2bam">.rpcss-1qc2bam{font-size:42px;font-weight:800;text-align:center;padding-top:40px;line-height:1.2;margin:0;}</style><h1 class="rpcss-1qc2bam">Une UI responsive grâce à la règle de trois</h1><style data-emotion="rpcss obg2kr">.rpcss-obg2kr{font-size:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:40px;color:var(--page-text-color);-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-obg2kr" href="https://github.com/zoontek"><style data-emotion="rpcss uco8i7">.rpcss-uco8i7{width:32px;height:32px;border-radius:100%;margin-right:10px;}</style><img class="rpcss-uco8i7" alt="zoontek" src="https://avatars.githubusercontent.com/zoontek?size=64"/><div>zoontek<!-- --> <!-- -->•<!-- --> <!-- -->2019/03/21</div></a><style data-emotion="rpcss 15kxmi0">.rpcss-15kxmi0{max-width:640px;width:100%;font-size:18px;margin:0 auto;line-height:1.7;}.rpcss-15kxmi0 h2,.rpcss-15kxmi0 h3,.rpcss-15kxmi0 h4,.rpcss-15kxmi0 h5,.rpcss-15kxmi0 h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-weight:800;line-height:1.2;}.rpcss-15kxmi0 img{max-width:100%;background-color:rgba(255, 255, 255, 0.75);}.rpcss-15kxmi0 code{font-size:0.9em;font-family:PragmataPro,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:1;background-color:var(--code-background-color);margin:0 0.2em;}.rpcss-15kxmi0 pre{padding:10px;overflow-x:auto;font-size:14px;border-radius:10px;border:2px solid var(--one-percent-contrast-color);-webkit-overflow-scrolling:touch;}.rpcss-15kxmi0 pre code{font-size:14px;background-color:transparent;margin:0;}.rpcss-15kxmi0 blockquote{padding-left:20px;margin:0;font-size:16px;border-left:3px solid var(--one-percent-contrast-color);font-style:italic;}.rpcss-15kxmi0 table{width:100%;text-align:center;}.rpcss-15kxmi0 figure{padding:20px 0;}.rpcss-15kxmi0 figcaption{text-align:center;}.rpcss-15kxmi0 a{word-wrap:break-word;}.rpcss-15kxmi0 table thead th{background-color:var(--page-accented-background-color);padding:10px 0;}</style><div class="rpcss-15kxmi0"><p>Vous venez de coder un composant <code>TwitterButton</code> (avec React, Vue, en suivant une méthodo BEM, OOCSS, ou autre: c'est comme vous voulez) et franchement c'est du beau boulot: le rendu est vraiment très joli, kudos au designer.</p>
<p>Seulement très vite, ce dernier jette un coup d'oeil à la recette et vous fait un petit retour parce qu'il :</p>
<ol>
<li>vous a fait parvenir des maquettes &quot;mobile-first&quot; et trouve le résultat &quot;un peu petit sur son iMac 27 pouces&quot;</li>
<li>vous a fait parvenir des maquettes &quot;desktop-first&quot; et trouve le résultat &quot;un peu gros sur son iPhone XS&quot;</li>
</ol>
<p>Vous ajoutez donc quelques media queries pour adapter le style de ce bouton en fonction de la largeur du viewport. Ses dimensions changent maintenant lorsque la page fait plus de <code>768px</code> de large, puis lorsqu'elle fait plus de <code>968px</code> et enfin plus de <code>1200px</code>. Un chouia fastidieux.</p>
<p>Vous pestez un peu sur votre collègue qui aurait dû vous fournir toutes les maquettes (alors qu'il n'a pas forcément eu le temps de les créer) et lui peste car vous l'avez dérangé toutes les 2 minutes pour obtenir ces mesures intermédiaires.</p>
<p>Il vous reste 72 composants à coder. Super ambiance dans les bureaux 👏🏼</p>
<p>Plutôt que de demander à votre supérieur Jean-Michel de prendre parti pour résoudre ce problème, nous allons faire appel aux <strong>MATHS</strong>.</p>
<h2>L'interpolation linéaire entre 2 valeurs</h2>
<p>Des termes foutrement complexes pour définir quelque chose de très simple: il s'agit de faire transiter une valeur <strong><em>γ</em></strong> de <strong><em>α</em></strong> à <strong><em>β</em></strong> de façon linéaire et dans notre cas borné dans un intervalle donnée.</p>
<p><img src="/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/linear-interpolation.png" alt="Explication schématisée de l'interpolation linéaire bornée" /></p>
<p>En partant de ça, nous allons définir une UI fluide à l'aide de 3 variables :</p>
<ul>
<li><code>baseFontSize: number (px value)</code></li>
<li><code>scaleRatio: number (abs value)</code></li>
<li><code>fluidRange: [number (px value), number (px value)]</code></li>
</ul>
<p>Prenons l'exemple d'un site web où, en mobile-first, la taille de police par défaut (<code>baseFontSize</code>) est de <code>16px</code>. On souhaiterait que celle-ci soit de <code>20px</code> lorsque le viewport fait plus de <code>1600px</code> de large (donc que le coefficient d'agrandissement - <code>scaleRatio</code> - soit de <code>20 / 16 = 1.25</code>) et que la transition pour passer de 16 à 20 ne se déclenche pas avant que le viewport fasse <strong>au moins</strong> <code>480px</code> de large.</p>
<p><img src="/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/linear-interpolation-with-values.png" alt="Exemple d'interpolation linéaire bornée avec valeurs" /></p>
<p>La fonction suivante va nous permettre d'obtenir cette fameuse interpolation linéaire sous le forme d'une formule CSS avec <code>calc()</code> :</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// on utilise JS par praticité</span>

<span class="hljs-keyword">let</span> getLinearInterpolation = <span class="hljs-function">(<span class="hljs-params">
  baseFontSize, <span class="hljs-comment">// number</span>
  scaleRatio, <span class="hljs-comment">// number</span>
  fluidRange <span class="hljs-comment">// [number, number]</span>
</span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> maxFontSize = baseFontSize * scaleRatio;
  <span class="hljs-keyword">let</span> [rangeStart, rangeEnd] = fluidRange;
  <span class="hljs-keyword">let</span> multiplier = (baseFontSize - maxFontSize) / (rangeStart - rangeEnd);
  <span class="hljs-keyword">let</span> fixed = maxFontSize - multiplier * rangeEnd;

  <span class="hljs-keyword">return</span> <span class="hljs-string">`calc(<span class="hljs-subst">${fixed}</span>px + <span class="hljs-subst">${<span class="hljs-number">100</span> * multiplier}</span>vw)`</span>;
};
</code></pre>
<p>Si vous copiez-collez ça comme un sagouin dans la console devtools de votre navigateur web et tentez un essai avec les valeurs de notre exemple, vous obtiendrez normalement :</p>
<p><img src="/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/devtools-result.png" alt="Le résultat de notre appel de fonction" /></p>
<p>Voyons maintenant comment nous servir de ça.</p>
<h2>Un coefficient d'agrandissement global</h2>
<p>L'intérêt de cette valeur, c'est qu'elle va nous permettre de modifier toutes les dimensions que l'on veut de façon progressive et <strong>proportionnelle</strong>.</p>
<p>Petit exemple, simple, basique :</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>Hello world<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;red-block&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-scss"><span class="hljs-comment">// exemple avec SCSS</span>

<span class="hljs-selector-tag">html</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>; <span class="hljs-comment">// baseFontSize</span>
}

<span class="hljs-keyword">@media</span> (min-width: <span class="hljs-number">480px</span> /* fluidRange start */) {
  <span class="hljs-selector-tag">html</span> {
    <span class="hljs-comment">// l&#x27;interpolation linéaire</span>
    <span class="hljs-attribute">font-size</span>: calc(<span class="hljs-number">14.285714285714285px</span> + <span class="hljs-number">0.35714285714285715vw</span>);
  }
}

<span class="hljs-keyword">@media</span> (min-width: <span class="hljs-number">1600px</span> /* fluidRange end */) {
  <span class="hljs-selector-tag">html</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>; <span class="hljs-comment">// baseFontSize * scaleRatio</span>
  }
}

<span class="hljs-comment">// par défaut dans les navigateurs 1rem = 16px, cette fonction nous simplifie les divisions</span>
<span class="hljs-comment">// si vous faites du CSS-in-JS, let fluid = v =&gt; `${v / 16}rem` fait le job</span>
<span class="hljs-keyword">@function</span> fluid(<span class="hljs-variable">$value</span>) {
  <span class="hljs-keyword">@return</span> <span class="hljs-variable">$value</span> / <span class="hljs-number">16</span> + rem;
}

<span class="hljs-selector-class">.title</span> {
  <span class="hljs-comment">// si largeur du viewport &lt; 480px -&gt; font-size = 24px</span>
  <span class="hljs-comment">// si largeur du viewport &gt; 1600px -&gt; font-size = 24 * 1.25 = 30px</span>
  <span class="hljs-comment">// si 480px &lt; largeur du viewport &lt; 1600px -&gt; 24px &lt; font-size &lt; 30px</span>
  <span class="hljs-attribute">font-size</span>: fluid(<span class="hljs-number">24</span>);
}

<span class="hljs-selector-class">.red-block</span> {
  <span class="hljs-attribute">background-color</span>: red;
  <span class="hljs-comment">// les dimensions seront contenues entre 100px et 100 * 1.25 = 125px</span>
  <span class="hljs-attribute">height</span>: fluid(<span class="hljs-number">100</span>);
  <span class="hljs-attribute">width</span>: fluid(<span class="hljs-number">100</span>);
}
</code></pre>
<figure>
  <a href="/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/basic-example-result.gif">
    <img src="/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/basic-example-result.gif" alt="résultat quand on joue sur la largeur du viewport" />
  </a>
  <figcaption>(Cliquez sur le gif pour le voir en taille réelle)</figcaption>
</figure>
<h2>Forcer une font-size par défaut, c'est MAL</h2>
<p><em>(On va se mentir et tenter d'ignorer le fait que tout le monde utilise le zoom)</em></p>
<p>En effet, l'utilisateur peut toujours choisir d'avoir une taille de police plus petite ou plus grande que celle par défaut (<code>16px</code>) et c'est franchement pas très accessible de forcer.</p>
<p>On va donc modifier notre fonction JS et tenir compte de ça.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">let</span> getCSSFluidConfig = <span class="hljs-function">(<span class="hljs-params">
  baseFontSize, <span class="hljs-comment">// number</span>
  scaleRatio, <span class="hljs-comment">// number</span>
  fluidRange <span class="hljs-comment">// [number, number]</span>
</span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> toRem = <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value / <span class="hljs-number">16</span>;

  <span class="hljs-keyword">let</span> maxFontSize = baseFontSize * scaleRatio;
  <span class="hljs-keyword">let</span> baseRemFontSize = toRem(baseFontSize);
  <span class="hljs-keyword">let</span> maxRemFontSize = toRem(maxFontSize);

  <span class="hljs-keyword">let</span> [rangeStart, rangeEnd] = fluidRange;
  <span class="hljs-comment">// on évite rem pour les media queries: merci Safari</span>
  <span class="hljs-comment">// pas de soucis pour utiliser toRem malgré tout:</span>
  <span class="hljs-comment">// les media queries sont à la racine du document</span>
  <span class="hljs-keyword">let</span> emRangeStart = toRem(rangeStart);
  <span class="hljs-keyword">let</span> emRangeEnd = toRem(rangeEnd);

  <span class="hljs-keyword">let</span> multiplier =
    (baseRemFontSize - maxRemFontSize) / (emRangeStart - emRangeEnd);
  <span class="hljs-keyword">let</span> fixed = maxRemFontSize - multiplier * emRangeEnd;

  <span class="hljs-comment">// on en profite également pour retourner l&#x27;intégralité du CSS voulu</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">`html { font-size: <span class="hljs-subst">${baseRemFontSize}</span>rem }

@media (min-width: <span class="hljs-subst">${emRangeStart}</span>em) {
  html { font-size: calc(<span class="hljs-subst">${fixed}</span>rem + <span class="hljs-subst">${<span class="hljs-number">100</span> * multiplier}</span>vw) }
}

@media (min-width: <span class="hljs-subst">${emRangeEnd}</span>em) {
  html { font-size: <span class="hljs-subst">${maxRemFontSize}</span>rem }
}`</span>;
};
</code></pre>
<!-- ![Le résultat de notre appel de fonction](/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/devtools-responsive-result.png) -->
<p>Et voilà ! Ça continue de faire ce que l'on veut, mais en prenant en compte la taille de police par défaut définie par l'utilisateur.</p>
<h2>Un exemple un peu plus complexe</h2>
<p>Vous vous êtes empressé d'embêter le designer à nouveau afin de déterminer ces 3 variables ensemble: ça sera donc une <code>font-size</code> comprise entre <code>16px</code> et <code>18px</code> (donc une UI qui scale jusqu'à <code>18 / 16</code> = <code>1.125</code> …vous êtes encore frileux à l'idée) entre <code>480px</code> et <code>1440px</code> !</p>
<p>Il est maintenant temps de modifier ce fameux bouton.</p>
<pre><code class="hljs language-js">getCSSFluidConfig(<span class="hljs-number">16</span>, <span class="hljs-number">1.125</span>, [<span class="hljs-number">480</span>, <span class="hljs-number">1440</span>]);

<span class="hljs-comment">/* -&gt; &quot;html { font-size: 1rem }

@media (min-width: 30em) {
  html { font-size: calc(0.9375rem + 0.20833333333333334vw) }
}

@media (min-width: 90em) {
  html { font-size: 1.125rem }
}&quot; */</span>
</code></pre>
<pre><code class="hljs language-scss"><span class="hljs-comment">// le code généré</span>

<span class="hljs-selector-tag">html</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
}

<span class="hljs-keyword">@media</span> (min-width: <span class="hljs-number">30em</span>) {
  <span class="hljs-selector-tag">html</span> {
    <span class="hljs-attribute">font-size</span>: calc(<span class="hljs-number">0.9375rem</span> + <span class="hljs-number">0.20833333333333334vw</span>);
  }
}

<span class="hljs-keyword">@media</span> (min-width: <span class="hljs-number">90em</span>) {
  <span class="hljs-selector-tag">html</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.125rem</span>;
  }
}

<span class="hljs-comment">// fonctions utilitaires</span>

<span class="hljs-keyword">@function</span> fluid(<span class="hljs-variable">$value</span>) {
  <span class="hljs-keyword">@return</span> <span class="hljs-variable">$value</span> / <span class="hljs-number">16</span> + rem;
}

<span class="hljs-comment">// le reste du CSS</span>

<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">&quot;Segoe UI&quot;</span>, Roboto, Helvetica,
    Arial, sans-serif, <span class="hljs-string">&quot;Apple Color Emoji&quot;</span>, <span class="hljs-string">&quot;Segoe UI Emoji&quot;</span>, <span class="hljs-string">&quot;Segoe UI Symbol&quot;</span>;
}

<span class="hljs-selector-class">.twitter-btn</span> {
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#1da1f3</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#218de4</span>; <span class="hljs-comment">// il ne serait pas logique que border-width soit fluide</span>
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>; <span class="hljs-comment">// idem pour border-radius</span>
  <span class="hljs-attribute">padding</span>: fluid(<span class="hljs-number">4</span>);
  <span class="hljs-attribute">padding-right</span>: fluid(<span class="hljs-number">8</span>);
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> <span class="hljs-number">5px</span> -<span class="hljs-number">5px</span> rgba(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.25</span>);
}

<span class="hljs-selector-class">.twitter-btn</span> svg {
  <span class="hljs-attribute">height</span>: fluid(<span class="hljs-number">24</span>);
  <span class="hljs-attribute">width</span>: fluid(<span class="hljs-number">24</span>);
}

<span class="hljs-selector-class">.twitter-btn</span> <span class="hljs-selector-tag">span</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">font-size</span>: fluid(<span class="hljs-number">14</span>);
  <span class="hljs-attribute">margin-left</span>: fluid(<span class="hljs-number">4</span>);
}
</code></pre>
<p>Ainsi,</p>
<ul>
<li>la <code>font-size</code> par défaut fera entre <code>1rem</code> et <code>1.125rem</code><br/>(<code>16px</code> et <code>18px</code> si réglage navigateur par défaut)</li>
<li>le <code>padding</code> de <code>.twitter-btn</code> fera entre <code>0.25rem</code> et <code>0.28125rem</code><br/>(<code>4px</code> et <code>4.5px</code>)</li>
<li>la <code>height</code> et la <code>width</code> du svg feront entre <code>1.5rem</code> et <code>1.6875rem</code><br/>(<code>24px</code> et <code>27px</code>)</li>
<li>etc… vous avez l'idée, tout reste proportionnel.</li>
</ul>
<figure>
  <a href="/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/twitter-button-result.gif">
    <img src="/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/twitter-button-result.gif" alt="résultat quand on joue sur la largeur du viewport" />
  </a>
  <figcaption>(Cliquez sur le gif pour le voir en taille réelle)</figcaption>
</figure>
<p>La différence est <strong>très subtile</strong> (mais vous étiez frileux). L'avantage, c'est que si vous changez d'avis dans 3 semaines pour finalement passer sur un agrandissement de <strong>x1.5</strong> à <code>2560px</code> de large, il vous suffira générer un nouveau ce petit bout de code, de copier/coller les quelques lignes obtenues au début de votre fichier CSS …et c'est tout ! Inutile de revenir dans les composants ou de refaire un quelconque calcul.</p>
<p>Pour que ce soit encore plus simple, je vous ai concocté un petit générateur :</p>
<p><iframe
  width="1px"
  height="510"
  scrolling="no"
  style="border: 2px solid rgba(0,0,0,0.1); border-radius: 10px; width: 1px; min-width: 100%;"
  src="/public/misc/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/generator.html"></p>
</iframe>
<p>Il ne vous qu'à profiter de toute ces heures gagnées en invitant votre (maintenant pote) graphiste à boire une bière ! 🍻</p>
</div><style data-emotion="rpcss unyj6i">.rpcss-unyj6i{max-width:640px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:20px auto;padding:20px;background-color:var(--page-background-color);border-radius:10px;box-shadow:0 15px 15px -5px rgba(0, 0, 0, 0.2);}@media (max-width: 540px){.rpcss-unyj6i{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-unyj6i"><style data-emotion="rpcss ty7r4z">.rpcss-ty7r4z{font-weight:800;}</style><div class="rpcss-ty7r4z">Vous avez aimé cet article?</div><style data-emotion="rpcss klacsp">.rpcss-klacsp{width:0;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-klacsp"></div><style data-emotion="rpcss 1pkr03v">.rpcss-1pkr03v{background-color:#00aced;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:800;}.rpcss-1pkr03v:active{opacity:0.5;}</style><a class="rpcss-1pkr03v" href="https://www.twitter.com/intent/tweet?text=Une%20UI%20responsive%20gr%C3%A2ce%20%C3%A0%20la%20r%C3%A8gle%20de%20trois%20sur%20%40PutainDeCode%20https%3A%2F%2Fputaindecode.io%2Farticles%2Fune-ui-responsive-grace-a-la-regle-de-trois" target="_blank">Le partager sur Twitter</a></div><style data-emotion="rpcss x4iqxe">.rpcss-x4iqxe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;padding:20px;}</style><div class="rpcss-x4iqxe"><style data-emotion="rpcss gein6x">.rpcss-gein6x{font-size:20px;-webkit-text-decoration:none;text-decoration:none;color:#1E49B5;}</style><a class="rpcss-gein6x" href="/articles">← Articles</a></div><style data-emotion="rpcss 8bodgl">.rpcss-8bodgl{max-width:640px;width:100%;margin:0 auto;padding:20px 0;}</style><div class="rpcss-8bodgl" id="disqus_thread"></div></div></div></div></div><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1vau6rl">.rpcss-1vau6rl{margin:20px 0;background-color:var(--page-accented-background-color);border-radius:10px;padding:20px;}</style><div class="rpcss-1vau6rl"><style data-emotion="rpcss 1gz1i1h">.rpcss-1gz1i1h{font-size:32px;font-weight:800;margin-bottom:20px;text-align:center;}</style><div aria-level="2" class="rpcss-1gz1i1h" role="heading">Ne rien rater</div><style data-emotion="rpcss 1wbispj">.rpcss-1wbispj{font-size:18px;margin-bottom:10px;text-align:center;}</style><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur les réseaux</div><style data-emotion="rpcss 1hyoz7m">.rpcss-1hyoz7m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="rpcss-1hyoz7m"><a href="https://twitter.com/PutainDeCode"><img alt="Twitter" height="48" src="/public/images/website/twitter.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://facebook.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/facebook.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://github.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/github.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://itunes.apple.com/fr/podcast/putain-de-code-!/id1185311825"><img alt="Apple Podcast" height="48" src="/public/images/website/apple-podcast.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://soundcloud.com/putaindecode"><img alt="Soundcloud" height="48" src="/public/images/website/soundcloud.svg" width="48"/></a></div><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur le chat</div><div class="rpcss-1hyoz7m"><a href="https://discord.gg/jtbGNNc"><img alt="Discord" height="48" src="/public/images/website/discord.svg" width="48"/></a></div></div></div></div><style data-emotion="rpcss zs8kw7">.rpcss-zs8kw7{background-color:#222;padding:20px 0;}</style><footer class="rpcss-zs8kw7"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 79elbk">.rpcss-79elbk{position:relative;}</style><div class="rpcss-79elbk"><style data-emotion="rpcss 1hle0ni">.rpcss-1hle0ni{position:absolute;left:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1hle0ni" href="/api/articles/feeds/desc/feed.xml"><style data-emotion="rpcss lvyu5j">.rpcss-lvyu5j{margin-right:10px;}</style><img class="rpcss-lvyu5j" alt="Flux RSS" height="16" src="/public/images/website/rss-feed.svg" width="16"/><style data-emotion="rpcss um3i31">@media (max-width: 400px){.rpcss-um3i31{display:none;}}</style><div class="rpcss-um3i31">Flux RSS</div></a><style data-emotion="rpcss 12cp4l7">.rpcss-12cp4l7{color:rgba(255, 255, 255, 0.5);text-align:center;font-size:14px;}</style><div class="rpcss-12cp4l7">© 2021 Putain de code !</div><style data-emotion="rpcss 1w98uy3">.rpcss-1w98uy3{position:absolute;right:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1w98uy3" href="https://github.com/putaindecode/putaindecode.io">GitHub</a></div></div></div></footer></div><script id="initialData" type="text/data">{"lists":{"RE_PRIVATE_NONE":true},"items":{"k":"articles","v":{"k":"une-ui-responsive-grace-a-la-regle-de-trois","v":{"_0":{"TAG":0,"_0":{"slug":"une-ui-responsive-grace-a-la-regle-de-trois","filename":"2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois","title":"Une UI responsive grâce à la règle de trois","date":"Thu, 21 Mar 2019 00:00:00 GMT","draft":false,"meta":{"date":"2019-03-21T00:00:00.000Z","title":"Une UI responsive grâce à la règle de trois","author":"zoontek","slug":"une-ui-responsive-grace-a-la-regle-de-trois"},"body":"<p>Vous venez de coder un composant <code>TwitterButton</code> (avec React, Vue, en suivant une méthodo BEM, OOCSS, ou autre: c'est comme vous voulez) et franchement c'est du beau boulot: le rendu est vraiment très joli, kudos au designer.</p>\n<p>Seulement très vite, ce dernier jette un coup d'oeil à la recette et vous fait un petit retour parce qu'il :</p>\n<ol>\n<li>vous a fait parvenir des maquettes &quot;mobile-first&quot; et trouve le résultat &quot;un peu petit sur son iMac 27 pouces&quot;</li>\n<li>vous a fait parvenir des maquettes &quot;desktop-first&quot; et trouve le résultat &quot;un peu gros sur son iPhone XS&quot;</li>\n</ol>\n<p>Vous ajoutez donc quelques media queries pour adapter le style de ce bouton en fonction de la largeur du viewport. Ses dimensions changent maintenant lorsque la page fait plus de <code>768px</code> de large, puis lorsqu'elle fait plus de <code>968px</code> et enfin plus de <code>1200px</code>. Un chouia fastidieux.</p>\n<p>Vous pestez un peu sur votre collègue qui aurait dû vous fournir toutes les maquettes (alors qu'il n'a pas forcément eu le temps de les créer) et lui peste car vous l'avez dérangé toutes les 2 minutes pour obtenir ces mesures intermédiaires.</p>\n<p>Il vous reste 72 composants à coder. Super ambiance dans les bureaux 👏🏼</p>\n<p>Plutôt que de demander à votre supérieur Jean-Michel de prendre parti pour résoudre ce problème, nous allons faire appel aux <strong>MATHS</strong>.</p>\n<h2>L'interpolation linéaire entre 2 valeurs</h2>\n<p>Des termes foutrement complexes pour définir quelque chose de très simple: il s'agit de faire transiter une valeur <strong><em>γ</em></strong> de <strong><em>α</em></strong> à <strong><em>β</em></strong> de façon linéaire et dans notre cas borné dans un intervalle donnée.</p>\n<p><img src=\"/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/linear-interpolation.png\" alt=\"Explication schématisée de l'interpolation linéaire bornée\" /></p>\n<p>En partant de ça, nous allons définir une UI fluide à l'aide de 3 variables :</p>\n<ul>\n<li><code>baseFontSize: number (px value)</code></li>\n<li><code>scaleRatio: number (abs value)</code></li>\n<li><code>fluidRange: [number (px value), number (px value)]</code></li>\n</ul>\n<p>Prenons l'exemple d'un site web où, en mobile-first, la taille de police par défaut (<code>baseFontSize</code>) est de <code>16px</code>. On souhaiterait que celle-ci soit de <code>20px</code> lorsque le viewport fait plus de <code>1600px</code> de large (donc que le coefficient d'agrandissement - <code>scaleRatio</code> - soit de <code>20 / 16 = 1.25</code>) et que la transition pour passer de 16 à 20 ne se déclenche pas avant que le viewport fasse <strong>au moins</strong> <code>480px</code> de large.</p>\n<p><img src=\"/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/linear-interpolation-with-values.png\" alt=\"Exemple d'interpolation linéaire bornée avec valeurs\" /></p>\n<p>La fonction suivante va nous permettre d'obtenir cette fameuse interpolation linéaire sous le forme d'une formule CSS avec <code>calc()</code> :</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// on utilise JS par praticité</span>\n\n<span class=\"hljs-keyword\">let</span> getLinearInterpolation = <span class=\"hljs-function\">(<span class=\"hljs-params\">\n  baseFontSize, <span class=\"hljs-comment\">// number</span>\n  scaleRatio, <span class=\"hljs-comment\">// number</span>\n  fluidRange <span class=\"hljs-comment\">// [number, number]</span>\n</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">let</span> maxFontSize = baseFontSize * scaleRatio;\n  <span class=\"hljs-keyword\">let</span> [rangeStart, rangeEnd] = fluidRange;\n  <span class=\"hljs-keyword\">let</span> multiplier = (baseFontSize - maxFontSize) / (rangeStart - rangeEnd);\n  <span class=\"hljs-keyword\">let</span> fixed = maxFontSize - multiplier * rangeEnd;\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">`calc(<span class=\"hljs-subst\">${fixed}</span>px + <span class=\"hljs-subst\">${<span class=\"hljs-number\">100</span> * multiplier}</span>vw)`</span>;\n};\n</code></pre>\n<p>Si vous copiez-collez ça comme un sagouin dans la console devtools de votre navigateur web et tentez un essai avec les valeurs de notre exemple, vous obtiendrez normalement :</p>\n<p><img src=\"/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/devtools-result.png\" alt=\"Le résultat de notre appel de fonction\" /></p>\n<p>Voyons maintenant comment nous servir de ça.</p>\n<h2>Un coefficient d'agrandissement global</h2>\n<p>L'intérêt de cette valeur, c'est qu'elle va nous permettre de modifier toutes les dimensions que l'on veut de façon progressive et <strong>proportionnelle</strong>.</p>\n<p>Petit exemple, simple, basique :</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;title&quot;</span>&gt;</span>Hello world<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;red-block&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>\n<pre><code class=\"hljs language-scss\"><span class=\"hljs-comment\">// exemple avec SCSS</span>\n\n<span class=\"hljs-selector-tag\">html</span> {\n  <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">16px</span>; <span class=\"hljs-comment\">// baseFontSize</span>\n}\n\n<span class=\"hljs-keyword\">@media</span> (min-width: <span class=\"hljs-number\">480px</span> /* fluidRange start */) {\n  <span class=\"hljs-selector-tag\">html</span> {\n    <span class=\"hljs-comment\">// l&#x27;interpolation linéaire</span>\n    <span class=\"hljs-attribute\">font-size</span>: calc(<span class=\"hljs-number\">14.285714285714285px</span> + <span class=\"hljs-number\">0.35714285714285715vw</span>);\n  }\n}\n\n<span class=\"hljs-keyword\">@media</span> (min-width: <span class=\"hljs-number\">1600px</span> /* fluidRange end */) {\n  <span class=\"hljs-selector-tag\">html</span> {\n    <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">20px</span>; <span class=\"hljs-comment\">// baseFontSize * scaleRatio</span>\n  }\n}\n\n<span class=\"hljs-comment\">// par défaut dans les navigateurs 1rem = 16px, cette fonction nous simplifie les divisions</span>\n<span class=\"hljs-comment\">// si vous faites du CSS-in-JS, let fluid = v =&gt; `${v / 16}rem` fait le job</span>\n<span class=\"hljs-keyword\">@function</span> fluid(<span class=\"hljs-variable\">$value</span>) {\n  <span class=\"hljs-keyword\">@return</span> <span class=\"hljs-variable\">$value</span> / <span class=\"hljs-number\">16</span> + rem;\n}\n\n<span class=\"hljs-selector-class\">.title</span> {\n  <span class=\"hljs-comment\">// si largeur du viewport &lt; 480px -&gt; font-size = 24px</span>\n  <span class=\"hljs-comment\">// si largeur du viewport &gt; 1600px -&gt; font-size = 24 * 1.25 = 30px</span>\n  <span class=\"hljs-comment\">// si 480px &lt; largeur du viewport &lt; 1600px -&gt; 24px &lt; font-size &lt; 30px</span>\n  <span class=\"hljs-attribute\">font-size</span>: fluid(<span class=\"hljs-number\">24</span>);\n}\n\n<span class=\"hljs-selector-class\">.red-block</span> {\n  <span class=\"hljs-attribute\">background-color</span>: red;\n  <span class=\"hljs-comment\">// les dimensions seront contenues entre 100px et 100 * 1.25 = 125px</span>\n  <span class=\"hljs-attribute\">height</span>: fluid(<span class=\"hljs-number\">100</span>);\n  <span class=\"hljs-attribute\">width</span>: fluid(<span class=\"hljs-number\">100</span>);\n}\n</code></pre>\n<figure>\n  <a href=\"/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/basic-example-result.gif\">\n    <img src=\"/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/basic-example-result.gif\" alt=\"résultat quand on joue sur la largeur du viewport\" />\n  </a>\n  <figcaption>(Cliquez sur le gif pour le voir en taille réelle)</figcaption>\n</figure>\n<h2>Forcer une font-size par défaut, c'est MAL</h2>\n<p><em>(On va se mentir et tenter d'ignorer le fait que tout le monde utilise le zoom)</em></p>\n<p>En effet, l'utilisateur peut toujours choisir d'avoir une taille de police plus petite ou plus grande que celle par défaut (<code>16px</code>) et c'est franchement pas très accessible de forcer.</p>\n<p>On va donc modifier notre fonction JS et tenir compte de ça.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">let</span> getCSSFluidConfig = <span class=\"hljs-function\">(<span class=\"hljs-params\">\n  baseFontSize, <span class=\"hljs-comment\">// number</span>\n  scaleRatio, <span class=\"hljs-comment\">// number</span>\n  fluidRange <span class=\"hljs-comment\">// [number, number]</span>\n</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">let</span> toRem = <span class=\"hljs-function\"><span class=\"hljs-params\">value</span> =&gt;</span> value / <span class=\"hljs-number\">16</span>;\n\n  <span class=\"hljs-keyword\">let</span> maxFontSize = baseFontSize * scaleRatio;\n  <span class=\"hljs-keyword\">let</span> baseRemFontSize = toRem(baseFontSize);\n  <span class=\"hljs-keyword\">let</span> maxRemFontSize = toRem(maxFontSize);\n\n  <span class=\"hljs-keyword\">let</span> [rangeStart, rangeEnd] = fluidRange;\n  <span class=\"hljs-comment\">// on évite rem pour les media queries: merci Safari</span>\n  <span class=\"hljs-comment\">// pas de soucis pour utiliser toRem malgré tout:</span>\n  <span class=\"hljs-comment\">// les media queries sont à la racine du document</span>\n  <span class=\"hljs-keyword\">let</span> emRangeStart = toRem(rangeStart);\n  <span class=\"hljs-keyword\">let</span> emRangeEnd = toRem(rangeEnd);\n\n  <span class=\"hljs-keyword\">let</span> multiplier =\n    (baseRemFontSize - maxRemFontSize) / (emRangeStart - emRangeEnd);\n  <span class=\"hljs-keyword\">let</span> fixed = maxRemFontSize - multiplier * emRangeEnd;\n\n  <span class=\"hljs-comment\">// on en profite également pour retourner l&#x27;intégralité du CSS voulu</span>\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">`html { font-size: <span class=\"hljs-subst\">${baseRemFontSize}</span>rem }\n\n@media (min-width: <span class=\"hljs-subst\">${emRangeStart}</span>em) {\n  html { font-size: calc(<span class=\"hljs-subst\">${fixed}</span>rem + <span class=\"hljs-subst\">${<span class=\"hljs-number\">100</span> * multiplier}</span>vw) }\n}\n\n@media (min-width: <span class=\"hljs-subst\">${emRangeEnd}</span>em) {\n  html { font-size: <span class=\"hljs-subst\">${maxRemFontSize}</span>rem }\n}`</span>;\n};\n</code></pre>\n<!-- ![Le résultat de notre appel de fonction](/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/devtools-responsive-result.png) -->\n<p>Et voilà ! Ça continue de faire ce que l'on veut, mais en prenant en compte la taille de police par défaut définie par l'utilisateur.</p>\n<h2>Un exemple un peu plus complexe</h2>\n<p>Vous vous êtes empressé d'embêter le designer à nouveau afin de déterminer ces 3 variables ensemble: ça sera donc une <code>font-size</code> comprise entre <code>16px</code> et <code>18px</code> (donc une UI qui scale jusqu'à <code>18 / 16</code> = <code>1.125</code> …vous êtes encore frileux à l'idée) entre <code>480px</code> et <code>1440px</code> !</p>\n<p>Il est maintenant temps de modifier ce fameux bouton.</p>\n<pre><code class=\"hljs language-js\">getCSSFluidConfig(<span class=\"hljs-number\">16</span>, <span class=\"hljs-number\">1.125</span>, [<span class=\"hljs-number\">480</span>, <span class=\"hljs-number\">1440</span>]);\n\n<span class=\"hljs-comment\">/* -&gt; &quot;html { font-size: 1rem }\n\n@media (min-width: 30em) {\n  html { font-size: calc(0.9375rem + 0.20833333333333334vw) }\n}\n\n@media (min-width: 90em) {\n  html { font-size: 1.125rem }\n}&quot; */</span>\n</code></pre>\n<pre><code class=\"hljs language-scss\"><span class=\"hljs-comment\">// le code généré</span>\n\n<span class=\"hljs-selector-tag\">html</span> {\n  <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">1rem</span>;\n}\n\n<span class=\"hljs-keyword\">@media</span> (min-width: <span class=\"hljs-number\">30em</span>) {\n  <span class=\"hljs-selector-tag\">html</span> {\n    <span class=\"hljs-attribute\">font-size</span>: calc(<span class=\"hljs-number\">0.9375rem</span> + <span class=\"hljs-number\">0.20833333333333334vw</span>);\n  }\n}\n\n<span class=\"hljs-keyword\">@media</span> (min-width: <span class=\"hljs-number\">90em</span>) {\n  <span class=\"hljs-selector-tag\">html</span> {\n    <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">1.125rem</span>;\n  }\n}\n\n<span class=\"hljs-comment\">// fonctions utilitaires</span>\n\n<span class=\"hljs-keyword\">@function</span> fluid(<span class=\"hljs-variable\">$value</span>) {\n  <span class=\"hljs-keyword\">@return</span> <span class=\"hljs-variable\">$value</span> / <span class=\"hljs-number\">16</span> + rem;\n}\n\n<span class=\"hljs-comment\">// le reste du CSS</span>\n\n<span class=\"hljs-selector-tag\">body</span> {\n  <span class=\"hljs-attribute\">font-family</span>: -apple-system, BlinkMacSystemFont, <span class=\"hljs-string\">&quot;Segoe UI&quot;</span>, Roboto, Helvetica,\n    Arial, sans-serif, <span class=\"hljs-string\">&quot;Apple Color Emoji&quot;</span>, <span class=\"hljs-string\">&quot;Segoe UI Emoji&quot;</span>, <span class=\"hljs-string\">&quot;Segoe UI Symbol&quot;</span>;\n}\n\n<span class=\"hljs-selector-class\">.twitter-btn</span> {\n  <span class=\"hljs-attribute\">align-items</span>: center;\n  <span class=\"hljs-attribute\">display</span>: flex;\n  <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-number\">#1da1f3</span>;\n  <span class=\"hljs-attribute\">border</span>: <span class=\"hljs-number\">1px</span> solid <span class=\"hljs-number\">#218de4</span>; <span class=\"hljs-comment\">// il ne serait pas logique que border-width soit fluide</span>\n  <span class=\"hljs-attribute\">border-radius</span>: <span class=\"hljs-number\">4px</span>; <span class=\"hljs-comment\">// idem pour border-radius</span>\n  <span class=\"hljs-attribute\">padding</span>: fluid(<span class=\"hljs-number\">4</span>);\n  <span class=\"hljs-attribute\">padding-right</span>: fluid(<span class=\"hljs-number\">8</span>);\n  <span class=\"hljs-attribute\">box-shadow</span>: <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">5px</span> <span class=\"hljs-number\">5px</span> -<span class=\"hljs-number\">5px</span> rgba(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0.25</span>);\n}\n\n<span class=\"hljs-selector-class\">.twitter-btn</span> svg {\n  <span class=\"hljs-attribute\">height</span>: fluid(<span class=\"hljs-number\">24</span>);\n  <span class=\"hljs-attribute\">width</span>: fluid(<span class=\"hljs-number\">24</span>);\n}\n\n<span class=\"hljs-selector-class\">.twitter-btn</span> <span class=\"hljs-selector-tag\">span</span> {\n  <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#fff</span>;\n  <span class=\"hljs-attribute\">font-size</span>: fluid(<span class=\"hljs-number\">14</span>);\n  <span class=\"hljs-attribute\">margin-left</span>: fluid(<span class=\"hljs-number\">4</span>);\n}\n</code></pre>\n<p>Ainsi,</p>\n<ul>\n<li>la <code>font-size</code> par défaut fera entre <code>1rem</code> et <code>1.125rem</code><br/>(<code>16px</code> et <code>18px</code> si réglage navigateur par défaut)</li>\n<li>le <code>padding</code> de <code>.twitter-btn</code> fera entre <code>0.25rem</code> et <code>0.28125rem</code><br/>(<code>4px</code> et <code>4.5px</code>)</li>\n<li>la <code>height</code> et la <code>width</code> du svg feront entre <code>1.5rem</code> et <code>1.6875rem</code><br/>(<code>24px</code> et <code>27px</code>)</li>\n<li>etc… vous avez l'idée, tout reste proportionnel.</li>\n</ul>\n<figure>\n  <a href=\"/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/twitter-button-result.gif\">\n    <img src=\"/public/images/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/twitter-button-result.gif\" alt=\"résultat quand on joue sur la largeur du viewport\" />\n  </a>\n  <figcaption>(Cliquez sur le gif pour le voir en taille réelle)</figcaption>\n</figure>\n<p>La différence est <strong>très subtile</strong> (mais vous étiez frileux). L'avantage, c'est que si vous changez d'avis dans 3 semaines pour finalement passer sur un agrandissement de <strong>x1.5</strong> à <code>2560px</code> de large, il vous suffira générer un nouveau ce petit bout de code, de copier/coller les quelques lignes obtenues au début de votre fichier CSS …et c'est tout ! Inutile de revenir dans les composants ou de refaire un quelconque calcul.</p>\n<p>Pour que ce soit encore plus simple, je vous ai concocté un petit générateur :</p>\n<p><iframe\n  width=\"1px\"\n  height=\"510\"\n  scrolling=\"no\"\n  style=\"border: 2px solid rgba(0,0,0,0.1); border-radius: 10px; width: 1px; min-width: 100%;\"\n  src=\"/public/misc/articles/2019-03-21-une-ui-responsive-grace-a-la-regle-de-trois/generator.html\"></p>\n</iframe>\n<p>Il ne vous qu'à profiter de toute ces heures gagnées en invitant votre (maintenant pote) graphiste à boire une bière ! 🍻</p>\n"}}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"listsRequests":{"data":{"RE_PRIVATE_NONE":true}},"itemsRequests":{"data":{"RE_PRIVATE_NONE":true}}}</script><head><script defer="defer" src="/public/main.56c69761a03eb0112696.js"></script></head></html>