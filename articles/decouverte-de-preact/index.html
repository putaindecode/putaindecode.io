<!DOCTYPE html><html lang="fr"><head><title data-react-helmet="true">Découverte de Preact | Putain de code</title><meta data-react-helmet="true" charset="UTF-8"/><meta data-react-helmet="true" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" name="viewport"/><meta data-react-helmet="true" content="summary_large_image" name="twitter:card"/><meta data-react-helmet="true" content="Putain de code !" property="og:site_name"/><meta data-react-helmet="true" content="@putaindecode" name="twitter:site"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" property="og:image"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" name="twitter:image"/><meta data-react-helmet="true" content="1500" property="og:image:width"/><meta data-react-helmet="true" content="777" property="og:image:height"/><meta data-react-helmet="true" content="Découverte de Preact | Putain de code" property="og:title"/><meta data-react-helmet="true" content="Découverte de Preact | Putain de code" name="twitter:title"/><meta data-react-helmet="true" content="Un article proposé par drazik" name="description"/><link data-react-helmet="true" title="RSS Feed" href="/api/articles/feeds/desc/feed.xml" rel="alternate" type="application/rss+xml"/><link data-react-helmet="true" href="/favicon.ico" rel="shortcut icon"/><link data-react-helmet="true" href="https://putaindecode.io/articles/decouverte-de-preact" rel="canonical"/><script>window.PAGES_BOOT_MODE="hydrate";</script></head><div id="root"><style data-emotion="rpcss zx73cm 1lc6tyj 28v1b4">@-webkit-keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}@keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}:root{--page-background-color:#fff;--page-slightly-accented-background-color:#F9F6F6;--page-accented-background-color:#E4EBEE;--page-text-color:#46515B;--link-text-color:#E51D58;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#FAF3E1;--one-percent-contrast-color:rgba(0, 0, 0, 0.1);--half-percent-contrast-color:rgba(0, 0, 0, 0.05);}@media (prefers-color-scheme: dark){:root{--page-background-color:#222;--page-slightly-accented-background-color:#171717;--page-accented-background-color:#111;--page-text-color:#ddd;--link-text-color:#F87098;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#4F3804;--one-percent-contrast-color:rgba(255, 255, 255, 0.1);--half-percent-contrast-color:rgba(255, 255, 255, 0.05);}}body{padding:0;margin:0;background-color:var(--page-background-color);color:var(--page-text-color);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;overflow-x:hidden;}html{font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}a{color:var(--link-text-color);-webkit-text-decoration:underline;text-decoration:underline;}a:hover{-webkit-text-decoration:none;text-decoration:none;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}*,*:before,*:after{box-sizing:border-box;}pre,.hljs{color:#adbac7;background:#22272e;}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067;}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb;}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#6cb6ff;}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#96d0ff;}.hljs-built_in,.hljs-symbol{color:#f69d50;}.hljs-comment,.hljs-code,.hljs-formula{color:#768390;}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#8ddb8c;}.hljs-subst{color:#adbac7;}.hljs-section{color:#316dca;font-weight:bold;}.hljs-bullet{color:#eac55f;}.hljs-emphasis{color:#adbac7;font-style:italic;}.hljs-strong{color:#adbac7;font-weight:bold;}.hljs-addition{color:#b4f1b4;background-color:#1b4721;}.hljs-deletion{color:#ffd8d3;background-color:#78191b;}</style><style data-emotion="rpcss 9vhaby">.rpcss-9vhaby{background-color:var(--gradient-red-bottom);background-image:linear-gradient(to bottom right, var(--gradient-red-top), var(--gradient-red-bottom));}</style><header class="rpcss-9vhaby" style="background-image:linear-gradient(to bottom right, hsl(136, 100%, 35%), hsl(113, 100%, 30%))"><style data-emotion="rpcss 1qqk0tr">.rpcss-1qqk0tr{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}</style><div class="rpcss-1qqk0tr"><style data-emotion="rpcss qx7dny">.rpcss-qx7dny{width:100%;max-width:1024px;margin:0 auto;padding:0 10px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="rpcss-qx7dny"><style data-emotion="rpcss 7s9om2">.rpcss-7s9om2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:20px 0 50px;}</style><div class="rpcss-7s9om2"><style data-emotion="rpcss gdpa5c">.rpcss-gdpa5c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-gdpa5c" href="/"><style data-emotion="rpcss 1lm4738">.rpcss-1lm4738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;padding-bottom:10px;}</style><div class="rpcss-1lm4738"><style data-emotion="rpcss 13o7eu2">.rpcss-13o7eu2{display:block;}</style><svg class="rpcss-13o7eu2" height="36px" width="36px" viewBox="0 0 36 36"><defs><linearGradient id="PutainDeCodeLogoGradient" x1="50%" x2="50%" y1="0%" y2="127.223881%"><stop offset="0%" stop-color="#E41D57"></stop><stop offset="100%" stop-color="#C60000"></stop></linearGradient></defs><circle cx="18" cy="18" fill="url(#PutainDeCodeLogoGradient)" r="17" stroke="#FFFFFF" stroke-width="2"></circle><polygon fill="#FFFFFF" points="15.9033203 18.2246094 15.9033203 18.3710938 11.2304688 20.5317383 11.2304688 22.8095703 18.0566406 19.184082 18.0566406 17.4116211 11.2304688 13.7788086 11.2304688 16.0639648"></polygon><rect height="14" width="2" fill="#FFFFFF" x="22" y="11"><animate attributeName="opacity" begin="100ms" calcMode="discrete" dur="2s" repeatCount="indefinite" values="1;0"></animate></rect></svg><style data-emotion="rpcss 4cf197">.rpcss-4cf197{width:10px;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-4cf197"></div><style data-emotion="rpcss u5k24">.rpcss-u5k24{font-size:22px;color:#fff;font-weight:800;}</style><div aria-level="2" class="rpcss-u5k24" role="heading">Putain de code !</div></div><style data-emotion="rpcss 1nyebg4">.rpcss-1nyebg4{font-size:14px;color:rgba(255, 255, 255, 0.8);text-align:center;}</style><div class="rpcss-1nyebg4">Blog participatif de la communauté dev</div></a></div></div></div></header><style data-emotion="rpcss a4ric9">.rpcss-a4ric9{background-color:var(--page-slightly-accented-background-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="rpcss-a4ric9"><style data-emotion="rpcss oeugsb">.rpcss-oeugsb{-webkit-animation:500ms ease-out animation-zx73cm;animation:500ms ease-out animation-zx73cm;}</style><div class="rpcss-oeugsb"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1qc2bam">.rpcss-1qc2bam{font-size:42px;font-weight:800;text-align:center;padding-top:40px;line-height:1.2;margin:0;}</style><h1 class="rpcss-1qc2bam">Découverte de Preact</h1><style data-emotion="rpcss obg2kr">.rpcss-obg2kr{font-size:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:40px;color:var(--page-text-color);-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-obg2kr" href="https://github.com/drazik"><style data-emotion="rpcss uco8i7">.rpcss-uco8i7{width:32px;height:32px;border-radius:100%;margin-right:10px;}</style><img class="rpcss-uco8i7" alt="drazik" src="https://avatars.githubusercontent.com/drazik?size=64"/><div>drazik<!-- --> <!-- -->•<!-- --> <!-- -->2017/12/21</div></a><style data-emotion="rpcss 15kxmi0">.rpcss-15kxmi0{max-width:640px;width:100%;font-size:18px;margin:0 auto;line-height:1.7;}.rpcss-15kxmi0 h2,.rpcss-15kxmi0 h3,.rpcss-15kxmi0 h4,.rpcss-15kxmi0 h5,.rpcss-15kxmi0 h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-weight:800;line-height:1.2;}.rpcss-15kxmi0 img{max-width:100%;background-color:rgba(255, 255, 255, 0.75);}.rpcss-15kxmi0 code{font-size:0.9em;font-family:PragmataPro,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:1;background-color:var(--code-background-color);margin:0 0.2em;}.rpcss-15kxmi0 pre{padding:10px;overflow-x:auto;font-size:14px;border-radius:10px;border:2px solid var(--one-percent-contrast-color);-webkit-overflow-scrolling:touch;}.rpcss-15kxmi0 pre code{font-size:14px;background-color:transparent;margin:0;}.rpcss-15kxmi0 blockquote{padding-left:20px;margin:0;font-size:16px;border-left:3px solid var(--one-percent-contrast-color);font-style:italic;}.rpcss-15kxmi0 table{width:100%;text-align:center;}.rpcss-15kxmi0 figure{padding:20px 0;}.rpcss-15kxmi0 figcaption{text-align:center;}.rpcss-15kxmi0 a{word-wrap:break-word;}.rpcss-15kxmi0 table thead th{background-color:var(--page-accented-background-color);padding:10px 0;}</style><div class="rpcss-15kxmi0"><p>Preact est une alternative à React. Plus précisément, voici sa description
officielle :</p>
<blockquote>
<p>Fast 3kB alternative to React with the same ES6 API.</p>
</blockquote>
<p>Cette description semble alléchante au premier coup d'oeil. Si on peut avoir un
React de 3ko, banco, on switch !</p>
<p>Pas si vite. L'API est la même, mais rien n'indique que Preact est un React qui
tient dans 3 petits ko (bien que c'est ce qu'on peut parfois lire). Ça ferait
bien longtemps que les ingénieurs de Facebook auraient réagit s'il était
possible de faire en sorte que React soit si petit. Preact fait donc des
compromis, des choix, et présente donc des différences avec React qu'il faut
connaître et prendre en compte avant d'envisager de switcher.</p>
<p><em>Cet article est destiné aux gens qui connaissent déjà au moins un petit peu
React. Tous les concepts liés à (P)React ne seront pas détaillés. Si vous ne
connaissez rien à React, je vous invite à lire
<a href="/fr/articles/js/react/">l'introduction à React</a>.</em></p>
<h2>Quelles sont les différences entre React et Preact ?</h2>
<dl>
<dt>Les différences entre React et Preact peuvent être rangées dans deux catégories</dt>
<dd>ce qu'il &quot;manque&quot; à Preact, et ce qui est là, mais différent.
</dd>
</dl>
<h3>Ce qu'il &quot;manque&quot;</h3>
<p>Premièrement, Preact se concentre uniquement sur le DOM. Cela signifie qu'il
n'existe pas d'équivalent à
<a href="https://facebook.github.io/react-native/">react-native</a>,
<a href="https://facebook.github.io/react-vr/">react-vr</a> ou tout autre
<a href="http://iamdustan.com/react-renderers/">renderer</a> du côté de Preact. Celui-ci a
pour but d'afficher du DOM le plus efficacement possible.</p>
<p>Cette spécialisation pour le DOM permet à Preact de ne pas avoir à implémenter
le système de Synthetic Events utilisé par React. Ainsi, Preact peut se
permettre d'utiliser simplement le système d'événements standard du navigateur.
Il faut bien avoir cela en tête lorsqu'on a l'habitude de travailler avec React,
car celui-ci corrige, ou du moins unifie certains comportements entre les
navigateurs (notamment sur <code>onChange</code>). Des différences dans le comportement de
votre app est donc à prévoir en cas de switch.</p>
<p>Preact n'embarque pas de gestion de validation des PropTypes. Partant du
principe que celles-ci ne sont pas utilisées par tout le monde, la décision a
été prise de ne pas les inclure dans le coeur de la bibliothèque.</p>
<p>Pour finir, Preact n'expose pas (encore, tout du moins) les nouvelles APIs de
React 16 telles que <code>React.Fragment</code> (dont
<a href="https://github.com/developit/preact/issues/946">le support est prévu</a>),
<code>ReactDOM.createPortal</code> (la fonctionnalité existe tout de même sous une forme
différente dans <a href="https://github.com/developit/preact-portal">preact-portal</a>) ou
<code>ReactDOM.hydrate</code>.</p>
<h3>Ce qui est différent</h3>
<p>Preact utilise la bibliothèque
<a href="https://github.com/hyperhype/hyperscript">hyperscript</a>, qui est une version
générique de <code>React.createElement</code>. Le résultat est le même, la signature de la
fonction <code>h()</code> exposée par hyperscript étant la même que celle de
<code>React.createElement</code>. Il faudra quand même indiquer au compiler qu'il doit
utiliser cette fonction pour transpiler le JSX.</p>
<p>La méthode <code>render()</code> des composants reçoit toujours <code>this.props</code> et
<code>this.state</code> en paramètres, ce qui permet de les destructurer directement dans
les paramètres de la fonction, et ainsi de les traiter comme s'ils étaient
eux-mêmes des paramètres.</p>
<p>Preact gère l'API <code>context</code>, mais il n'existe pas de <code>contextTypes</code> ni de
<code>childContextTypes</code> (ce qui est raccord avec l'absence de <code>propTypes</code>). Tous les
enfants reçoivent le <code>context</code> définit dans la méthode <code>getChildContext()</code> de
leurs parents. Si plusieurs parents implémentent cette méthode, alors les
descendants recevront un agrégat.</p>
<p>Dans Preact, <code>props.children</code> est un <code>Array</code>. On peut donc utiliser toutes les
méthodes de <code>Array.prototype</code> dessus, sans avoir à passer par un équivalent de
<code>React.Children</code>. Toutefois, certains patterns tels que le <em>function as child</em>
nécessitent un peu de bricolage pour fonctionner.</p>
<p>Enfin, il est possible d'utiliser l'attribut <code>class</code> sur un noeud JSX.
<code>className</code> est aussi supporté, mais vous ne vous prendrez plus d'erreur lorsque
votre esprit se croira dans un fichier HTML et vous fera écrire <code>class</code>.</p>
<h2>Comment démarrer un projet Preact ?</h2>
<p>Pour démarrer sur de bonnes bases, le plus simple est d'utiliser
<a href="https://github.com/developit/preact-cli"><code>preact-cli</code></a>. C'est un outil en ligne
de commande qui vous permet de créer toute la structure de base de votre
application. Si vous connaissez <code>create-react-app</code>, alors vous aurez deviné que
<code>preact-cli</code> est l'équivalent pour Preact.</p>
<p>Commençons par l'installer :</p>
<pre><code class="hljs language-console">npm install -g preact-cli
</code></pre>
<p>Nous avons maintenant accès à la commande <code>preact</code>. Celle-ci s'utilise de la
manière suivante :</p>
<pre><code class="hljs language-console">preact create &lt;template-name&gt; &lt;project-name&gt;
</code></pre>
<p>Où <code>&lt;template-name&gt;</code> est le nom d'un template officiel (listé sur l'org GitHub
<a href="https://github.com/preactjs-templates"><code>preactjs-template</code></a>) ou un repository
GitHub contenant un dossier <code>template</code> (de la forme <code>&lt;username&gt;/&lt;repository&gt;</code>);
et <code>&lt;project-name&gt;</code> est le nom du dossier dans lequel la structure du projet
sera créée. Pour notre exemple, nous utiliserons le template <code>default</code>, et le
nom <code>test-preact</code> pour notre projet :</p>
<pre><code class="hljs language-console">preact create default test-preact
</code></pre>
<p>En utilisant le template <code>default</code>, nous obtenons une application qui embarque
par défaut :</p>
<ul>
<li>Du code-splitting pour chaque route</li>
<li>Votre page <code>index.html</code> prérendue pour un affichage le plus rapide possible</li>
<li>Un ServiceWorker prêt à l'emploi (score Lighthouse 100/100 à la génération de
l'app, ce score est bien évidemment dépendant de ce que vous faites par la
suite)</li>
<li>Des metas preload en fonction de vos URL</li>
<li>Des polyfills chargés uniquement si nécessaire</li>
</ul>
<p>Il ne vous reste plus qu'à écrire votre app sur ces bases solides ! Pour
information, le routing est géré par
<a href="https://github.com/developit/preact-router"><code>preact-router</code></a>.</p>
<h2>J'utilise React, je peux switcher sur Preact ?</h2>
<p>Oui, et pour ça il y a deux possibilités : ajouter une couche de compatibilité,
ou passer purement et simplement à Preact.</p>
<h3>Rendre Preact quasi-compatible avec React en utilisant <code>preact-compat</code></h3>
<p>Le plus rapide est d'utiliser
<a href="https://github.com/developit/preact-compat"><code>preact-compat</code></a>. Ce module vient
s'ajouter à Preact pour y ajouter une couche de compatibilité le rendant
compatible avec preque n'importe quel module écrit pour React (tant que celui-ci
n'utilise pas les quelques bouts d'API manquants). Pour cela, <code>preact-compat</code>
expose l'ensemble de l'API de <code>react</code> et <code>react-dom</code>. Cela vous permettra de
continuer à utiliser sereinement tous vos composants écrits spécifiquement pour
React, ainsi que vous son écosystème.</p>
<p>Il faut donc l'installer, ainsi que Preact :</p>
<pre><code class="hljs language-console">npm install --save preact preact-compat
</code></pre>
<p>Puis il faut ajouter des alias à votre système de build, afin que tous vos
imports de <code>react</code> et <code>react-dom</code> soient reroutés vers <code>preact-compat</code>. Par
exemple, pour webpack :</p>
<pre><code class="hljs language-javascript"><span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-comment">//... votre configuration webpack</span>
    <span class="hljs-attr">resolve</span>: {
        <span class="hljs-attr">alias</span>: {
            <span class="hljs-string">&quot;react&quot;</span>: <span class="hljs-string">&quot;preact-compat&quot;</span>,
            <span class="hljs-string">&quot;react-dom&quot;</span>: <span class="hljs-string">&quot;preact-compat&quot;</span>
        }
    }
}
</code></pre>
<p>Si vous n'utilisez pas webpack, votre système de build est très certainement
listé sur la
<a href="https://github.com/developit/preact-compat#preact-compat">documentation</a>.</p>
<p>Cette solution a l'avantage d'être très rapide à mettre en place. Toutefois, le
principal avantage de Preact est son poids de seulement 3ko. En ajoutant
<code>preact-compat</code>,vous ajouterez environ 2ko supplémentaires. Ce n'est pas énorme,
surtout si on prend en compte les avantages que ce module apporte, mais il est
possible de ne pas avoir à ajouter cette couche de compatibilité.</p>
<h3>Passer complètement à Preact</h3>
<p>Cette solution est un peu plus longue à mettre en place, mais si votre code
n'est pas dépendant d'un module qui utilise des parties de l'API de React qui ne
sont pas prises en compte par Preact, alors elle vous permettra d'obtenir le
bundle le plus léger possible.</p>
<p>Premièrement, il faut installer Preact :</p>
<pre><code class="hljs language-console">npm install --save preact
</code></pre>
<p>Puis il faut indiquer à votre compiler le pragma JSX qu'il doit utiliser. Pour
babel, vous pouvez installer le plugin <code>babel-plugin-transform-react-jsx</code> :</p>
<pre><code class="hljs language-console">npm instal --save-dev babel-plugin-transform-react-jsx
</code></pre>
<p>Puis indiquer le pragma JSX dans les options de ce plugin dans votre fichier
<code>.babelrc</code> :</p>
<pre><code class="hljs language-js">{
    <span class="hljs-string">&quot;plugins&quot;</span>: [
        [<span class="hljs-string">&quot;transform-react-jsx&quot;</span>, { <span class="hljs-string">&quot;pragma&quot;</span>: <span class="hljs-string">&quot;h&quot;</span> }]
    ]
}
</code></pre>
<p><em>Même si vous connaissez React, cette histoire de pragma JSX pourrait ne pas
vous évoquer grand chose. Si vous souhaitez en savoir plus, je vous conseille de
lire l'article suivant : <a href="https://jasonformat.com/wtf-is-jsx/">WTF is JSX</a>. Si
vous utilisez React et n'avez jamais eu à configurer ce pragma, c'est parce que
la plupart des compilers utilisent le pragma <code>@jsx React.createElement</code> par
défaut.</em></p>
<p>Si vous utilisez une version de React qui n'est pas à jour, il est possible que
votre codebase utilise l'ancienne syntaxe <code>React.createClass()</code>. Dans ce cas, il
faut que vous installiez
<a href="https://github.com/laurencedorman/preact-classless-component"><code>preact-classless-component</code></a>,
ou que vous passiez votre codebase dans le
<a href="https://github.com/vutran/preact-codemod"><code>preact-codemod</code></a> qui transformera
vos composants en classes ES6. De même, il se peut que vous utilisiez des
références par chaîne de caractères, qui ne sont pas supportées par Preact. Dans
ce cas, il faudra les transformer en références fonctionnelles.</p>
<p>Il ne vous reste plus qu'à mettre à jour vos imports pour que ceux-ci pointent
vers Preact. Voici un petit exemple :</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { h, Component, render } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;preact&quot;</span>;

<span class="hljs-keyword">const</span> Header = <span class="hljs-function">() =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>Ma putain d&#x27;app<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>Hello, world !<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  }
}

render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;app&quot;</span>));
</code></pre>
<p>Voilà, vous avez maintenant une aperçu de ce qu'est Preact et des moyens à votre
disposition pour l'utiliser. Facebook ne vous est plus d'aucune utilité, vous
pouvez fermer votre compte.</p>
<p>Plus sérieusement, nous avons vu que Preact est en grande partie compatible avec
React et peut presque le remplacer sur une app web. Cela nécessite tout de même
un peu de travail et de vigilance, mais le switch est possible et peut vous
permettre de faire économiser à vos utilisateurs le téléchargement de précieux
ko.</p>
</div><style data-emotion="rpcss unyj6i">.rpcss-unyj6i{max-width:640px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:20px auto;padding:20px;background-color:var(--page-background-color);border-radius:10px;box-shadow:0 15px 15px -5px rgba(0, 0, 0, 0.2);}@media (max-width: 540px){.rpcss-unyj6i{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-unyj6i"><style data-emotion="rpcss ty7r4z">.rpcss-ty7r4z{font-weight:800;}</style><div class="rpcss-ty7r4z">Vous avez aimé cet article?</div><style data-emotion="rpcss klacsp">.rpcss-klacsp{width:0;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-klacsp"></div><style data-emotion="rpcss 1pkr03v">.rpcss-1pkr03v{background-color:#00aced;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:800;}.rpcss-1pkr03v:active{opacity:0.5;}</style><a class="rpcss-1pkr03v" href="https://www.twitter.com/intent/tweet?text=D%C3%A9couverte%20de%20Preact%20sur%20%40PutainDeCode%20https%3A%2F%2Fputaindecode.io%2Farticles%2Fdecouverte-de-preact" target="_blank">Le partager sur Twitter</a></div><style data-emotion="rpcss x4iqxe">.rpcss-x4iqxe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;padding:20px;}</style><div class="rpcss-x4iqxe"><style data-emotion="rpcss gein6x">.rpcss-gein6x{font-size:20px;-webkit-text-decoration:none;text-decoration:none;color:#1E49B5;}</style><a class="rpcss-gein6x" href="/articles">← Articles</a></div><style data-emotion="rpcss 8bodgl">.rpcss-8bodgl{max-width:640px;width:100%;margin:0 auto;padding:20px 0;}</style><div class="rpcss-8bodgl" id="disqus_thread"></div></div></div></div></div><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1vau6rl">.rpcss-1vau6rl{margin:20px 0;background-color:var(--page-accented-background-color);border-radius:10px;padding:20px;}</style><div class="rpcss-1vau6rl"><style data-emotion="rpcss 1gz1i1h">.rpcss-1gz1i1h{font-size:32px;font-weight:800;margin-bottom:20px;text-align:center;}</style><div aria-level="2" class="rpcss-1gz1i1h" role="heading">Ne rien rater</div><style data-emotion="rpcss 1wbispj">.rpcss-1wbispj{font-size:18px;margin-bottom:10px;text-align:center;}</style><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur les réseaux</div><style data-emotion="rpcss 1hyoz7m">.rpcss-1hyoz7m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="rpcss-1hyoz7m"><a href="https://twitter.com/PutainDeCode"><img alt="Twitter" height="48" src="/public/images/website/twitter.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://facebook.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/facebook.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://github.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/github.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://itunes.apple.com/fr/podcast/putain-de-code-!/id1185311825"><img alt="Apple Podcast" height="48" src="/public/images/website/apple-podcast.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://soundcloud.com/putaindecode"><img alt="Soundcloud" height="48" src="/public/images/website/soundcloud.svg" width="48"/></a></div><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur le chat</div><div class="rpcss-1hyoz7m"><a href="https://discord.gg/jtbGNNc"><img alt="Discord" height="48" src="/public/images/website/discord.svg" width="48"/></a></div></div></div></div><style data-emotion="rpcss zs8kw7">.rpcss-zs8kw7{background-color:#222;padding:20px 0;}</style><footer class="rpcss-zs8kw7"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 79elbk">.rpcss-79elbk{position:relative;}</style><div class="rpcss-79elbk"><style data-emotion="rpcss 1hle0ni">.rpcss-1hle0ni{position:absolute;left:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1hle0ni" href="/api/articles/feeds/desc/feed.xml"><style data-emotion="rpcss lvyu5j">.rpcss-lvyu5j{margin-right:10px;}</style><img class="rpcss-lvyu5j" alt="Flux RSS" height="16" src="/public/images/website/rss-feed.svg" width="16"/><style data-emotion="rpcss um3i31">@media (max-width: 400px){.rpcss-um3i31{display:none;}}</style><div class="rpcss-um3i31">Flux RSS</div></a><style data-emotion="rpcss 12cp4l7">.rpcss-12cp4l7{color:rgba(255, 255, 255, 0.5);text-align:center;font-size:14px;}</style><div class="rpcss-12cp4l7">© 2021 Putain de code !</div><style data-emotion="rpcss 1w98uy3">.rpcss-1w98uy3{position:absolute;right:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1w98uy3" href="https://github.com/putaindecode/putaindecode.io">GitHub</a></div></div></div></footer></div><script id="initialData" type="text/data">{"lists":{"RE_PRIVATE_NONE":true},"items":{"k":"articles","v":{"k":"decouverte-de-preact","v":{"_0":{"TAG":0,"_0":{"slug":"decouverte-de-preact","filename":"2017-12-21-decouverte-de-preact","title":"Découverte de Preact","date":"Thu, 21 Dec 2017 00:00:00 GMT","draft":false,"meta":{"date":"2017-12-21T00:00:00.000Z","title":"Découverte de Preact","author":"drazik","oldSlug":"js/preact","slug":"decouverte-de-preact"},"body":"<p>Preact est une alternative à React. Plus précisément, voici sa description\nofficielle :</p>\n<blockquote>\n<p>Fast 3kB alternative to React with the same ES6 API.</p>\n</blockquote>\n<p>Cette description semble alléchante au premier coup d'oeil. Si on peut avoir un\nReact de 3ko, banco, on switch !</p>\n<p>Pas si vite. L'API est la même, mais rien n'indique que Preact est un React qui\ntient dans 3 petits ko (bien que c'est ce qu'on peut parfois lire). Ça ferait\nbien longtemps que les ingénieurs de Facebook auraient réagit s'il était\npossible de faire en sorte que React soit si petit. Preact fait donc des\ncompromis, des choix, et présente donc des différences avec React qu'il faut\nconnaître et prendre en compte avant d'envisager de switcher.</p>\n<p><em>Cet article est destiné aux gens qui connaissent déjà au moins un petit peu\nReact. Tous les concepts liés à (P)React ne seront pas détaillés. Si vous ne\nconnaissez rien à React, je vous invite à lire\n<a href=\"/fr/articles/js/react/\">l'introduction à React</a>.</em></p>\n<h2>Quelles sont les différences entre React et Preact ?</h2>\n<dl>\n<dt>Les différences entre React et Preact peuvent être rangées dans deux catégories</dt>\n<dd>ce qu'il &quot;manque&quot; à Preact, et ce qui est là, mais différent.\n</dd>\n</dl>\n<h3>Ce qu'il &quot;manque&quot;</h3>\n<p>Premièrement, Preact se concentre uniquement sur le DOM. Cela signifie qu'il\nn'existe pas d'équivalent à\n<a href=\"https://facebook.github.io/react-native/\">react-native</a>,\n<a href=\"https://facebook.github.io/react-vr/\">react-vr</a> ou tout autre\n<a href=\"http://iamdustan.com/react-renderers/\">renderer</a> du côté de Preact. Celui-ci a\npour but d'afficher du DOM le plus efficacement possible.</p>\n<p>Cette spécialisation pour le DOM permet à Preact de ne pas avoir à implémenter\nle système de Synthetic Events utilisé par React. Ainsi, Preact peut se\npermettre d'utiliser simplement le système d'événements standard du navigateur.\nIl faut bien avoir cela en tête lorsqu'on a l'habitude de travailler avec React,\ncar celui-ci corrige, ou du moins unifie certains comportements entre les\nnavigateurs (notamment sur <code>onChange</code>). Des différences dans le comportement de\nvotre app est donc à prévoir en cas de switch.</p>\n<p>Preact n'embarque pas de gestion de validation des PropTypes. Partant du\nprincipe que celles-ci ne sont pas utilisées par tout le monde, la décision a\nété prise de ne pas les inclure dans le coeur de la bibliothèque.</p>\n<p>Pour finir, Preact n'expose pas (encore, tout du moins) les nouvelles APIs de\nReact 16 telles que <code>React.Fragment</code> (dont\n<a href=\"https://github.com/developit/preact/issues/946\">le support est prévu</a>),\n<code>ReactDOM.createPortal</code> (la fonctionnalité existe tout de même sous une forme\ndifférente dans <a href=\"https://github.com/developit/preact-portal\">preact-portal</a>) ou\n<code>ReactDOM.hydrate</code>.</p>\n<h3>Ce qui est différent</h3>\n<p>Preact utilise la bibliothèque\n<a href=\"https://github.com/hyperhype/hyperscript\">hyperscript</a>, qui est une version\ngénérique de <code>React.createElement</code>. Le résultat est le même, la signature de la\nfonction <code>h()</code> exposée par hyperscript étant la même que celle de\n<code>React.createElement</code>. Il faudra quand même indiquer au compiler qu'il doit\nutiliser cette fonction pour transpiler le JSX.</p>\n<p>La méthode <code>render()</code> des composants reçoit toujours <code>this.props</code> et\n<code>this.state</code> en paramètres, ce qui permet de les destructurer directement dans\nles paramètres de la fonction, et ainsi de les traiter comme s'ils étaient\neux-mêmes des paramètres.</p>\n<p>Preact gère l'API <code>context</code>, mais il n'existe pas de <code>contextTypes</code> ni de\n<code>childContextTypes</code> (ce qui est raccord avec l'absence de <code>propTypes</code>). Tous les\nenfants reçoivent le <code>context</code> définit dans la méthode <code>getChildContext()</code> de\nleurs parents. Si plusieurs parents implémentent cette méthode, alors les\ndescendants recevront un agrégat.</p>\n<p>Dans Preact, <code>props.children</code> est un <code>Array</code>. On peut donc utiliser toutes les\nméthodes de <code>Array.prototype</code> dessus, sans avoir à passer par un équivalent de\n<code>React.Children</code>. Toutefois, certains patterns tels que le <em>function as child</em>\nnécessitent un peu de bricolage pour fonctionner.</p>\n<p>Enfin, il est possible d'utiliser l'attribut <code>class</code> sur un noeud JSX.\n<code>className</code> est aussi supporté, mais vous ne vous prendrez plus d'erreur lorsque\nvotre esprit se croira dans un fichier HTML et vous fera écrire <code>class</code>.</p>\n<h2>Comment démarrer un projet Preact ?</h2>\n<p>Pour démarrer sur de bonnes bases, le plus simple est d'utiliser\n<a href=\"https://github.com/developit/preact-cli\"><code>preact-cli</code></a>. C'est un outil en ligne\nde commande qui vous permet de créer toute la structure de base de votre\napplication. Si vous connaissez <code>create-react-app</code>, alors vous aurez deviné que\n<code>preact-cli</code> est l'équivalent pour Preact.</p>\n<p>Commençons par l'installer :</p>\n<pre><code class=\"hljs language-console\">npm install -g preact-cli\n</code></pre>\n<p>Nous avons maintenant accès à la commande <code>preact</code>. Celle-ci s'utilise de la\nmanière suivante :</p>\n<pre><code class=\"hljs language-console\">preact create &lt;template-name&gt; &lt;project-name&gt;\n</code></pre>\n<p>Où <code>&lt;template-name&gt;</code> est le nom d'un template officiel (listé sur l'org GitHub\n<a href=\"https://github.com/preactjs-templates\"><code>preactjs-template</code></a>) ou un repository\nGitHub contenant un dossier <code>template</code> (de la forme <code>&lt;username&gt;/&lt;repository&gt;</code>);\net <code>&lt;project-name&gt;</code> est le nom du dossier dans lequel la structure du projet\nsera créée. Pour notre exemple, nous utiliserons le template <code>default</code>, et le\nnom <code>test-preact</code> pour notre projet :</p>\n<pre><code class=\"hljs language-console\">preact create default test-preact\n</code></pre>\n<p>En utilisant le template <code>default</code>, nous obtenons une application qui embarque\npar défaut :</p>\n<ul>\n<li>Du code-splitting pour chaque route</li>\n<li>Votre page <code>index.html</code> prérendue pour un affichage le plus rapide possible</li>\n<li>Un ServiceWorker prêt à l'emploi (score Lighthouse 100/100 à la génération de\nl'app, ce score est bien évidemment dépendant de ce que vous faites par la\nsuite)</li>\n<li>Des metas preload en fonction de vos URL</li>\n<li>Des polyfills chargés uniquement si nécessaire</li>\n</ul>\n<p>Il ne vous reste plus qu'à écrire votre app sur ces bases solides ! Pour\ninformation, le routing est géré par\n<a href=\"https://github.com/developit/preact-router\"><code>preact-router</code></a>.</p>\n<h2>J'utilise React, je peux switcher sur Preact ?</h2>\n<p>Oui, et pour ça il y a deux possibilités : ajouter une couche de compatibilité,\nou passer purement et simplement à Preact.</p>\n<h3>Rendre Preact quasi-compatible avec React en utilisant <code>preact-compat</code></h3>\n<p>Le plus rapide est d'utiliser\n<a href=\"https://github.com/developit/preact-compat\"><code>preact-compat</code></a>. Ce module vient\ns'ajouter à Preact pour y ajouter une couche de compatibilité le rendant\ncompatible avec preque n'importe quel module écrit pour React (tant que celui-ci\nn'utilise pas les quelques bouts d'API manquants). Pour cela, <code>preact-compat</code>\nexpose l'ensemble de l'API de <code>react</code> et <code>react-dom</code>. Cela vous permettra de\ncontinuer à utiliser sereinement tous vos composants écrits spécifiquement pour\nReact, ainsi que vous son écosystème.</p>\n<p>Il faut donc l'installer, ainsi que Preact :</p>\n<pre><code class=\"hljs language-console\">npm install --save preact preact-compat\n</code></pre>\n<p>Puis il faut ajouter des alias à votre système de build, afin que tous vos\nimports de <code>react</code> et <code>react-dom</code> soient reroutés vers <code>preact-compat</code>. Par\nexemple, pour webpack :</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-built_in\">module</span>.exports = {\n    <span class=\"hljs-comment\">//... votre configuration webpack</span>\n    <span class=\"hljs-attr\">resolve</span>: {\n        <span class=\"hljs-attr\">alias</span>: {\n            <span class=\"hljs-string\">&quot;react&quot;</span>: <span class=\"hljs-string\">&quot;preact-compat&quot;</span>,\n            <span class=\"hljs-string\">&quot;react-dom&quot;</span>: <span class=\"hljs-string\">&quot;preact-compat&quot;</span>\n        }\n    }\n}\n</code></pre>\n<p>Si vous n'utilisez pas webpack, votre système de build est très certainement\nlisté sur la\n<a href=\"https://github.com/developit/preact-compat#preact-compat\">documentation</a>.</p>\n<p>Cette solution a l'avantage d'être très rapide à mettre en place. Toutefois, le\nprincipal avantage de Preact est son poids de seulement 3ko. En ajoutant\n<code>preact-compat</code>,vous ajouterez environ 2ko supplémentaires. Ce n'est pas énorme,\nsurtout si on prend en compte les avantages que ce module apporte, mais il est\npossible de ne pas avoir à ajouter cette couche de compatibilité.</p>\n<h3>Passer complètement à Preact</h3>\n<p>Cette solution est un peu plus longue à mettre en place, mais si votre code\nn'est pas dépendant d'un module qui utilise des parties de l'API de React qui ne\nsont pas prises en compte par Preact, alors elle vous permettra d'obtenir le\nbundle le plus léger possible.</p>\n<p>Premièrement, il faut installer Preact :</p>\n<pre><code class=\"hljs language-console\">npm install --save preact\n</code></pre>\n<p>Puis il faut indiquer à votre compiler le pragma JSX qu'il doit utiliser. Pour\nbabel, vous pouvez installer le plugin <code>babel-plugin-transform-react-jsx</code> :</p>\n<pre><code class=\"hljs language-console\">npm instal --save-dev babel-plugin-transform-react-jsx\n</code></pre>\n<p>Puis indiquer le pragma JSX dans les options de ce plugin dans votre fichier\n<code>.babelrc</code> :</p>\n<pre><code class=\"hljs language-js\">{\n    <span class=\"hljs-string\">&quot;plugins&quot;</span>: [\n        [<span class=\"hljs-string\">&quot;transform-react-jsx&quot;</span>, { <span class=\"hljs-string\">&quot;pragma&quot;</span>: <span class=\"hljs-string\">&quot;h&quot;</span> }]\n    ]\n}\n</code></pre>\n<p><em>Même si vous connaissez React, cette histoire de pragma JSX pourrait ne pas\nvous évoquer grand chose. Si vous souhaitez en savoir plus, je vous conseille de\nlire l'article suivant : <a href=\"https://jasonformat.com/wtf-is-jsx/\">WTF is JSX</a>. Si\nvous utilisez React et n'avez jamais eu à configurer ce pragma, c'est parce que\nla plupart des compilers utilisent le pragma <code>@jsx React.createElement</code> par\ndéfaut.</em></p>\n<p>Si vous utilisez une version de React qui n'est pas à jour, il est possible que\nvotre codebase utilise l'ancienne syntaxe <code>React.createClass()</code>. Dans ce cas, il\nfaut que vous installiez\n<a href=\"https://github.com/laurencedorman/preact-classless-component\"><code>preact-classless-component</code></a>,\nou que vous passiez votre codebase dans le\n<a href=\"https://github.com/vutran/preact-codemod\"><code>preact-codemod</code></a> qui transformera\nvos composants en classes ES6. De même, il se peut que vous utilisiez des\nréférences par chaîne de caractères, qui ne sont pas supportées par Preact. Dans\nce cas, il faudra les transformer en références fonctionnelles.</p>\n<p>Il ne vous reste plus qu'à mettre à jour vos imports pour que ceux-ci pointent\nvers Preact. Voici un petit exemple :</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">import</span> { h, Component, render } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;preact&quot;</span>;\n\n<span class=\"hljs-keyword\">const</span> Header = <span class=\"hljs-function\">() =&gt;</span> <span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">header</span>&gt;</span>Ma putain d&#x27;app<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">header</span>&gt;</span></span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">App</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">Component</span> </span>{\n  <span class=\"hljs-function\"><span class=\"hljs-title\">render</span>(<span class=\"hljs-params\"></span>)</span> {\n    <span class=\"hljs-keyword\">return</span> (\n      <span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Header</span> /&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">main</span>&gt;</span>Hello, world !<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">main</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n    );\n  }\n}\n\nrender(<span class=\"xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">App</span> /&gt;</span></span>, <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">&quot;app&quot;</span>));\n</code></pre>\n<p>Voilà, vous avez maintenant une aperçu de ce qu'est Preact et des moyens à votre\ndisposition pour l'utiliser. Facebook ne vous est plus d'aucune utilité, vous\npouvez fermer votre compte.</p>\n<p>Plus sérieusement, nous avons vu que Preact est en grande partie compatible avec\nReact et peut presque le remplacer sur une app web. Cela nécessite tout de même\nun peu de travail et de vigilance, mais le switch est possible et peut vous\npermettre de faire économiser à vos utilisateurs le téléchargement de précieux\nko.</p>\n"}}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"listsRequests":{"data":{"RE_PRIVATE_NONE":true}},"itemsRequests":{"data":{"RE_PRIVATE_NONE":true}}}</script><head><script defer="defer" src="/public/main.56c69761a03eb0112696.js"></script></head></html>