<!DOCTYPE html><html lang="fr"><head><title data-react-helmet="true">ES6, ES2015 : les symboles | Putain de code</title><meta data-react-helmet="true" charset="UTF-8"/><meta data-react-helmet="true" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover" name="viewport"/><meta data-react-helmet="true" content="summary_large_image" name="twitter:card"/><meta data-react-helmet="true" content="Putain de code !" property="og:site_name"/><meta data-react-helmet="true" content="@putaindecode" name="twitter:site"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" property="og:image"/><meta data-react-helmet="true" content="https://putaindecode.io/public/images/website/share.jpg" name="twitter:image"/><meta data-react-helmet="true" content="1500" property="og:image:width"/><meta data-react-helmet="true" content="777" property="og:image:height"/><meta data-react-helmet="true" content="ES6, ES2015 : les symboles | Putain de code" property="og:title"/><meta data-react-helmet="true" content="ES6, ES2015 : les symboles | Putain de code" name="twitter:title"/><meta data-react-helmet="true" content="Un article proposé par divarvel" name="description"/><link data-react-helmet="true" title="RSS Feed" href="/api/articles/feeds/desc/feed.xml" rel="alternate" type="application/rss+xml"/><link data-react-helmet="true" href="/favicon.ico" rel="shortcut icon"/><link data-react-helmet="true" href="https://putaindecode.io/articles/es6-es2015-les-symboles" rel="canonical"/><script>window.PAGES_BOOT_MODE="hydrate";</script></head><div id="root"><style data-emotion="rpcss zx73cm 1lc6tyj 28v1b4">@-webkit-keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}@keyframes animation-zx73cm{from{opacity:0;-webkit-transform:translateY(20px);-moz-transform:translateY(20px);-ms-transform:translateY(20px);transform:translateY(20px);}}:root{--page-background-color:#fff;--page-slightly-accented-background-color:#F9F6F6;--page-accented-background-color:#E4EBEE;--page-text-color:#46515B;--link-text-color:#E51D58;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#FAF3E1;--one-percent-contrast-color:rgba(0, 0, 0, 0.1);--half-percent-contrast-color:rgba(0, 0, 0, 0.05);}@media (prefers-color-scheme: dark){:root{--page-background-color:#222;--page-slightly-accented-background-color:#171717;--page-accented-background-color:#111;--page-text-color:#ddd;--link-text-color:#F87098;--gradient-red-top:#E51D58;--gradient-red-bottom:#CC0613;--code-background-color:#4F3804;--one-percent-contrast-color:rgba(255, 255, 255, 0.1);--half-percent-contrast-color:rgba(255, 255, 255, 0.05);}}body{padding:0;margin:0;background-color:var(--page-background-color);color:var(--page-text-color);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;overflow-x:hidden;}html{font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}a{color:var(--link-text-color);-webkit-text-decoration:underline;text-decoration:underline;}a:hover{-webkit-text-decoration:none;text-decoration:none;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}*,*:before,*:after{box-sizing:border-box;}pre,.hljs{color:#adbac7;background:#22272e;}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067;}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb;}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-variable,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id{color:#6cb6ff;}.hljs-regexp,.hljs-string,.hljs-meta .hljs-string{color:#96d0ff;}.hljs-built_in,.hljs-symbol{color:#f69d50;}.hljs-comment,.hljs-code,.hljs-formula{color:#768390;}.hljs-name,.hljs-quote,.hljs-selector-tag,.hljs-selector-pseudo{color:#8ddb8c;}.hljs-subst{color:#adbac7;}.hljs-section{color:#316dca;font-weight:bold;}.hljs-bullet{color:#eac55f;}.hljs-emphasis{color:#adbac7;font-style:italic;}.hljs-strong{color:#adbac7;font-weight:bold;}.hljs-addition{color:#b4f1b4;background-color:#1b4721;}.hljs-deletion{color:#ffd8d3;background-color:#78191b;}</style><style data-emotion="rpcss 9vhaby">.rpcss-9vhaby{background-color:var(--gradient-red-bottom);background-image:linear-gradient(to bottom right, var(--gradient-red-top), var(--gradient-red-bottom));}</style><header class="rpcss-9vhaby" style="background-image:linear-gradient(to bottom right, hsl(204, 100%, 35%), hsl(170, 100%, 30%))"><style data-emotion="rpcss 1qqk0tr">.rpcss-1qqk0tr{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);}</style><div class="rpcss-1qqk0tr"><style data-emotion="rpcss qx7dny">.rpcss-qx7dny{width:100%;max-width:1024px;margin:0 auto;padding:0 10px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="rpcss-qx7dny"><style data-emotion="rpcss 7s9om2">.rpcss-7s9om2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding:20px 0 50px;}</style><div class="rpcss-7s9om2"><style data-emotion="rpcss gdpa5c">.rpcss-gdpa5c{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-gdpa5c" href="/"><style data-emotion="rpcss 1lm4738">.rpcss-1lm4738{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;padding-bottom:10px;}</style><div class="rpcss-1lm4738"><style data-emotion="rpcss 13o7eu2">.rpcss-13o7eu2{display:block;}</style><svg class="rpcss-13o7eu2" height="36px" width="36px" viewBox="0 0 36 36"><defs><linearGradient id="PutainDeCodeLogoGradient" x1="50%" x2="50%" y1="0%" y2="127.223881%"><stop offset="0%" stop-color="#E41D57"></stop><stop offset="100%" stop-color="#C60000"></stop></linearGradient></defs><circle cx="18" cy="18" fill="url(#PutainDeCodeLogoGradient)" r="17" stroke="#FFFFFF" stroke-width="2"></circle><polygon fill="#FFFFFF" points="15.9033203 18.2246094 15.9033203 18.3710938 11.2304688 20.5317383 11.2304688 22.8095703 18.0566406 19.184082 18.0566406 17.4116211 11.2304688 13.7788086 11.2304688 16.0639648"></polygon><rect height="14" width="2" fill="#FFFFFF" x="22" y="11"><animate attributeName="opacity" begin="100ms" calcMode="discrete" dur="2s" repeatCount="indefinite" values="1;0"></animate></rect></svg><style data-emotion="rpcss 4cf197">.rpcss-4cf197{width:10px;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-4cf197"></div><style data-emotion="rpcss u5k24">.rpcss-u5k24{font-size:22px;color:#fff;font-weight:800;}</style><div aria-level="2" class="rpcss-u5k24" role="heading">Putain de code !</div></div><style data-emotion="rpcss 1nyebg4">.rpcss-1nyebg4{font-size:14px;color:rgba(255, 255, 255, 0.8);text-align:center;}</style><div class="rpcss-1nyebg4">Blog participatif de la communauté dev</div></a></div></div></div></header><style data-emotion="rpcss a4ric9">.rpcss-a4ric9{background-color:var(--page-slightly-accented-background-color);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="rpcss-a4ric9"><style data-emotion="rpcss oeugsb">.rpcss-oeugsb{-webkit-animation:500ms ease-out animation-zx73cm;animation:500ms ease-out animation-zx73cm;}</style><div class="rpcss-oeugsb"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1qc2bam">.rpcss-1qc2bam{font-size:42px;font-weight:800;text-align:center;padding-top:40px;line-height:1.2;margin:0;}</style><h1 class="rpcss-1qc2bam">ES6, ES2015 : les symboles</h1><style data-emotion="rpcss obg2kr">.rpcss-obg2kr{font-size:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:40px;color:var(--page-text-color);-webkit-text-decoration:none;text-decoration:none;}</style><a class="rpcss-obg2kr" href="https://github.com/divarvel"><style data-emotion="rpcss uco8i7">.rpcss-uco8i7{width:32px;height:32px;border-radius:100%;margin-right:10px;}</style><img class="rpcss-uco8i7" alt="divarvel" src="https://avatars.githubusercontent.com/divarvel?size=64"/><div>divarvel<!-- --> <!-- -->•<!-- --> <!-- -->2015/12/17</div></a><style data-emotion="rpcss 15kxmi0">.rpcss-15kxmi0{max-width:640px;width:100%;font-size:18px;margin:0 auto;line-height:1.7;}.rpcss-15kxmi0 h2,.rpcss-15kxmi0 h3,.rpcss-15kxmi0 h4,.rpcss-15kxmi0 h5,.rpcss-15kxmi0 h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;font-weight:800;line-height:1.2;}.rpcss-15kxmi0 img{max-width:100%;background-color:rgba(255, 255, 255, 0.75);}.rpcss-15kxmi0 code{font-size:0.9em;font-family:PragmataPro,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:1;background-color:var(--code-background-color);margin:0 0.2em;}.rpcss-15kxmi0 pre{padding:10px;overflow-x:auto;font-size:14px;border-radius:10px;border:2px solid var(--one-percent-contrast-color);-webkit-overflow-scrolling:touch;}.rpcss-15kxmi0 pre code{font-size:14px;background-color:transparent;margin:0;}.rpcss-15kxmi0 blockquote{padding-left:20px;margin:0;font-size:16px;border-left:3px solid var(--one-percent-contrast-color);font-style:italic;}.rpcss-15kxmi0 table{width:100%;text-align:center;}.rpcss-15kxmi0 figure{padding:20px 0;}.rpcss-15kxmi0 figcaption{text-align:center;}.rpcss-15kxmi0 a{word-wrap:break-word;}.rpcss-15kxmi0 table thead th{background-color:var(--page-accented-background-color);padding:10px 0;}</style><div class="rpcss-15kxmi0"><p>Dans sa politique d'enrichissement des types primitifs, ES6 introduit les
symboles. Chers aux développeurs de nombreux langages, Ruby en tête, les
symboles constituent une étape de plus vers l'éradication du <em>stringly-typed
programming</em>. En effet, les symboles fournissent un moyen plus robuste de
représenter des identifiants.</p>
<h2>Créer un symbole</h2>
<p>La fonction <code>Symbol()</code> permet de créer de nouveaux symboles :</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// Un symbole tout bête</span>
<span class="hljs-keyword">const</span> mySymbol = <span class="hljs-built_in">Symbol</span>();
<span class="hljs-keyword">typeof</span> mySymbol === <span class="hljs-string">&quot;symbol&quot;</span>; <span class="hljs-comment">// true</span>

<span class="hljs-comment">// Un symbole avec une description</span>
<span class="hljs-keyword">const</span> myOtherSymbol = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&quot;description&quot;</span>);

<span class="hljs-comment">// Chaque symbole est unique</span>
<span class="hljs-keyword">const</span> yetAnotherSymbol = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&quot;description&quot;</span>);
yetAnotherSymbol === myOtherSymbol; <span class="hljs-comment">// false</span>
</code></pre>
<p>Chaque symbole créé avec <code>Symbol</code> est unique et immutable. Cela permet d'éviter
les collisions : on ne peut pas avoir deux symboles identiques par erreur.</p>
<h2>Utiliser les symboles pour l'implémentation d'un <em>enum</em></h2>
<p>Plutôt que d'utiliser des chaînes de caractères comme valeurs possible d'un
<em>enum</em>, on peut utiliser des symboles.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> ANIMAL_DOG = <span class="hljs-built_in">Symbol</span>();
<span class="hljs-keyword">const</span> ANIMAL_CAT = <span class="hljs-built_in">Symbol</span>();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDescription</span>(<span class="hljs-params">animal</span>) </span>{
  <span class="hljs-keyword">switch</span> (animal) {
    <span class="hljs-keyword">case</span> ANIMAL_DOG:
      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Loving animal&quot;</span>;
    <span class="hljs-keyword">case</span> ANIMAL_CAT:
      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Evil, sadistic animal&quot;</span>;
  }
}
</code></pre>
<p>De cette manière, on ne risque pas de mélanger accidentellement une chaine de
caractères fournie par l'utilisateur et la valeur d'un <em>enum</em>. On est obligé de
passer par une phase de parsing et de vérification.</p>
<h2>Utiliser un symbole comme clé</h2>
<p>Il est possible d'employer des symboles comme clés d'un objet ou d'une classe.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> myKey = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&quot;MY_KEY&quot;</span>);

<span class="hljs-keyword">const</span> myMutableObject = {};
myMutableObject[myKey] = <span class="hljs-string">&quot;a value&quot;</span>;

<span class="hljs-comment">// En utilisant les *computed property keys*</span>
<span class="hljs-keyword">const</span> myObj = {
  [myKey]: <span class="hljs-string">&quot;a value&quot;</span>,
};
</code></pre>
<p>Grâce à l'unicité des symboles, plus de problèmes de collision entre les clés
d'un objet. On peut laisser l'utilisateur étendre des objets sans prendre le
risque d'avoir des propriétés écrasées par erreur.</p>
<p>Par exemple, l'itérateur d'un objet employé par <code>for..of</code> est une propriété qui
a pour clé un symbole, accessible via <code>Symbol.iterator</code>.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> myIterableObject = {
  *[<span class="hljs-built_in">Symbol</span>.iterator]() {
    <span class="hljs-keyword">yield</span> <span class="hljs-string">&quot;One&quot;</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-string">&quot;Two&quot;</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-string">&quot;Three&quot;</span>;
  },
};

<span class="hljs-comment">// Affichera One, Two et Three</span>
<span class="hljs-keyword">for</span> (x <span class="hljs-keyword">of</span> myIterableObject) {
  <span class="hljs-built_in">console</span>.log(x);
}

<span class="hljs-comment">// Plantera avec &#x27;TypeError: undefined is not a function&#x27;</span>
<span class="hljs-keyword">for</span> (x <span class="hljs-keyword">of</span> {}) {
}
</code></pre>
<p>Différents symboles (les <em>well-known symbols</em>) sont disponibles pour indexer des
propriétés qui personnalisent le comportement des objets : <code>Symbol.iterator</code>
pour itérer sur les valeurs d'un objet, <code>Symbol.hasInstance</code> pour modifier le
retour de <code>instanceof</code>, …</p>
<p>Ces propriétés sont ainsi protégées contre tout accès involontaire.</p>
<h3>Différences avec l'utilisation d'une chaine de caractères comme clé</h3>
<p>Les propriétés indexées par des symboles ne sont pas accessibles depuis les
fonctions habituellement utilisées pour itérer sur les propriétés ou les
valeurs.</p>
<h4>Énumération</h4>
<p>Les propriétés indexées par des symboles ne sont pas visitées par <code>for..in</code>, ni
listées par <code>Object.keys</code> ni <code>Object.getOwnPropertyNames</code>. En revanche, elles
sont listées par <code>Object.getOwnPropertySymbols</code>.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> myObject = {
  [<span class="hljs-built_in">Symbol</span>()]: <span class="hljs-string">&quot;symbol-keyed value&quot;</span>,
  <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;string-keyed value&quot;</span>,
};

<span class="hljs-built_in">Object</span>.getOwnPropertyNames(myObject); <span class="hljs-comment">// [ &quot;key&quot; ]</span>
<span class="hljs-built_in">Object</span>.getOwnPropertySymbols(myObject); <span class="hljs-comment">// [ Symbol() ]</span>
</code></pre>
<p>Ainsi, du code utilisant <code>Object.getOwnPropertyNames</code> et s'attendant à recevoir
des chaînes de caractères ne sera pas cassé par l'utilisation de symboles en
tant que clés.</p>
<h4><code>JSON.stringify</code></h4>
<p>Les propriétés indexées par un symbole sont ignorées par <code>JSON.stringify</code>.</p>
<pre><code class="hljs language-javascript"><span class="hljs-built_in">JSON</span>.stringify({
  [<span class="hljs-built_in">Symbol</span>()]: <span class="hljs-string">&quot;symbol-keyed value&quot;</span>,
  <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;string-keyed value&quot;</span>,
}); <span class="hljs-comment">// &#x27;{&quot;key&quot;:&quot;string-keyed value&quot;}&#x27;</span>
</code></pre>
<h2>Registre global des symboles</h2>
<p>Un symbole est unique, une fois créé, il est impossible d'en créér un autre
ayant les mêmes propriétés. Il faut donc que le symbole créé soit accessible
d'une manière ou d'une autre pour pouvoir l'employer. En revanche, il est
possible de créer un symbole dans un registre global accessible de n'importe où,
grâce à <code>Symbol.for</code>.</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// Renvoie un symbole, en le créant s&#x27;il n&#x27;existe pas déjà</span>
<span class="hljs-keyword">const</span> mySymbol = <span class="hljs-built_in">Symbol</span>.for(<span class="hljs-string">&quot;mySymbol&quot;</span>);

mySymbol === <span class="hljs-built_in">Symbol</span>.for(<span class="hljs-string">&quot;mySymbol&quot;</span>); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// Il est possible de récupérer la clé avec laquelle un symbole a été inséré</span>
<span class="hljs-comment">// dans le registre</span>
<span class="hljs-built_in">Symbol</span>.keyFor(mySymbol); <span class="hljs-comment">// &#x27;mySymbol&#x27;</span>

<span class="hljs-comment">// Un symbole non créé dans le registre n&#x27;est pas disponible</span>
<span class="hljs-built_in">Symbol</span>.keyFor(<span class="hljs-built_in">Symbol</span>()); <span class="hljs-comment">// undefined</span>
</code></pre>
<p><code>Symbol.for</code> permet donc de partager des symboles partout dans le code, y
compris dans des contextes d'exécution différents (différentes frames).</p>
<h2>Support</h2>
<p>Côté navigateur, les symboles sont supportés depuis Chrome 38, Firefox 36, Opera
25 et Safari 9. Rien chez Internet Explorer. Le support Babel est limité.</p>
<p>Côté Node.js, le support des symboles est là depuis la version <code>0.12</code>.</p>
<p>Les <em>well-known symbols</em> ne sont pas tous disponibles sur les différentes
plates-formes, leur présence dépendant des fonctionnalités auxquelles ils sont
liés.</p>
<h2>Pour résumer</h2>
<p>Les symboles fournissent un moyen de créer des tokens uniques, ce qui est bien
plus robuste que l'utilisation de chaînes de caractères. L'utilisation des
symboles pour représenter les valeurs d'un <em>enum</em> permet d'éviter les collisions
et le mélange avec des données non qualifiées.</p>
<p>En tant que clés d'un objet, les symboles permettent d'éviter les collisions et
d'avoir des <em>méta-propriétés</em> séparées et indépendantes des propriétés indexées
par des clés. Les propriétés indexées par des symboles ne peuvent pas être lues,
modifiées ou listées par erreur, ce qui leur offre un certain degré de
protection contre des manipulations accidentelles.</p>
<h2>Pour aller plus loin</h2>
<ul>
<li><a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Symbol">La documentation des symboles sur MDN</a></li>
<li><a href="http://www.2ality.com/2014/12/es6-symbols.html">Un article complet sur le fonctionnement des symboles et leur cas d'utilisation</a></li>
</ul>
</div><style data-emotion="rpcss unyj6i">.rpcss-unyj6i{max-width:640px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:20px auto;padding:20px;background-color:var(--page-background-color);border-radius:10px;box-shadow:0 15px 15px -5px rgba(0, 0, 0, 0.2);}@media (max-width: 540px){.rpcss-unyj6i{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="rpcss-unyj6i"><style data-emotion="rpcss ty7r4z">.rpcss-ty7r4z{font-weight:800;}</style><div class="rpcss-ty7r4z">Vous avez aimé cet article?</div><style data-emotion="rpcss klacsp">.rpcss-klacsp{width:0;height:10px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}</style><div class="rpcss-klacsp"></div><style data-emotion="rpcss 1pkr03v">.rpcss-1pkr03v{background-color:#00aced;color:#fff;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;border-radius:5px;font-weight:800;}.rpcss-1pkr03v:active{opacity:0.5;}</style><a class="rpcss-1pkr03v" href="https://www.twitter.com/intent/tweet?text=ES6%2C%20ES2015%20%3A%20les%20symboles%20sur%20%40PutainDeCode%20https%3A%2F%2Fputaindecode.io%2Farticles%2Fes6-es2015-les-symboles" target="_blank">Le partager sur Twitter</a></div><style data-emotion="rpcss x4iqxe">.rpcss-x4iqxe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;padding:20px;}</style><div class="rpcss-x4iqxe"><style data-emotion="rpcss gein6x">.rpcss-gein6x{font-size:20px;-webkit-text-decoration:none;text-decoration:none;color:#1E49B5;}</style><a class="rpcss-gein6x" href="/articles">← Articles</a></div><style data-emotion="rpcss 8bodgl">.rpcss-8bodgl{max-width:640px;width:100%;margin:0 auto;padding:20px 0;}</style><div class="rpcss-8bodgl" id="disqus_thread"></div></div></div></div></div><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 1vau6rl">.rpcss-1vau6rl{margin:20px 0;background-color:var(--page-accented-background-color);border-radius:10px;padding:20px;}</style><div class="rpcss-1vau6rl"><style data-emotion="rpcss 1gz1i1h">.rpcss-1gz1i1h{font-size:32px;font-weight:800;margin-bottom:20px;text-align:center;}</style><div aria-level="2" class="rpcss-1gz1i1h" role="heading">Ne rien rater</div><style data-emotion="rpcss 1wbispj">.rpcss-1wbispj{font-size:18px;margin-bottom:10px;text-align:center;}</style><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur les réseaux</div><style data-emotion="rpcss 1hyoz7m">.rpcss-1hyoz7m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="rpcss-1hyoz7m"><a href="https://twitter.com/PutainDeCode"><img alt="Twitter" height="48" src="/public/images/website/twitter.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://facebook.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/facebook.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://github.com/putaindecode"><img alt="Facebook" height="48" src="/public/images/website/github.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://itunes.apple.com/fr/podcast/putain-de-code-!/id1185311825"><img alt="Apple Podcast" height="48" src="/public/images/website/apple-podcast.svg" width="48"/></a><div class="rpcss-4cf197"></div><a href="https://soundcloud.com/putaindecode"><img alt="Soundcloud" height="48" src="/public/images/website/soundcloud.svg" width="48"/></a></div><div aria-level="3" class="rpcss-1wbispj" role="heading">Sur le chat</div><div class="rpcss-1hyoz7m"><a href="https://discord.gg/jtbGNNc"><img alt="Discord" height="48" src="/public/images/website/discord.svg" width="48"/></a></div></div></div></div><style data-emotion="rpcss zs8kw7">.rpcss-zs8kw7{background-color:#222;padding:20px 0;}</style><footer class="rpcss-zs8kw7"><div class="rpcss-1qqk0tr"><div class="rpcss-qx7dny"><style data-emotion="rpcss 79elbk">.rpcss-79elbk{position:relative;}</style><div class="rpcss-79elbk"><style data-emotion="rpcss 1hle0ni">.rpcss-1hle0ni{position:absolute;left:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1hle0ni" href="/api/articles/feeds/desc/feed.xml"><style data-emotion="rpcss lvyu5j">.rpcss-lvyu5j{margin-right:10px;}</style><img class="rpcss-lvyu5j" alt="Flux RSS" height="16" src="/public/images/website/rss-feed.svg" width="16"/><style data-emotion="rpcss um3i31">@media (max-width: 400px){.rpcss-um3i31{display:none;}}</style><div class="rpcss-um3i31">Flux RSS</div></a><style data-emotion="rpcss 12cp4l7">.rpcss-12cp4l7{color:rgba(255, 255, 255, 0.5);text-align:center;font-size:14px;}</style><div class="rpcss-12cp4l7">© 2021 Putain de code !</div><style data-emotion="rpcss 1w98uy3">.rpcss-1w98uy3{position:absolute;right:0;top:50%;color:#fff;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><a class="rpcss-1w98uy3" href="https://github.com/putaindecode/putaindecode.io">GitHub</a></div></div></div></footer></div><script id="initialData" type="text/data">{"lists":{"RE_PRIVATE_NONE":true},"items":{"k":"articles","v":{"k":"es6-es2015-les-symboles","v":{"_0":{"TAG":0,"_0":{"slug":"es6-es2015-les-symboles","filename":"2015-12-17-es6-es2015-les-symboles","title":"ES6, ES2015 : les symboles","date":"Thu, 17 Dec 2015 00:00:00 GMT","draft":false,"meta":{"date":"2015-12-17T00:00:00.000Z","title":"ES6, ES2015 : les symboles","author":"divarvel","oldSlug":"js/es2015/symbols","slug":"es6-es2015-les-symboles"},"body":"<p>Dans sa politique d'enrichissement des types primitifs, ES6 introduit les\nsymboles. Chers aux développeurs de nombreux langages, Ruby en tête, les\nsymboles constituent une étape de plus vers l'éradication du <em>stringly-typed\nprogramming</em>. En effet, les symboles fournissent un moyen plus robuste de\nreprésenter des identifiants.</p>\n<h2>Créer un symbole</h2>\n<p>La fonction <code>Symbol()</code> permet de créer de nouveaux symboles :</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// Un symbole tout bête</span>\n<span class=\"hljs-keyword\">const</span> mySymbol = <span class=\"hljs-built_in\">Symbol</span>();\n<span class=\"hljs-keyword\">typeof</span> mySymbol === <span class=\"hljs-string\">&quot;symbol&quot;</span>; <span class=\"hljs-comment\">// true</span>\n\n<span class=\"hljs-comment\">// Un symbole avec une description</span>\n<span class=\"hljs-keyword\">const</span> myOtherSymbol = <span class=\"hljs-built_in\">Symbol</span>(<span class=\"hljs-string\">&quot;description&quot;</span>);\n\n<span class=\"hljs-comment\">// Chaque symbole est unique</span>\n<span class=\"hljs-keyword\">const</span> yetAnotherSymbol = <span class=\"hljs-built_in\">Symbol</span>(<span class=\"hljs-string\">&quot;description&quot;</span>);\nyetAnotherSymbol === myOtherSymbol; <span class=\"hljs-comment\">// false</span>\n</code></pre>\n<p>Chaque symbole créé avec <code>Symbol</code> est unique et immutable. Cela permet d'éviter\nles collisions : on ne peut pas avoir deux symboles identiques par erreur.</p>\n<h2>Utiliser les symboles pour l'implémentation d'un <em>enum</em></h2>\n<p>Plutôt que d'utiliser des chaînes de caractères comme valeurs possible d'un\n<em>enum</em>, on peut utiliser des symboles.</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">const</span> ANIMAL_DOG = <span class=\"hljs-built_in\">Symbol</span>();\n<span class=\"hljs-keyword\">const</span> ANIMAL_CAT = <span class=\"hljs-built_in\">Symbol</span>();\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getDescription</span>(<span class=\"hljs-params\">animal</span>) </span>{\n  <span class=\"hljs-keyword\">switch</span> (animal) {\n    <span class=\"hljs-keyword\">case</span> ANIMAL_DOG:\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;Loving animal&quot;</span>;\n    <span class=\"hljs-keyword\">case</span> ANIMAL_CAT:\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;Evil, sadistic animal&quot;</span>;\n  }\n}\n</code></pre>\n<p>De cette manière, on ne risque pas de mélanger accidentellement une chaine de\ncaractères fournie par l'utilisateur et la valeur d'un <em>enum</em>. On est obligé de\npasser par une phase de parsing et de vérification.</p>\n<h2>Utiliser un symbole comme clé</h2>\n<p>Il est possible d'employer des symboles comme clés d'un objet ou d'une classe.</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">const</span> myKey = <span class=\"hljs-built_in\">Symbol</span>(<span class=\"hljs-string\">&quot;MY_KEY&quot;</span>);\n\n<span class=\"hljs-keyword\">const</span> myMutableObject = {};\nmyMutableObject[myKey] = <span class=\"hljs-string\">&quot;a value&quot;</span>;\n\n<span class=\"hljs-comment\">// En utilisant les *computed property keys*</span>\n<span class=\"hljs-keyword\">const</span> myObj = {\n  [myKey]: <span class=\"hljs-string\">&quot;a value&quot;</span>,\n};\n</code></pre>\n<p>Grâce à l'unicité des symboles, plus de problèmes de collision entre les clés\nd'un objet. On peut laisser l'utilisateur étendre des objets sans prendre le\nrisque d'avoir des propriétés écrasées par erreur.</p>\n<p>Par exemple, l'itérateur d'un objet employé par <code>for..of</code> est une propriété qui\na pour clé un symbole, accessible via <code>Symbol.iterator</code>.</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">const</span> myIterableObject = {\n  *[<span class=\"hljs-built_in\">Symbol</span>.iterator]() {\n    <span class=\"hljs-keyword\">yield</span> <span class=\"hljs-string\">&quot;One&quot;</span>;\n    <span class=\"hljs-keyword\">yield</span> <span class=\"hljs-string\">&quot;Two&quot;</span>;\n    <span class=\"hljs-keyword\">yield</span> <span class=\"hljs-string\">&quot;Three&quot;</span>;\n  },\n};\n\n<span class=\"hljs-comment\">// Affichera One, Two et Three</span>\n<span class=\"hljs-keyword\">for</span> (x <span class=\"hljs-keyword\">of</span> myIterableObject) {\n  <span class=\"hljs-built_in\">console</span>.log(x);\n}\n\n<span class=\"hljs-comment\">// Plantera avec &#x27;TypeError: undefined is not a function&#x27;</span>\n<span class=\"hljs-keyword\">for</span> (x <span class=\"hljs-keyword\">of</span> {}) {\n}\n</code></pre>\n<p>Différents symboles (les <em>well-known symbols</em>) sont disponibles pour indexer des\npropriétés qui personnalisent le comportement des objets : <code>Symbol.iterator</code>\npour itérer sur les valeurs d'un objet, <code>Symbol.hasInstance</code> pour modifier le\nretour de <code>instanceof</code>, …</p>\n<p>Ces propriétés sont ainsi protégées contre tout accès involontaire.</p>\n<h3>Différences avec l'utilisation d'une chaine de caractères comme clé</h3>\n<p>Les propriétés indexées par des symboles ne sont pas accessibles depuis les\nfonctions habituellement utilisées pour itérer sur les propriétés ou les\nvaleurs.</p>\n<h4>Énumération</h4>\n<p>Les propriétés indexées par des symboles ne sont pas visitées par <code>for..in</code>, ni\nlistées par <code>Object.keys</code> ni <code>Object.getOwnPropertyNames</code>. En revanche, elles\nsont listées par <code>Object.getOwnPropertySymbols</code>.</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">const</span> myObject = {\n  [<span class=\"hljs-built_in\">Symbol</span>()]: <span class=\"hljs-string\">&quot;symbol-keyed value&quot;</span>,\n  <span class=\"hljs-attr\">key</span>: <span class=\"hljs-string\">&quot;string-keyed value&quot;</span>,\n};\n\n<span class=\"hljs-built_in\">Object</span>.getOwnPropertyNames(myObject); <span class=\"hljs-comment\">// [ &quot;key&quot; ]</span>\n<span class=\"hljs-built_in\">Object</span>.getOwnPropertySymbols(myObject); <span class=\"hljs-comment\">// [ Symbol() ]</span>\n</code></pre>\n<p>Ainsi, du code utilisant <code>Object.getOwnPropertyNames</code> et s'attendant à recevoir\ndes chaînes de caractères ne sera pas cassé par l'utilisation de symboles en\ntant que clés.</p>\n<h4><code>JSON.stringify</code></h4>\n<p>Les propriétés indexées par un symbole sont ignorées par <code>JSON.stringify</code>.</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-built_in\">JSON</span>.stringify({\n  [<span class=\"hljs-built_in\">Symbol</span>()]: <span class=\"hljs-string\">&quot;symbol-keyed value&quot;</span>,\n  <span class=\"hljs-attr\">key</span>: <span class=\"hljs-string\">&quot;string-keyed value&quot;</span>,\n}); <span class=\"hljs-comment\">// &#x27;{&quot;key&quot;:&quot;string-keyed value&quot;}&#x27;</span>\n</code></pre>\n<h2>Registre global des symboles</h2>\n<p>Un symbole est unique, une fois créé, il est impossible d'en créér un autre\nayant les mêmes propriétés. Il faut donc que le symbole créé soit accessible\nd'une manière ou d'une autre pour pouvoir l'employer. En revanche, il est\npossible de créer un symbole dans un registre global accessible de n'importe où,\ngrâce à <code>Symbol.for</code>.</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// Renvoie un symbole, en le créant s&#x27;il n&#x27;existe pas déjà</span>\n<span class=\"hljs-keyword\">const</span> mySymbol = <span class=\"hljs-built_in\">Symbol</span>.for(<span class=\"hljs-string\">&quot;mySymbol&quot;</span>);\n\nmySymbol === <span class=\"hljs-built_in\">Symbol</span>.for(<span class=\"hljs-string\">&quot;mySymbol&quot;</span>); <span class=\"hljs-comment\">// true</span>\n\n<span class=\"hljs-comment\">// Il est possible de récupérer la clé avec laquelle un symbole a été inséré</span>\n<span class=\"hljs-comment\">// dans le registre</span>\n<span class=\"hljs-built_in\">Symbol</span>.keyFor(mySymbol); <span class=\"hljs-comment\">// &#x27;mySymbol&#x27;</span>\n\n<span class=\"hljs-comment\">// Un symbole non créé dans le registre n&#x27;est pas disponible</span>\n<span class=\"hljs-built_in\">Symbol</span>.keyFor(<span class=\"hljs-built_in\">Symbol</span>()); <span class=\"hljs-comment\">// undefined</span>\n</code></pre>\n<p><code>Symbol.for</code> permet donc de partager des symboles partout dans le code, y\ncompris dans des contextes d'exécution différents (différentes frames).</p>\n<h2>Support</h2>\n<p>Côté navigateur, les symboles sont supportés depuis Chrome 38, Firefox 36, Opera\n25 et Safari 9. Rien chez Internet Explorer. Le support Babel est limité.</p>\n<p>Côté Node.js, le support des symboles est là depuis la version <code>0.12</code>.</p>\n<p>Les <em>well-known symbols</em> ne sont pas tous disponibles sur les différentes\nplates-formes, leur présence dépendant des fonctionnalités auxquelles ils sont\nliés.</p>\n<h2>Pour résumer</h2>\n<p>Les symboles fournissent un moyen de créer des tokens uniques, ce qui est bien\nplus robuste que l'utilisation de chaînes de caractères. L'utilisation des\nsymboles pour représenter les valeurs d'un <em>enum</em> permet d'éviter les collisions\net le mélange avec des données non qualifiées.</p>\n<p>En tant que clés d'un objet, les symboles permettent d'éviter les collisions et\nd'avoir des <em>méta-propriétés</em> séparées et indépendantes des propriétés indexées\npar des clés. Les propriétés indexées par des symboles ne peuvent pas être lues,\nmodifiées ou listées par erreur, ce qui leur offre un certain degré de\nprotection contre des manipulations accidentelles.</p>\n<h2>Pour aller plus loin</h2>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Symbol\">La documentation des symboles sur MDN</a></li>\n<li><a href=\"http://www.2ality.com/2014/12/es6-symbols.html\">Un article complet sur le fonctionnement des symboles et leur cas d'utilisation</a></li>\n</ul>\n"}}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"h":1,"l":{"RE_PRIVATE_NONE":true},"r":{"RE_PRIVATE_NONE":true}},"listsRequests":{"data":{"RE_PRIVATE_NONE":true}},"itemsRequests":{"data":{"RE_PRIVATE_NONE":true}}}</script><head><script defer="defer" src="/public/main.56c69761a03eb0112696.js"></script></head></html>