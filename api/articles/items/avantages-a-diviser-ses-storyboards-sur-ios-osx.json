{"slug":"avantages-a-diviser-ses-storyboards-sur-ios-osx","filename":"2015-12-01-avantages-a-diviser-ses-storyboards-sur-ios-osx","title":"Avantages à diviser ses storyboards sur iOS/OS X","date":"Tue, 01 Dec 2015 00:00:00 GMT","draft":false,"meta":{"date":"2015-12-01T00:00:00.000Z","title":"Avantages à diviser ses storyboards sur iOS/OS X","author":"leolelego","oldSlug":"xcode/storyboards/diviser","slug":"avantages-a-diviser-ses-storyboards-sur-ios-osx"},"body":"<p>Aujourd'hui, on va aborder un sujet qui parle à tous les devs iOS : les\n<strong>storyboards</strong>.</p>\n<blockquote>\n<p>Pour faire court : les storyboards sont les fichiers d'interface sous iOS/OS\nX. C'est là où vous placez vos <code>vues</code> dans vos <code>scènes</code>, vous les positionnez\nentre elles, vous pouvez créer des interactions entre les <code>scènes</code> pour passer\nde l'une à l'autre. C'est proche des XAML de Visual ou des Layouts d'Android,\nmais avec la notion de relation entre les <code>scènes</code> en plus. Ça permet de créer\ngraphiquement et simplement le workflow de l'application.</p>\n</blockquote>\n<h2>Pourquoi découper son storyboard</h2>\n<p>Pouvoir relier aussi facilement toutes les <code>scènes</code> dans un même storyboard,\nc'est génial. Mais alors, pourquoi les diviser ?</p>\n<h3>Éviter des conflits</h3>\n<p>Si vous travaillez à plusieurs, vous avez sûrement déjà rencontré des conflits\nlors de merges où tout le monde a décidé d'éditer le <code>storyboard</code> en même temps.\nLe storyboard est donc corrompu et le seul moyen de le récupérer est de prendre\ncelui de quelqu'un et refaire les changements ou de corriger les sources en\ncroisant les doigts. Accompagné de 4 L de café.<br />\nAvec plusieurs <code>storyboards</code> : chacun bosse sur sa partie graphique. Si <em>Bob</em> travaille\nsur les <em>vues de comptes</em> et <em>Joe</em> sur les <em>settings</em> de l'app, chacun a un storyboard\net ne change pas ceux des autres. On limite ainsi les chances d'avoir des conflits.</p>\n<h3>Les gros projets plus faciles à éditer/comprendre</h3>\n<p>Pour les gros projets, avec beaucoup de <code>scènes</code>, ranger ces <code>scènes</code> par\ngroupes dans différents <code>storyboards</code> peut être un bon moyen de s'y retrouver\nfacilement. Vous n'avez pas à dézoomer chaque fois que vous voulez chercher une\n<code>scène</code> à l'autre bout du storyboard.</p>\n<h3>Augmenter la vitesse de compilation</h3>\n<p>Recompiler tout le storyboard juste pour un <code>label</code> changé ça ne sert pas à\ngrand-chose et certains <code>storyboards</code> peuvent être longs à compiler. Donc moins\nd'éléments vous avez à recompiler, plus vite ça ira.</p>\n<h3>Réutilisation de code</h3>\n<p>Imaginons que vous bossez dans une boîte qui fait souvent les mêmes apps pour\nles clients, vous pouvez vous faire de petits storyboards que vous réutiliserez\net customiserez grâce aux contrôleurs (couleur, font, etc). Ça peut faire gagner\ndu temps, mais aussi beaucoup en perdre si vous en abusez ⚠️.</p>\n<h2>Comment faire</h2>\n<p>Rentrons dans le vif du sujet, le côté technique. En quelques lignes de code :</p>\n<pre><code class=\"hljs language-swift\"><span class=\"hljs-comment\">// *** Swift ***</span>\n<span class=\"hljs-comment\">// Aller chercher le storyboard</span>\n<span class=\"hljs-keyword\">let</span> storyboardSettings = <span class=\"hljs-type\">UIStoryboard</span>(name: <span class=\"hljs-string\">&quot;settings&quot;</span>, bundle: <span class=\"hljs-literal\">nil</span>)\n<span class=\"hljs-comment\">// Aller chercher le contrôleur qui est dans le storybard</span>\n<span class=\"hljs-keyword\">let</span> controllerSettings =\nstoryboardSettings.instantiateViewControllerWithIdentifier(<span class=\"hljs-string\">&quot;settingsController&quot;</span>)\n<span class=\"hljs-comment\">// Présenter</span>\n<span class=\"hljs-keyword\">self</span>.presentViewController(controllerSettings,animated: <span class=\"hljs-literal\">true</span>, completion: <span class=\"hljs-literal\">nil</span>)\n</code></pre>\n<pre><code class=\"hljs language-objc\"><span class=\"hljs-comment\">// *** Objective C ***</span>\n<span class=\"hljs-comment\">// Aller chercher le sotyboard</span>\n<span class=\"hljs-built_in\">UIStoryboard</span> * storyboardSettings = [<span class=\"hljs-built_in\">UIStoryboard</span> storyboardWithName:<span class=\"hljs-string\">@&quot;settings&quot;</span>\nbundle:<span class=\"hljs-literal\">nil</span>];\n<span class=\"hljs-comment\">// Aller chercher le contrôleur qui est dans le storybard</span>\n<span class=\"hljs-built_in\">UIViewController</span>* controllerSettings = [storyboardSettings\ninstantiateViewControllerWithIdentifier:<span class=\"hljs-string\">@&quot;settingsController&quot;</span>];\n<span class=\"hljs-comment\">// Présenter</span>\n[<span class=\"hljs-keyword\">self</span> presentViewController:controllerSettings animated:<span class=\"hljs-literal\">YES</span> completion:<span class=\"hljs-literal\">nil</span>];\n</code></pre>\n<p>Rien de plus simple ! Mais c'est bien connu, les développeurs iOS sont des\nfainéants, alors il y a encore plus simple, sans taper une seule ligne de code :</p>\n<ul>\n<li>créez un nouveau storyboard pour votre <em>secteur</em> (File→New→File→[OS]→User\nInterface),</li>\n<li>ajoutez une <code>scène</code> (<code>UIViewController</code>), mettre l'une en <code>vue initiale</code>\n(sinon le compilateur n'aime pas),</li>\n<li>nommez les <code>storyboardID</code> de chacune de ces <code>scènes</code> dans le menu\n<code>Utilies&gt;Identity Inspector</code>,</li>\n<li>dans votre storyboard original, dans le menu <code>Utilies&gt;Object Library</code> cherchez\n<code>storyboard</code> et ajoutez une <strong><code>Storyboard References</code></strong>,</li>\n<li>sur la référence dans <code>Utilises&gt;Attributes Inspector</code> rentrez le nom dans\nvotre storyboard (dans <em>storyboard</em>) et remplissez <em>Reference ID</em> avec le\n<em>storyboardID</em> de la <code>scène</code>,</li>\n<li>pour finir, ajoutez une <code>segue</code>, à partir d'un bouton (par exemple) vers les\n<em>Storyboard Reference</em> voulus.</li>\n</ul>\n<p>Plus long à lire qu'à faire !</p>\n"}