{"slug":"de-jquery-a-vanillajs","filename":"2013-12-05-de-jquery-a-vanillajs","title":"De jQuery à Vanilla JS","date":"Thu, 05 Dec 2013 00:00:00 GMT","draft":false,"meta":{"date":"2013-12-05T00:00:00.000Z","title":"De jQuery à Vanilla JS","author":"kud","oldSlug":"js/de-jquery-a-vanillajs","slug":"de-jquery-a-vanillajs"},"body":"<p>Oui alors jQuery, c'est sûrement très bien, ça simplifie pas mal de choses et le\n<em>chaining</em> est intéressant mais eeeest-ce que vous connaissez l'équivalent en\n<em>pur</em> JavaScript ? Pas sûr hein.</p>\n<p>Ce petit article vous propose de quoi peut-être vous faire changer d'avis sur la\nbibliothèque qui pèse tout de même environ ~80ko.</p>\n<p><em>Note : <a href=\"http://vanilla-js.com/\">Vanilla JS</a> n'est pas un framework mais veut\nsimplement dire &quot;à nu&quot;, c'est du JavaScript sans bibliothèque.</em></p>\n<p>C'est parti !</p>\n<h2>Table des matières</h2>\n<ol>\n<li><a href=\"#-v-nements\">Évènements</a></li>\n<li><a href=\"#s-lecteurs\">Sélecteurs</a></li>\n<li><a href=\"#attributs\">Attributs</a></li>\n<li><a href=\"#classes\">Classes</a></li>\n<li><a href=\"#manipulation\">Manipulation</a></li>\n<li><a href=\"#navigation\">Navigation</a></li>\n<li><a href=\"#ajax\">AJAX</a></li>\n<li><a href=\"#jsonp\">JSONP</a></li>\n</ol>\n<h2>Évènements</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$(<span class=\"hljs-built_in\">document</span>).ready(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n});\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-built_in\">document</span>.addEventListener(<span class=\"hljs-string\">&quot;DOMContentLoaded&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n});\n</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$(<span class=\"hljs-string\">&#x27;a&#x27;</span>).click(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-comment\">// code…</span>\n})\n\n<span class=\"hljs-comment\">// Vanilla</span>\n[].forEach.call(<span class=\"hljs-built_in\">document</span>.querySelectorAll(<span class=\"hljs-string\">&#x27;a&#x27;</span>), <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">el</span>) </span>{\n  el.addEventListener(<span class=\"hljs-string\">&#x27;click&#x27;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n    <span class=\"hljs-comment\">// code…</span>\n  })\n})\n</code></pre>\n<h2>Sélecteurs</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">var</span> divs = $(<span class=\"hljs-string\">&quot;div&quot;</span>);\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> divs = <span class=\"hljs-built_in\">document</span>.querySelectorAll(<span class=\"hljs-string\">&quot;div&quot;</span>);\n</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">var</span> newDiv = $(<span class=\"hljs-string\">&quot;&lt;div/&gt;&quot;</span>);\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> newDiv = <span class=\"hljs-built_in\">document</span>.createElement(<span class=\"hljs-string\">&quot;div&quot;</span>);\n</code></pre>\n<h2>Attributs</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$(<span class=\"hljs-string\">&quot;img&quot;</span>)\n  .filter(<span class=\"hljs-string\">&quot;:first&quot;</span>)\n  .attr(<span class=\"hljs-string\">&quot;alt&quot;</span>, <span class=\"hljs-string\">&quot;My image&quot;</span>);\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">&quot;img&quot;</span>).setAttribute(<span class=\"hljs-string\">&quot;alt&quot;</span>, <span class=\"hljs-string\">&quot;My image&quot;</span>);\n</code></pre>\n<h2>Classes</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\nnewDiv.addClass(<span class=\"hljs-string\">&quot;foo&quot;</span>);\n\n<span class=\"hljs-comment\">// Vanilla</span>\nnewDiv.classList.add(<span class=\"hljs-string\">&quot;foo&quot;</span>);\n</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\nnewDiv.toggleClass(<span class=\"hljs-string\">&quot;foo&quot;</span>);\n\n<span class=\"hljs-comment\">// Vanilla</span>\nnewDiv.classList.toggle(<span class=\"hljs-string\">&quot;foo&quot;</span>);\n</code></pre>\n<h2>Manipulation</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$(<span class=\"hljs-string\">&quot;body&quot;</span>).append($(<span class=\"hljs-string\">&quot;&lt;p/&gt;&quot;</span>));\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-built_in\">document</span>.body.appendChild(<span class=\"hljs-built_in\">document</span>.createElement(<span class=\"hljs-string\">&quot;p&quot;</span>));\n</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">var</span> clonedElement = $(<span class=\"hljs-string\">&quot;#about&quot;</span>).clone();\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> clonedElement = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">&quot;about&quot;</span>).cloneNode(<span class=\"hljs-literal\">true</span>);\n</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$(<span class=\"hljs-string\">&quot;#wrap&quot;</span>).empty();\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> wrap = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">&quot;wrap&quot;</span>);\n<span class=\"hljs-keyword\">while</span> (wrap.firstChild) wrap.removeChild(wrap.firstChild);\n</code></pre>\n<h2>Navigation</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">var</span> parent = $(<span class=\"hljs-string\">&quot;#about&quot;</span>).parent();\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> parent = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">&quot;about&quot;</span>).parentNode;\n</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">if</span>($(<span class=\"hljs-string\">&#x27;#wrap&#x27;</span>).is(<span class=\"hljs-string\">&#x27;:empty&#x27;</span>))\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">if</span>(!<span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">&#x27;wrap&#x27;</span>).hasChildNodes())\n</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">var</span> nextElement = $(<span class=\"hljs-string\">&quot;#wrap&quot;</span>).next();\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> nextElement = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">&quot;wrap&quot;</span>).nextSibling;\n</code></pre>\n<h2>AJAX</h2>\n<h3>GET</h3>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$.get(<span class=\"hljs-string\">&quot;//example.com&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n});\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> httpRequest = <span class=\"hljs-keyword\">new</span> XMLHttpRequest();\nhttpRequest.onreadystatechange = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n};\nhttpRequest.open(<span class=\"hljs-string\">&quot;GET&quot;</span>, url);\nhttpRequest.send();\n</code></pre>\n<h3>POST</h3>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$.post(<span class=\"hljs-string\">&quot;//example.com&quot;</span>, { <span class=\"hljs-attr\">username</span>: username }, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n});\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> httpRequest = <span class=\"hljs-keyword\">new</span> XMLHttpRequest();\nhttpRequest.onreadystatechange = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n};\nhttpRequest.setRequestHeader(\n  <span class=\"hljs-string\">&quot;Content-Type&quot;</span>,\n  <span class=\"hljs-string\">&quot;application/x-www-form-urlencoded&quot;</span>,\n);\nhttpRequest.open(<span class=\"hljs-string\">&quot;POST&quot;</span>, url);\nhttpRequest.send(<span class=\"hljs-string\">&quot;username=&quot;</span> + <span class=\"hljs-built_in\">encodeURIComponent</span>(username));\n</code></pre>\n<h3>JSONP</h3>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$.getJSON(<span class=\"hljs-string\">&quot;//openexchangerates.org/latest.json?callback=?&quot;</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n});\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">formatCurrency</span>(<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n}\n<span class=\"hljs-keyword\">var</span> scr = <span class=\"hljs-built_in\">document</span>.createElement(<span class=\"hljs-string\">&quot;script&quot;</span>);\nscr.src = <span class=\"hljs-string\">&quot;//openexchangerates.org/latest.json?callback=formatCurrency&quot;</span>;\n<span class=\"hljs-built_in\">document</span>.body.appendChild(scr);\n</code></pre>\n<p>Cela vous parait-il encore difficile de vous passer de jQuery ? :)</p>\n<p>Un grand merci à <a href=\"http://playground.deaxon.com/js/vanilla-js/\">@deaxon</a> qui est\nà l'origine de cet éclaircissement.</p>\n<h2>À creuser</h2>\n<p>Il existe une version minimaliste de jQuery basée sur la même API mais beaucoup\nplus légère s'appelant <a href=\"http://zeptojs.com/\">Zepto</a>. Il est actuellement utilisé\nen production sur le site mobile de ma boite.</p>\n"}