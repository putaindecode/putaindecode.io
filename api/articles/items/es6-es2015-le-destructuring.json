{"slug":"es6-es2015-le-destructuring","filename":"2015-12-02-es6-es2015-le-destructuring","title":"ES6, ES2015 : le destructuring","date":"Wed, 02 Dec 2015 00:00:00 GMT","draft":false,"meta":{"date":"2015-12-02T00:00:00.000Z","title":"ES6, ES2015 : le destructuring","author":"bloodyowl","oldSlug":"js/es2015/destructuring","slug":"es6-es2015-le-destructuring"},"body":"<h2>Le principe</h2>\n<p>Le destructuring consiste à assigner des variables provenant d'un objet ou\ntableau en reposant sur leur structure.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// Partons d&#x27;un objet `myObject`</span>\n<span class=\"hljs-keyword\">var</span> myObject = {\n  <span class=\"hljs-attr\">foo</span>: <span class=\"hljs-number\">1</span>,\n  <span class=\"hljs-attr\">bar</span>: <span class=\"hljs-number\">2</span>,\n};\n\n<span class=\"hljs-comment\">// Avec ES5, vous deviez par exemple faire</span>\n<span class=\"hljs-keyword\">var</span> foo = myObject.foo;\n<span class=\"hljs-keyword\">var</span> bar = myObject.bar;\n\nfoo; <span class=\"hljs-comment\">// 1</span>\nbar; <span class=\"hljs-comment\">// 2</span>\n\n<span class=\"hljs-comment\">// Avec ES6, vous pouvez désormais l&#x27;écrire sous la forme</span>\n<span class=\"hljs-keyword\">const</span> { foo, bar } = myObject;\nfoo; <span class=\"hljs-comment\">// 1</span>\nbar; <span class=\"hljs-comment\">// 2</span>\n\n<span class=\"hljs-comment\">// On peut bien entendu destructurer la valeur retournée par une</span>\n<span class=\"hljs-comment\">// fonction, pour peu qu&#x27;il s&#x27;agisse d&#x27;un objet ou d&#x27;un tableau</span>\n<span class=\"hljs-keyword\">const</span> getMyObject = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-keyword\">return</span> {\n    <span class=\"hljs-attr\">foo</span>: <span class=\"hljs-number\">1</span>,\n    <span class=\"hljs-attr\">bar</span>: <span class=\"hljs-number\">2</span>,\n  };\n};\n<span class=\"hljs-keyword\">const</span> { foo, bar } = getMyObject();\nfoo; <span class=\"hljs-comment\">// 1</span>\nbar; <span class=\"hljs-comment\">// 2</span>\n</code></pre>\n<h2>Les différentes syntaxes</h2>\n<h3>Tableau</h3>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// Pour un tableau, on utilise une forme proche de la déclaration litérale de</span>\n<span class=\"hljs-comment\">// tableau, vous remarquerez que pour ignorer un item, il suffit de ne rien</span>\n<span class=\"hljs-comment\">// placer entre les virgules</span>\n<span class=\"hljs-keyword\">const</span> [first, second, , fourth] = [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>];\nfirst; <span class=\"hljs-comment\">// 1</span>\nsecond; <span class=\"hljs-comment\">// 2</span>\nfourth; <span class=\"hljs-comment\">// 4</span>\n</code></pre>\n<h3>Utiliser un nom différent de la clé</h3>\n<p>Pour un objet, par défaut, le nom de la variable correspond au nom de la clé.\nSi, par exemple, vous avez déjà une variable portant le nom de la clé dans le\nscope, vous pouvez choisir de nommer différemment votre variable.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">var</span> myObject = {\n  <span class=\"hljs-attr\">foo</span>: <span class=\"hljs-number\">1</span>,\n  <span class=\"hljs-attr\">bar</span>: <span class=\"hljs-number\">2</span>,\n};\n<span class=\"hljs-keyword\">const</span> { <span class=\"hljs-attr\">foo</span>: renamedFoo } = myObject;\nrenamedFoo; <span class=\"hljs-comment\">// 1</span>\n</code></pre>\n<p>Cette syntaxe est, il faut tout de même le noter, peu lisible.</p>\n<h3>Arguments de fonctions</h3>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// On peut directement utiliser le destructuring dans une déclaration de</span>\n<span class=\"hljs-comment\">// fonction</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">myFunction</span>(<span class=\"hljs-params\">{ title, text }</span>) </span>{\n  <span class=\"hljs-keyword\">return</span> title + <span class=\"hljs-string\">&quot;: &quot;</span> + text;\n}\n\nmyFunction({ <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">&quot;foo&quot;</span>, <span class=\"hljs-attr\">text</span>: <span class=\"hljs-string\">&quot;bar&quot;</span> }); <span class=\"hljs-comment\">// &quot;foo: bar&quot;</span>\n</code></pre>\n<h3>Nested destructuring</h3>\n<p>On peut aussi imbriquer les assignements.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">var</span> myObject = {\n  <span class=\"hljs-attr\">foo</span>: {\n    <span class=\"hljs-attr\">bar</span>: <span class=\"hljs-number\">1</span>,\n  },\n};\n<span class=\"hljs-keyword\">const</span> {\n  <span class=\"hljs-attr\">foo</span>: { bar },\n} = myObject;\nbar; <span class=\"hljs-comment\">// 1</span>\n</code></pre>\n<p>Attention cependant, si le destructuring au premier niveau ne fera que retourner\n<code>undefined</code> si la valeur n'existe pas, vous aurez bel et bien une erreur avec le\nnesting, puisqu'il essaiera d'aller chercher une propriété d'<code>undefined</code>. Pour\npallier ces soucis, rendez-vous pour l'article sur les\n<a href=\"/fr/articles/js/es2015/defaults/\">defaults</a>.</p>\n"}